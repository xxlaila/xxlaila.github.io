<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>懒羊羊</title>
  
  <subtitle>我是不会和普通的羊一般见识的。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.xxlaila.cn/"/>
  <updated>2019-11-27T01:15:35.606Z</updated>
  <id>https://www.xxlaila.cn/</id>
  
  <author>
    <name>xxlaila</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>logstash详解</title>
    <link href="https://www.xxlaila.cn/2019/11/21/logstash%E8%AF%A6%E8%A7%A3/"/>
    <id>https://www.xxlaila.cn/2019/11/21/logstash详解/</id>
    <published>2019-11-21T03:51:23.000Z</published>
    <updated>2019-11-27T01:15:35.606Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前篇文件<a href="http://www.xxlaila.cn/2019/11/15/elk%E9%83%A8%E7%BD%B2/">elk部署</a>粗略的完成了部署，但是真正是批量使用的时候发现还是有很多不足，优化的点还是非常的多。<a id="more"></a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;使用ElasticSearch时一般需要自己创建ElasticSearch的索引的Mapping，当索引非常多的时候，可能需要配置一个索引模板Template来对类似的索引做统一配置，让索引模板Template中配置匹配索引的规则，来确定该Template会被应用到哪些索引上。</p><h3 id="Template配置方式"><a href="#Template配置方式" class="headerlink" title="Template配置方式"></a>Template配置方式</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Logstash在整合ElasticSearch的时候，有三种方式可以来进行Template的配置。</p><h4 id="使用ElasticSearch默认自带的索引模板"><a href="#使用ElasticSearch默认自带的索引模板" class="headerlink" title="使用ElasticSearch默认自带的索引模板"></a>使用ElasticSearch默认自带的索引模板</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ElasticSearch默认自带了一个名字为”logstash”的模板，默认应用于Logstash写入数据到ElasticSearch使用，我们可以在通过es的api接口、或者在kibana dev tools窗口通过GET /_template/来进行查看</p><ul><li><p>api 查看</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET http://127.0.0.1:9200/_template  -s | python -m json.tool</span><br><span class="line"></span><br><span class="line">$ curl -XGET http://127.0.0.1:9200/_template?pretty</span><br></pre></td></tr></table></figure></li><li><p>kibana 查看<br><img src="https://img.xxlaila.cn/1574314182454.jpg" alt="img"></p></li><li><p>优点: 最简单，无须任何配置</p></li><li><p>缺点: 无法自定义一些配置，例如：分词方式</p></li></ul><h4 id="在Logstash-Indexer端自定义配置索引模板"><a href="#在Logstash-Indexer端自定义配置索引模板" class="headerlink" title="在Logstash Indexer端自定义配置索引模板"></a>在Logstash Indexer端自定义配置索引模板</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Logstash的output插件中使用template指定本机器上的一个模板json文件路径，可以在json文件中设置对应的Template模板信息。前面的章节就使用的这种方式。</p><ul><li>优点：配置简单</li><li>缺点：因为分散在Logstash Indexer机器上，维护起来比较麻烦</li></ul><h4 id="在ElasticSearch服务端自定义配置索引模板"><a href="#在ElasticSearch服务端自定义配置索引模板" class="headerlink" title="在ElasticSearch服务端自定义配置索引模板"></a>在ElasticSearch服务端自定义配置索引模板</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由ElasticSearch负责加载模板。这种方式需要在ElasticSearch的集群中的config/templates路径下配置模板json。而且ElasticSearch提供了Restful API接口维护索引模板信息。</p><ul><li>优点：维护比较容易，可动态更改，全局生效。</li><li>缺点：需要注意模板的命名规则，比较容易通过看Template名字就能够确定模板应用到哪些索引</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;三种索引方式都有优缺点；但是使用第三种方式是最好的，就像之前<a href="http://www.xxlaila.cn/2019/11/15/elk%E9%83%A8%E7%BD%B2/">elk部署</a>就使用的是第二种方式，然后是在用的时候发现，logstash是多台服务器，维护起来非常非常的麻烦。如果logstash 和ElasticSearch只有一台服务器，可以使用第二种方式，在Logstash Indexer端维护Template文件即可。</p><h3 id="模版类型"><a href="#模版类型" class="headerlink" title="模版类型"></a>模版类型</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ElasticSearch的模板类型主要由两种：静态模板和动态模板</p><h4 id="静态模板"><a href="#静态模板" class="headerlink" title="静态模板"></a>静态模板</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;适合索引字段数据固定的场景，一旦配置完成，不能向里面加入多余的字段，否则会报错</p><ul><li>优点：scheam已知，业务场景明确，不容易出现因字段随便映射从而造成元数据撑爆es内存，从而导致es集群全部宕机</li><li>缺点：字段数多的情况下配置稍繁琐，针对于每个索引可能需要的模板都不同，很有可能需要配置很多个模板</li></ul><h4 id="动态模板"><a href="#动态模板" class="headerlink" title="动态模板"></a>动态模板</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;适合字段数不明确，大量字段的配置类型相同的场景，可以按照类型规则动态添加新字段，新加字段不会报错。主要需要配置 <code>dynamic_templates</code>。</p><ul><li>优点：可动态添加任意字段，无须改动schema</li><li>缺点：无标准schema导致数据不规则，如果添加的字段非常多，有可能造成ES集群宕机</li></ul><p><strong>注</strong>: 模板在设置生效后，仅对ES集群中新建立的索引生效，而对已存在的索引及时索引名满足模板的匹配规则，也不会生效，因此如果需要改变现有索引的Mapping信息，仍需要在正确的Mapping基础上建立新的索引，并将数据从原索引拷贝至新索引，变更新索引别名为原索引这种方式来实现。</p><h3 id="模板结构"><a href="#模板结构" class="headerlink" title="模板结构"></a>模板结构</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模版的结构如<a href="http://www.xxlaila.cn/2019/11/15/elk%E9%83%A8%E7%BD%B2/">elk部署</a>里面所提到的。分四部分</p><ul><li>通用设置: 主要是模板匹配索引的过滤规则，影响该模板对哪些索引生效；</li><li>settings: 配置索引的公共参数，比如索引的replicas，以及分片数shards等参数；</li><li>mappings: 最重要的一部分，在这部分中配置每个type下的每个field的相关属性，比如field类型（string,long,date等等），是否分词，是否在内存中缓存等等属性都在这部分配置；</li><li>aliases: 索引别名，索引别名可用在索引数据迁移等用途上。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当我们在定制索引模版的时候，这时候我们需要参考研发给的日志标准和需要的日志标准格式，以及日志样本等，给出一些运维的见解。否则做出来的东西不一定满足需求，又要重新来做。着重参考如下:</p><ul><li>是否存储</li><li>是否分词</li><li>以什么来建立索引</li><li>字段类型是什么</li><li>如何排序</li><li>字段数是否固定</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;结合这些，我们还可以参考词库的维护，ElasticSearch后期结构的变化调整，如果这些不考虑，在后期量起来以后，改动任何一项都需要去重新建立索引。是非常蛋疼的。</p><h3 id="创建模版"><a href="#创建模版" class="headerlink" title="创建模版"></a>创建模版</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里采用第三种三种方式建立模版，登录kibana，在dev tools栏下面，删除默认的logstash-<em>模版，然后创建一个logstash-</em>的模版，这样当新的索引来了以后，就会加载这个模版。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;前篇文件&lt;a href=&quot;http://www.xxlaila.cn/2019/11/15/elk%E9%83%A8%E7%BD%B2/&quot;&gt;elk部署&lt;/a&gt;粗略的完成了部署，但是真正是批量使用的时候发现还是有很多不足，优化的点还是非常的多。
    
    </summary>
    
      <category term="elk" scheme="https://www.xxlaila.cn/categories/elk/"/>
    
    
      <category term="logstash" scheme="https://www.xxlaila.cn/tags/logstash/"/>
    
  </entry>
  
  <entry>
    <title>logstash监控</title>
    <link href="https://www.xxlaila.cn/2019/11/19/logstash%E7%9B%91%E6%8E%A7/"/>
    <id>https://www.xxlaila.cn/2019/11/19/logstash监控/</id>
    <published>2019-11-19T02:35:56.000Z</published>
    <updated>2019-11-19T07:04:24.071Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="logstash-api-监控"><a href="#logstash-api-监控" class="headerlink" title="logstash api 监控"></a>logstash api 监控</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Logstash 5.0 开始，提供了输出自身进程的指标和状态监控的 API。这大大降低了我们监控 Logstash 的难度。<a id="more"></a>可以使用Logstash提供的监视API来检索这些指标。默认情况下api可用，不需任何额外的配置，或者可以配置X-Pack监视以将数据发送到监视群集。这个直接在kibana页面进行配置。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Logstash收集的指标包括:</p><ul><li>节点信息: 接口目前支持三种类型：pipeline、os、jvm。</li><li>插件信息: 包括已安装插件的列表。</li><li>节点统计指标: JVM统计信息，进程统计信息，与事件相关的统计信息和管道运行时统计信息。</li><li>热线程统计</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;检索常规信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"build_date"</span> : <span class="string">"2018-08-18T00:25:22Z"</span>,</span><br><span class="line">  <span class="string">"build_sha"</span> : <span class="string">"f8014ac54e6c8ff6c071c0960ca1b00e9735f43a"</span>,</span><br><span class="line">  <span class="string">"build_snapshot"</span> : <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="pipeline-指标"><a href="#pipeline-指标" class="headerlink" title="pipeline 指标"></a>pipeline 指标</h3><h4 id="工作程序数量，批处理大小和批处理延迟"><a href="#工作程序数量，批处理大小和批处理延迟" class="headerlink" title="工作程序数量，批处理大小和批处理延迟"></a>工作程序数量，批处理大小和批处理延迟</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/pipelines?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"pipelines"</span> : &#123;</span><br><span class="line">    <span class="string">"main"</span> : &#123;</span><br><span class="line">      <span class="string">"workers"</span> : 4,</span><br><span class="line">      <span class="string">"batch_size"</span> : 125,</span><br><span class="line">      <span class="string">"batch_delay"</span> : 50,</span><br><span class="line">      <span class="string">"config_reload_automatic"</span> : <span class="literal">false</span>,</span><br><span class="line">      <span class="string">"config_reload_interval"</span> : 3000000000,</span><br><span class="line">      <span class="string">"dead_letter_queue_enabled"</span> : <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="特定管道的信息"><a href="#特定管道的信息" class="headerlink" title="特定管道的信息"></a>特定管道的信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/pipelines/main?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"pipelines"</span> : &#123;</span><br><span class="line">    <span class="string">"main"</span> : &#123;</span><br><span class="line">      <span class="string">"workers"</span> : 4,</span><br><span class="line">      <span class="string">"batch_size"</span> : 125,</span><br><span class="line">      <span class="string">"batch_delay"</span> : 50,</span><br><span class="line">      <span class="string">"config_reload_automatic"</span> : <span class="literal">false</span>,</span><br><span class="line">      <span class="string">"config_reload_interval"</span> : 3000000000,</span><br><span class="line">      <span class="string">"dead_letter_queue_enabled"</span> : <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="OS-信息"><a href="#OS-信息" class="headerlink" title="OS 信息"></a>OS 信息</h3><h4 id="显示了操作系统名称，体系结构，版本和可用处理器"><a href="#显示了操作系统名称，体系结构，版本和可用处理器" class="headerlink" title="显示了操作系统名称，体系结构，版本和可用处理器"></a>显示了操作系统名称，体系结构，版本和可用处理器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/os?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"os"</span> : &#123;</span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"Linux"</span>,</span><br><span class="line">    <span class="string">"arch"</span> : <span class="string">"amd64"</span>,</span><br><span class="line">    <span class="string">"version"</span> : <span class="string">"3.10.0-693.11.1.el7.x86_64"</span>,</span><br><span class="line">    <span class="string">"available_processors"</span> : 4</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="jvm-信息"><a href="#jvm-信息" class="headerlink" title="jvm 信息"></a>jvm 信息</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;显示节点级别的JVM统计信息，例如JVM进程ID，版本，VM信息，内存使用情况以及有关垃圾收集器的信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/jvm?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"jvm"</span> : &#123;</span><br><span class="line">    <span class="string">"pid"</span> : 20827,</span><br><span class="line">    <span class="string">"version"</span> : <span class="string">"1.8.0_144"</span>,</span><br><span class="line">    <span class="string">"vm_version"</span> : <span class="string">"1.8.0_144"</span>,</span><br><span class="line">    <span class="string">"vm_vendor"</span> : <span class="string">"Oracle Corporation"</span>,</span><br><span class="line">    <span class="string">"vm_name"</span> : <span class="string">"Java HotSpot(TM) 64-Bit Server VM"</span>,</span><br><span class="line">    <span class="string">"start_time_in_millis"</span> : 1574066157917,</span><br><span class="line">    <span class="string">"mem"</span> : &#123;</span><br><span class="line">      <span class="string">"heap_init_in_bytes"</span> : 3221225472,</span><br><span class="line">      <span class="string">"heap_max_in_bytes"</span> : 3186360320,</span><br><span class="line">      <span class="string">"non_heap_init_in_bytes"</span> : 2555904,</span><br><span class="line">      <span class="string">"non_heap_max_in_bytes"</span> : 0</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"gc_collectors"</span> : [ <span class="string">"ParNew"</span>, <span class="string">"ConcurrentMarkSweep"</span> ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="插件信息"><a href="#插件信息" class="headerlink" title="插件信息"></a>插件信息</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;插件信息API获取有关当前安装的所有Logstash插件的信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/plugins?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"total"</span> : 98,</span><br><span class="line">  <span class="string">"plugins"</span> : [ &#123;</span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"logstash-codec-cef"</span>,</span><br><span class="line">    <span class="string">"version"</span> : <span class="string">"5.0.3"</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"logstash-codec-collectd"</span>,</span><br><span class="line">    <span class="string">"version"</span> : <span class="string">"3.0.8"</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"logstash-codec-dots"</span>,</span><br><span class="line">    <span class="string">"version"</span> : <span class="string">"3.0.6"</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"logstash-codec-edn"</span>,</span><br><span class="line">    <span class="string">"version"</span> : <span class="string">"3.0.6"</span></span><br><span class="line">  &#125;,……………………</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="节点统计指表"><a href="#节点统计指表" class="headerlink" title="节点统计指表"></a>节点统计指表</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;节点统计信息API检索有关Logstash的运行时统计信息。</p><h4 id="jvm统计"><a href="#jvm统计" class="headerlink" title="jvm统计"></a>jvm统计</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/stats/jvm?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"jvm"</span> : &#123;</span><br><span class="line">    <span class="string">"threads"</span> : &#123;</span><br><span class="line">      <span class="string">"count"</span> : 55,</span><br><span class="line">      <span class="string">"peak_count"</span> : 56</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"mem"</span> : &#123;</span><br><span class="line">      <span class="string">"heap_used_percent"</span> : 10,</span><br><span class="line">      <span class="string">"heap_committed_in_bytes"</span> : 3186360320,</span><br><span class="line">      <span class="string">"heap_max_in_bytes"</span> : 3186360320,</span><br><span class="line">      <span class="string">"heap_used_in_bytes"</span> : 348033216,</span><br><span class="line">      <span class="string">"non_heap_used_in_bytes"</span> : 170512848,</span><br><span class="line">      <span class="string">"non_heap_committed_in_bytes"</span> : 201850880,</span><br><span class="line">      <span class="string">"pools"</span> : &#123;</span><br><span class="line">        <span class="string">"survivor"</span> : &#123;</span><br><span class="line">          <span class="string">"peak_used_in_bytes"</span> : 34865152,</span><br><span class="line">          <span class="string">"used_in_bytes"</span> : 1629704,</span><br><span class="line">          <span class="string">"peak_max_in_bytes"</span> : 34865152,</span><br><span class="line">          <span class="string">"max_in_bytes"</span> : 34865152,</span><br><span class="line">          <span class="string">"committed_in_bytes"</span> : 34865152</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"old"</span> : &#123;</span><br><span class="line">          <span class="string">"peak_used_in_bytes"</span> : 230612312,</span><br><span class="line">          <span class="string">"used_in_bytes"</span> : 230612312,</span><br><span class="line">          <span class="string">"peak_max_in_bytes"</span> : 2872311808,</span><br><span class="line">          <span class="string">"max_in_bytes"</span> : 2872311808,</span><br><span class="line">          <span class="string">"committed_in_bytes"</span> : 2872311808</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"young"</span> : &#123;</span><br><span class="line">          <span class="string">"peak_used_in_bytes"</span> : 279183360,</span><br><span class="line">          <span class="string">"used_in_bytes"</span> : 115791200,</span><br><span class="line">          <span class="string">"peak_max_in_bytes"</span> : 279183360,</span><br><span class="line">          <span class="string">"max_in_bytes"</span> : 279183360,</span><br><span class="line">          <span class="string">"committed_in_bytes"</span> : 279183360</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"gc"</span> : &#123;</span><br><span class="line">      <span class="string">"collectors"</span> : &#123;</span><br><span class="line">        <span class="string">"old"</span> : &#123;</span><br><span class="line">          <span class="string">"collection_time_in_millis"</span> : 301,</span><br><span class="line">          <span class="string">"collection_count"</span> : 2</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"young"</span> : &#123;</span><br><span class="line">          <span class="string">"collection_time_in_millis"</span> : 2536,</span><br><span class="line">          <span class="string">"collection_count"</span> : 98</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"uptime_in_millis"</span> : 66149287</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="进程统计"><a href="#进程统计" class="headerlink" title="进程统计"></a>进程统计</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/stats/process?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"process"</span> : &#123;</span><br><span class="line">    <span class="string">"open_file_descriptors"</span> : 169,</span><br><span class="line">    <span class="string">"peak_open_file_descriptors"</span> : 170,</span><br><span class="line">    <span class="string">"max_file_descriptors"</span> : 16384,</span><br><span class="line">    <span class="string">"mem"</span> : &#123;</span><br><span class="line">      <span class="string">"total_virtual_in_bytes"</span> : 7337734144</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"cpu"</span> : &#123;</span><br><span class="line">      <span class="string">"total_in_millis"</span> : 593350,</span><br><span class="line">      <span class="string">"percent"</span> : 0,</span><br><span class="line">      <span class="string">"load_average"</span> : &#123;</span><br><span class="line">        <span class="string">"1m"</span> : 0.01,</span><br><span class="line">        <span class="string">"5m"</span> : 0.07,</span><br><span class="line">        <span class="string">"15m"</span> : 0.1</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="events"><a href="#events" class="headerlink" title="events"></a>events</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ curl -s localhost:9600/_node/stats/events?pretty=<span class="literal">true</span></span><br><span class="line">&#123; </span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"events"</span> : &#123;</span><br><span class="line">    <span class="string">"in"</span> : 103628,</span><br><span class="line">    <span class="string">"filtered"</span> : 103628,</span><br><span class="line">    <span class="string">"out"</span> : 103628,</span><br><span class="line">    <span class="string">"duration_in_millis"</span> : 96810,</span><br><span class="line">    <span class="string">"queue_push_duration_in_millis"</span> : 5104</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="管道统计"><a href="#管道统计" class="headerlink" title="管道统计"></a>管道统计</h3><ul><li>每个管道输入，过滤或输出的事件数</li><li>每个已配置的滤波器或输出级的统计信息</li><li>有关配置重新加载成功和失败的信息（启用配置重新加载时）</li><li>关于持久性队列信息（当 永久队列被启用）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/stats/pipelines?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">………………</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过包含管道ID来查看特定管道的统计信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/stats/pipelines/main?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">………………</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="刷新统计"><a href="#刷新统计" class="headerlink" title="刷新统计"></a>刷新统计</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;显示有关配置重新加载成功和失败的信息。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/stats/reloads?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"reloads"</span> : &#123;</span><br><span class="line">    <span class="string">"successes"</span> : 0,</span><br><span class="line">    <span class="string">"failures"</span> : 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="os-统计"><a href="#os-统计" class="headerlink" title="os 统计"></a>os 统计</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当Logstash在容器中运行时，请求将返回一个包含cgroup信息的JSON文档，提供CPU负载的更准确视图，包括是否对容器进行了限制。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/stats/os?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"os"</span> : &#123;</span><br><span class="line">    <span class="string">"cgroup"</span> : &#123;</span><br><span class="line">      <span class="string">"cpuacct"</span> : &#123;</span><br><span class="line">        <span class="string">"usage_nanos"</span> : 20928023701495776,</span><br><span class="line">        <span class="string">"control_group"</span> : <span class="string">"/"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"cpu"</span> : &#123;</span><br><span class="line">        <span class="string">"cfs_quota_micros"</span> : -1,</span><br><span class="line">        <span class="string">"control_group"</span> : <span class="string">"/"</span>,</span><br><span class="line">        <span class="string">"stat"</span> : &#123;</span><br><span class="line">          <span class="string">"number_of_times_throttled"</span> : 0,</span><br><span class="line">          <span class="string">"time_throttled_nanos"</span> : 0,</span><br><span class="line">          <span class="string">"number_of_elapsed_periods"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"cfs_period_micros"</span> : 100000</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="热线程api"><a href="#热线程api" class="headerlink" title="热线程api"></a>热线程api</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;热线程API获取Logstash的当前热线程。热线程是Java线程，具有很高的CPU使用率，并且执行时间比正常时间长。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/hot_threads?pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"host"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"version"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">  <span class="string">"http_address"</span> : <span class="string">"127.0.0.1:9600"</span>,</span><br><span class="line">  <span class="string">"id"</span> : <span class="string">"57c08022-8064-4bce-8c9b-e6db6e005479"</span>,</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"prod-elk-logstash-02"</span>,</span><br><span class="line">  <span class="string">"hot_threads"</span> : &#123;</span><br><span class="line">    <span class="string">"time"</span> : <span class="string">"2019-11-19T11:07:05+08:00"</span>,</span><br><span class="line">    <span class="string">"busiest_threads"</span> : 3,</span><br><span class="line">    <span class="string">"threads"</span> : [ &#123;</span><br><span class="line">      <span class="string">"name"</span> : <span class="string">"Ruby-0-Thread-23@[main]&gt;worker1"</span>,</span><br><span class="line">      <span class="string">"thread_id"</span> : 42,</span><br><span class="line">      <span class="string">"percent_of_cpu_time"</span> : 0.1,</span><br><span class="line">      <span class="string">"state"</span> : <span class="string">"timed_waiting"</span>,</span><br><span class="line">      <span class="string">"path"</span> : <span class="string">":1"</span>,</span><br><span class="line">      <span class="string">"traces"</span> : [ <span class="string">"sun.misc.Unsafe.park(Native Method)"</span>, <span class="string">"java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)"</span>, <span class="string">"java.util.concurrent.locks.AbstractQueuedSynchronizer<span class="variable">$ConditionObject</span>.awaitNanos(AbstractQueuedSynchronizer.java:2078)"</span> ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="string">"name"</span> : <span class="string">"Ruby-0-Thread-24@[main]&gt;worker2"</span>,</span><br><span class="line">      <span class="string">"thread_id"</span> : 43,</span><br><span class="line">      <span class="string">"percent_of_cpu_time"</span> : 0.06,</span><br><span class="line">      <span class="string">"state"</span> : <span class="string">"timed_waiting"</span>,</span><br><span class="line">      <span class="string">"path"</span> : <span class="string">":1"</span>,</span><br><span class="line">      <span class="string">"traces"</span> : [ <span class="string">"sun.misc.Unsafe.park(Native Method)"</span>, <span class="string">"java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)"</span>, <span class="string">"java.util.concurrent.locks.AbstractQueuedSynchronizer<span class="variable">$ConditionObject</span>.awaitNanos(AbstractQueuedSynchronizer.java:2078)"</span> ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="string">"name"</span> : <span class="string">"Ruby-0-Thread-22@[main]&gt;worker0"</span>,</span><br><span class="line">      <span class="string">"thread_id"</span> : 41,</span><br><span class="line">      <span class="string">"percent_of_cpu_time"</span> : 0.06,</span><br><span class="line">      <span class="string">"state"</span> : <span class="string">"timed_waiting"</span>,</span><br><span class="line">      <span class="string">"path"</span> : <span class="string">":1"</span>,</span><br><span class="line">      <span class="string">"traces"</span> : [ <span class="string">"sun.misc.Unsafe.park(Native Method)"</span>, <span class="string">"java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)"</span>, <span class="string">"java.util.concurrent.locks.AbstractQueuedSynchronizer<span class="variable">$ConditionObject</span>.awaitNanos(AbstractQueuedSynchronizer.java:2078)"</span> ]</span><br><span class="line">    &#125; ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可执行的参数:</p><ul><li>threads: 返回的热线程数。预设值为10。</li><li>stacktrace_size: 要为每个线程报告的堆栈跟踪的深度。默认值为50。</li><li>human: 如果为true，则返回纯文本而不是JSON格式。默认为false。</li><li>ignore_idle_threads: 如果为true，则不返回空闲线程。默认值为true。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET <span class="string">'localhost:9600/_node/hot_threads?human=true'</span></span><br><span class="line">Hot threads at 2019-11-19T11:07:43+08:00, busiestThreads=3:</span><br><span class="line">================================================================================</span><br><span class="line">0.1 % of cpu usage, state: timed_waiting, thread name: <span class="string">'Ruby-0-Thread-23@[main]&gt;worker1'</span>, thread id: 42</span><br><span class="line">:1</span><br><span class="line">        sun.misc.Unsafe.park(Native Method)</span><br><span class="line">        java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">        java.util.concurrent.locks.AbstractQueuedSynchronizer<span class="variable">$ConditionObject</span>.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">0.06 % of cpu usage, state: timed_waiting, thread name: <span class="string">'Ruby-0-Thread-24@[main]&gt;worker2'</span>, thread id: 43</span><br><span class="line">:1</span><br><span class="line">        sun.misc.Unsafe.park(Native Method)</span><br><span class="line">        java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">        java.util.concurrent.locks.AbstractQueuedSynchronizer<span class="variable">$ConditionObject</span>.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">0.06 % of cpu usage, state: timed_waiting, thread name: <span class="string">'Ruby-0-Thread-22@[main]&gt;worker0'</span>, thread id: 41</span><br><span class="line">:1</span><br><span class="line">        sun.misc.Unsafe.park(Native Method)</span><br><span class="line">        java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">        java.util.concurrent.locks.AbstractQueuedSynchronizer<span class="variable">$ConditionObject</span>.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">--------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面的一些api监控，可以写成脚本的形式，使用zabbix来进行监控。除了使用zabbix来监控logstash外，我们还可以使用自带的x-pack来进行监控，<a href="https://www.elastic.co/guide/en/logstash/6.6/logstash-monitoring-overview.html" target="_blank" rel="noopener">介绍可以参考官方</a>。</p><h3 id="X-Pack监视概述"><a href="#X-Pack监视概述" class="headerlink" title="X-Pack监视概述"></a>X-Pack监视概述</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;修改logstash.yml配置文件，在配置文件里面只需要修改两个参数即可 <code>xpack.monitoring.enabled</code> 、<code>xpack.monitoring.elasticsearch.url</code>。监控Elasticsearch的是启用 <code>xpack.monitoring.collection.enabled</code></p><h4 id="修改logstash-yml"><a href="#修改logstash-yml" class="headerlink" title="修改logstash.yml"></a>修改logstash.yml</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat logstash.yml</span><br><span class="line">xpack.monitoring.enabled: <span class="literal">true</span></span><br><span class="line">xpack.monitoring.elasticsearch.url: [<span class="string">"http://es1:9200"</span>,<span class="string">"http://es2:9200"</span>,<span class="string">"http://es3:9200"</span>]</span><br></pre></td></tr></table></figure><h4 id="重启logstash"><a href="#重启logstash" class="headerlink" title="重启logstash"></a>重启logstash</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo  systemctl  restart logstash</span><br></pre></td></tr></table></figure><h4 id="kibana-查看"><a href="#kibana-查看" class="headerlink" title="kibana 查看"></a>kibana 查看</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;登录kibana进行查看<br><img src="https://img.xxlaila.cn/1574146864906.jpg" alt="img"></p><p>点击node查看<br><img src="https://img.xxlaila.cn/1574146937095.jpg" alt="img"></p><p>这里顺道点考kibana<br><img src="https://img.xxlaila.cn/1574147026997.jpg" alt="img"></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;logstash-api-监控&quot;&gt;&lt;a href=&quot;#logstash-api-监控&quot; class=&quot;headerlink&quot; title=&quot;logstash api 监控&quot;&gt;&lt;/a&gt;logstash api 监控&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Logstash 5.0 开始，提供了输出自身进程的指标和状态监控的 API。这大大降低了我们监控 Logstash 的难度。
    
    </summary>
    
      <category term="elk" scheme="https://www.xxlaila.cn/categories/elk/"/>
    
    
      <category term="logstash" scheme="https://www.xxlaila.cn/tags/logstash/"/>
    
  </entry>
  
  <entry>
    <title>elk部署</title>
    <link href="https://www.xxlaila.cn/2019/11/15/elk%E9%83%A8%E7%BD%B2/"/>
    <id>https://www.xxlaila.cn/2019/11/15/elk部署/</id>
    <published>2019-11-15T07:46:03.000Z</published>
    <updated>2019-11-21T09:21:53.487Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;公司重新设定了日志的标准格式，日志打印格式均为json格式，之前是用filebeat进行收集的，没任何问题，但是这次的这个标准日志推的时候出现了，在日志显示和多行收集的时候出现了问题。<a id="more"></a><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java应用在报错的时候一般会提示一个很长的错误信息，如果在日志标准里面加入堆内存的错误，那信息就更长，一条日志就更大了，所以这里就得考量这个堆内存错误要打印多少问题。在显示的时候也遇到一个问题就是内容没有被索引，google一下查询是<code>not_analyzed</code>字符串默认设置导致的。查询得知对超过ignore_above的字符串，analyzer 不会进行处理。所以就不会索引，导致的结果就是最终搜索引擎搜索不到。这个选项主要对 not_analyzed 字段有用，这些字段通常用来进行过滤、聚合和排序。而且这些字段都是结构化的，所以一般不会允许在这些字段中索引过长的项。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;针对这些问题，和研发达成如协议，研发限制一条日志的message输出的长度，日志格式采用json，里面的字段不管。与似乎就要重置一下filebeat的参数，以及需要单独的建立自定义es模版，在logstash建立索引的时候需要用我们自定义的模版来建立索引。</p><h3 id="filebeat"><a href="#filebeat" class="headerlink" title="filebeat"></a>filebeat</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filebeat安装不阐述</p><h4 id="filebeat配置文件"><a href="#filebeat配置文件" class="headerlink" title="filebeat配置文件"></a>filebeat配置文件</h4><ul><li>filebeat.yml<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat filebeat.yml </span></span><br><span class="line">filebeat.inputs:</span><br><span class="line">  - <span class="built_in">type</span>: <span class="built_in">log</span></span><br><span class="line">    enabled: <span class="literal">true</span></span><br><span class="line">    paths:</span><br><span class="line">      - /opt/logs/*/*.<span class="built_in">log</span></span><br><span class="line">  tags: [<span class="string">"system"</span>]</span><br><span class="line">  exclude_files: [<span class="string">'.gz$'</span>]</span><br><span class="line">  fields:</span><br><span class="line">    env: dev</span><br><span class="line">    logtype: system-java</span><br><span class="line">  queue_size: 3000</span><br><span class="line">  multiline.pattern: <span class="string">'^[[:space:]]'</span></span><br><span class="line">  multiline.negate: <span class="literal">false</span></span><br><span class="line">  multiline.match: after</span><br><span class="line">  multiline.max_lines: 500</span><br><span class="line">  multiline.timeout: 5s</span><br><span class="line">  registry_file: /var/lib/filebeat/registry</span><br><span class="line">  harvester_buffer_sizeedit: 16384</span><br><span class="line">  max_bytes: 10485760</span><br><span class="line">  max_message_bytes: 1000000</span><br><span class="line">filebeat.config.modules:</span><br><span class="line">  path: <span class="variable">$&#123;path.config&#125;</span>/modules.d/*.yml</span><br><span class="line">  reload.enabled: <span class="literal">false</span></span><br><span class="line">output.logstash:</span><br><span class="line">  hosts: [<span class="string">"logstash:5555"</span>,<span class="string">"logstash:5556"</span>]</span><br><span class="line">  loadbalance: <span class="literal">true</span></span><br><span class="line">  worker: 1</span><br></pre></td></tr></table></figure></li></ul><h5 id="参数详解"><a href="#参数详解" class="headerlink" title="参数详解"></a>参数详解</h5><ul><li>input.type: 默认log，从日志文件读取每一行。stdin，从标准输入读取</li><li>paths: 日志文件路径列表，可用通配符，不递归</li><li>tags: 标记tag，可用于分组</li><li>exclude_files: 排除文件，后接一个正则表达式的列表，默认无</li><li>fields: 添加附件字段，可以使values，arrays，dictionaries或者任何嵌套数据<ul><li>env: 设置环境环境</li><li>logtype: 设置类别，在logstash里面判断，可用于建设不通的索引或者到不通的es集群里面</li></ul></li><li>queue_size: 处理管道中单个事件内的队列大小，默认1000</li><li>multiline.pattern: 多行匹配模式，后接正则表达式，默认无</li><li>multiline.negate: 多行匹配模式后配置的模式是否取反，默认false</li><li>multiline.match: 定义多行内容被添加到模式匹配行之后还是之前，默认无，可以被设置为after或者before</li><li>multiline.max_lines: 单一多行匹配聚合的最大行数，超过定义行数后的行会被丢弃，默认500</li><li>multiline.timeout: 多行匹配超时时间，超过超时时间后的当前多行匹配事件将停止并发送，然后开始一个新的多行匹配事件，默认5秒</li><li>registry_file: 指定 注册表文件，用于记录上次读取的位置，默认位于filebeat下的data目录</li><li>harvester_buffer_sizeedit: 每个采集器在获取文件时使用的缓冲区的大小（以字节为单位）。默认是16384</li><li>max_bytes: 单个日志消息可以拥有的最大字节数。之后的所有字节max_bytes被丢弃并且不被发送。此设置对于可能变大的多行日志消息特别有用。默认值是10MB（10485760）</li><li>max_message_bytes: 允许的最大json消息大小，默认为1000000，超出的会被丢弃，应该小于broker的  message.max.bytes（broker能接收消息的最大字节数）</li><li>output.logstash: 输出到logstash，从节点列表中选取不同的节点发送数据，达到 Round-Robin 负载均衡的效果。<ul><li>worker: 配置每个主机发布事件的worker数量。在负载均衡模式下最好启用。</li></ul></li></ul><h3 id="logstash-部署"><a href="#logstash-部署" class="headerlink" title="logstash 部署"></a>logstash 部署</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;安装不阐述，这里使用的自定义elasticsearch模版，可参考</p><h4 id="elasticsearch-模版"><a href="#elasticsearch-模版" class="headerlink" title="elasticsearch 模版"></a>elasticsearch 模版</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在Json日志文件中的KEY的位置不固定、或字段数不明确时使用动态映射模板。这里创建一个动态模版，模版是拷贝默认的 <code>logstash-*</code>模版来进行稍加修改的，<code>index_patterns</code> 该模版参数指定任意索引名称，并且指定允许添加新字段，匹配所有string类型的新字段会创建一个raw的嵌套字段，raw嵌套字段类型text，使用 <code>ignore_above</code>改变默认的长度。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">$ cat dev-java-template.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"order"</span>: 5,</span><br><span class="line">  <span class="string">"index_patterns"</span>: [</span><br><span class="line">    <span class="string">"*"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"settings"</span>: &#123;</span><br><span class="line">    <span class="string">"index"</span>: &#123;</span><br><span class="line">      <span class="string">"number_of_shards"</span>: <span class="string">"5"</span>,</span><br><span class="line">      <span class="string">"number_of_replicas"</span>: <span class="string">"1"</span>,</span><br><span class="line">      <span class="string">"refresh_interval"</span>: <span class="string">"10s"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"mappings"</span>: &#123;</span><br><span class="line">    <span class="string">"_default_"</span>: &#123;</span><br><span class="line">      <span class="string">"dynamic_templates"</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"message_field"</span>: &#123;</span><br><span class="line">            <span class="string">"match"</span>: <span class="string">"message"</span>,</span><br><span class="line">            <span class="string">"match_mapping_type"</span>: <span class="string">"string"</span>,</span><br><span class="line">            <span class="string">"mapping"</span>: &#123;</span><br><span class="line">              <span class="string">"type"</span>: <span class="string">"text"</span>,</span><br><span class="line">              <span class="string">"norms"</span> : <span class="literal">false</span>,</span><br><span class="line">              <span class="string">"fields"</span>: &#123;</span><br><span class="line">                <span class="string">"raw"</span>: &#123;</span><br><span class="line">                  <span class="string">"type"</span>: <span class="string">"keyword"</span>,</span><br><span class="line">                  <span class="string">"ignore_above"</span>: 10922</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"strings_fields"</span>: &#123;</span><br><span class="line">            <span class="string">"match"</span>: <span class="string">"*"</span>,</span><br><span class="line">            <span class="string">"match_mapping_type"</span>: <span class="string">"string"</span>,</span><br><span class="line">            <span class="string">"mapping"</span>: &#123;</span><br><span class="line">              <span class="string">"type"</span>: <span class="string">"text"</span>,</span><br><span class="line">              <span class="string">"norms"</span>: <span class="literal">false</span>,</span><br><span class="line">              <span class="string">"fields"</span>: &#123;</span><br><span class="line">                <span class="string">"raw"</span>: &#123;</span><br><span class="line">                  <span class="string">"type"</span>: <span class="string">"keyword"</span>,</span><br><span class="line">                  <span class="string">"ignore_above"</span>: 10922</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">"properties"</span>:&#123;</span><br><span class="line">        <span class="string">"@timestamp"</span>: &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"date"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"@version"</span>: &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"keyword"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"geoip"</span>: &#123;</span><br><span class="line">          <span class="string">"dynamic"</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="string">"properties"</span>: &#123;</span><br><span class="line">            <span class="string">"ip"</span>: &#123;</span><br><span class="line">              <span class="string">"type"</span>: <span class="string">"ip"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"location"</span>: &#123;</span><br><span class="line">              <span class="string">"type"</span>: <span class="string">"geo_point"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"latitude"</span>: &#123;</span><br><span class="line">              <span class="string">"type"</span>: <span class="string">"half_float"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"longitude"</span>: &#123;</span><br><span class="line">              <span class="string">"type"</span>: <span class="string">"half_float"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aliases"</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注</strong>:</p><ul><li>dynamic_templates: 配置具体的动态模板匹配项</li><li>match_mapping_type: “string” 是匹配固定的类型</li><li>match: message 匹配字段名为message的数据</li><li>mapping: 将匹配的数据项映射为定义的数据类型</li></ul><h4 id="logstash-配置文件"><a href="#logstash-配置文件" class="headerlink" title="logstash 配置文件"></a>logstash 配置文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">$ cat java.conf</span><br><span class="line">input  &#123;</span><br><span class="line">        beats &#123;</span><br><span class="line">                port =&gt; 5555</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">filter &#123;</span><br><span class="line">        <span class="comment"># application system logs</span></span><br><span class="line">        <span class="keyword">if</span> [fields][logtype] == <span class="string">"system-java"</span> &#123;</span><br><span class="line">                json &#123;</span><br><span class="line">                    <span class="built_in">source</span> =&gt; <span class="string">"message"</span></span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment"># application business logs</span></span><br><span class="line">        <span class="keyword">if</span> [fileds][logtype] == <span class="string">"business-java"</span> &#123;</span><br><span class="line">json &#123;</span><br><span class="line"><span class="built_in">source</span> =&gt; <span class="string">"message"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">        <span class="comment"># application system logs</span></span><br><span class="line">        <span class="keyword">if</span> [fields][logtype] == <span class="string">"system-java"</span> &#123;</span><br><span class="line">                elasticsearch &#123;</span><br><span class="line">codec =&gt; <span class="string">"json"</span></span><br><span class="line">                        hosts =&gt; [<span class="string">"es1:9200"</span>,<span class="string">"es2:9200"</span>,<span class="string">"es3:9200"</span>]</span><br><span class="line">                        index =&gt; <span class="string">"%&#123;[fields][kxlenv]&#125;-%&#123;[projectName]&#125;-%&#123;[logType]&#125;-%&#123;+YYYY-MM&#125;"</span></span><br><span class="line">                        template_overwrite =&gt; <span class="literal">true</span></span><br><span class="line">                        template_name =&gt; <span class="string">"system-java"</span></span><br><span class="line">                        template =&gt; <span class="string">"/opt/templates/java.template"</span></span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment"># applicatio business logs</span></span><br><span class="line"><span class="keyword">if</span> [fields][logtype] == <span class="string">"business-java"</span> &#123;</span><br><span class="line">elasticsearch &#123;</span><br><span class="line">                        action =&gt; <span class="string">"index"</span></span><br><span class="line">hosts =&gt; [<span class="string">"es1:9200"</span>,<span class="string">"es2:9200"</span>,<span class="string">"es3:9200"</span>]</span><br><span class="line">index =&gt; <span class="string">"%&#123;[fields][kxlenv]&#125;-%&#123;[projectName]&#125;-%&#123;[logType]&#125;-%&#123;+YYYY-MM&#125;"</span></span><br><span class="line">template_overwrite =&gt; <span class="literal">true</span></span><br><span class="line">                        template =&gt; <span class="string">"/opt/templates/dev-java-template.json"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>** 注 **:</p><ul><li>template : 指定template模板文件</li><li>template_overwrite : 是否覆盖ES中的template，默认是false</li><li>index: 是提取变量来进行创建索引，对应动态模版的里面 <code>index_patterns</code></li></ul><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><h4 id="重启logstash"><a href="#重启logstash" class="headerlink" title="重启logstash"></a>重启logstash</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl restart logstash</span><br></pre></td></tr></table></figure><h4 id="重启filebeat"><a href="#重启filebeat" class="headerlink" title="重启filebeat"></a>重启filebeat</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl restart filebeat</span><br></pre></td></tr></table></figure><h4 id="打开kibana验证"><a href="#打开kibana验证" class="headerlink" title="打开kibana验证"></a>打开kibana验证</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里我们打开kibana进行验证，看看自动创建的索引是否引用了自定义模版</p><ul><li><p>自定义模版<br><img src="https://img.xxlaila.cn/1574308152194.jpg" alt="img"></p></li><li><p>默认模版<br><img src="https://img.xxlaila.cn/1574308234494.jpg" alt="img"></p></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;公司重新设定了日志的标准格式，日志打印格式均为json格式，之前是用filebeat进行收集的，没任何问题，但是这次的这个标准日志推的时候出现了，在日志显示和多行收集的时候出现了问题。
    
    </summary>
    
      <category term="elk" scheme="https://www.xxlaila.cn/categories/elk/"/>
    
    
      <category term="elk" scheme="https://www.xxlaila.cn/tags/elk/"/>
    
  </entry>
  
  <entry>
    <title>mongodb语法实践</title>
    <link href="https://www.xxlaila.cn/2019/11/14/mongodb%E8%AF%AD%E6%B3%95%E5%AE%9E%E8%B7%B5/"/>
    <id>https://www.xxlaila.cn/2019/11/14/mongodb语法实践/</id>
    <published>2019-11-14T01:12:09.000Z</published>
    <updated>2019-11-19T07:19:43.652Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="Days-11-14"><a href="#Days-11-14" class="headerlink" title="Days(11.14)"></a>Days(11.14)</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mongodb之前都是负责搭建、维护、备份、监控等操作。闲时来总结一下语法。<a id="more"></a></p><h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><h4 id="根据条件查询数据量"><a href="#根据条件查询数据量" class="headerlink" title="根据条件查询数据量"></a>根据条件查询数据量</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;登录数据库操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.getCollection(<span class="string">'Tables'</span>).find(&#123;<span class="string">"字段"</span>:<span class="string">"条件"</span>,<span class="string">"字段"</span>:<span class="string">"条件"</span>&#125;).count();</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查看数据库表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; show collections</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查看mongodb的连接数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.serverStatus().connections</span><br></pre></td></tr></table></figure><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><h4 id="创建用户、数据库"><a href="#创建用户、数据库" class="headerlink" title="创建用户、数据库"></a>创建用户、数据库</h4><ul><li><p>创建数据库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; use xxx</span><br></pre></td></tr></table></figure></li><li><p>创建一个用户，拥有基本的读写权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.createUser(&#123;user:<span class="string">"xxx"</span>,<span class="built_in">pwd</span>:<span class="string">"xxx"</span>,roles:[&#123;role:<span class="string">"readWrite"</span>,db:<span class="string">"xxx"</span>&#125;]&#125;)</span><br></pre></td></tr></table></figure></li><li><p>创建用户需要赋予dbAdmin权限</p></li></ul><p><strong>dbAdmin</strong>: 允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.createUser(&#123;user:<span class="string">"demo"</span>,<span class="built_in">pwd</span>:<span class="string">"demo"</span>,roles:[&#123;role:<span class="string">"readWrite"</span>,db:<span class="string">"kxlChannel"</span>&#125;,&#123;role:<span class="string">"dbAdmin"</span>,db:<span class="string">"kxlChannel"</span>&#125;]&#125;)</span><br></pre></td></tr></table></figure><p><strong>注</strong>: role 权限要是readWrite,不能赋予dbadmin，否则不能操作数据库</p><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><h4 id="删除账户和数据库"><a href="#删除账户和数据库" class="headerlink" title="删除账户和数据库"></a>删除账户和数据库</h4><ul><li><p>删除账户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.dropUser(<span class="string">"xxx"</span>)</span><br></pre></td></tr></table></figure></li><li><p>删除数据库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.dropDatabase(<span class="string">"xxx"</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><h4 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.表.ensureIndex(&#123;<span class="string">"字段"</span>:1&#125;,&#123;<span class="string">"unique"</span>:<span class="literal">true</span>&#125;)</span><br><span class="line">&gt; db.表.ensureIndex(&#123;<span class="string">"字段"</span>:1&#125;,&#123;<span class="string">"unique"</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure><h4 id="查看索引"><a href="#查看索引" class="headerlink" title="查看索引"></a>查看索引</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.表.getIndexes()</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查看表数据是否引用了索引</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.表.find(&#123;<span class="string">"字段"</span>:<span class="string">"值"</span>&#125;).explain()</span><br></pre></td></tr></table></figure><h4 id="删除指定索引"><a href="#删除指定索引" class="headerlink" title="删除指定索引"></a>删除指定索引</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.表.dropIndex(<span class="string">"索引"</span>)</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;删除表全部索引</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.表.dropIndexes()</span><br></pre></td></tr></table></figure><h3 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h3><h4 id="根据条件导出部分数据"><a href="#根据条件导出部分数据" class="headerlink" title="根据条件导出部分数据"></a>根据条件导出部分数据</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  mongoexport --db=数据库 --collection=表 --username=账户 --password=密码 --authenticationDatabase=认证的数据库  --query=<span class="string">'&#123;"条件","条件"&#125;'</span> --fields=<span class="string">"导出的字段"</span> --<span class="built_in">type</span>=csv --out=/home/ll</span><br></pre></td></tr></table></figure><ul><li>参数介绍:<br>–db: 数据库<br>–collection: 表<br>–username: 账户<br>–password: 密码<br>–authenticationDatabase: 需要认证的数据库<br>–query: 条件<br>–fields: 导出的字段<br>–type: 导出的格式，默认是json，这里导出为csv，支持两种json和csv格式<br>–out: 导出路径文件</li></ul><p>更多参数参考 –help</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">general options:</span><br><span class="line">      --<span class="built_in">help</span>                                      <span class="built_in">print</span> usage</span><br><span class="line">      --version                                   <span class="built_in">print</span> the tool version and <span class="built_in">exit</span></span><br><span class="line">verbosity options:</span><br><span class="line">  -v, --verbose=&lt;level&gt;                           more detailed <span class="built_in">log</span> output (include multiple <span class="built_in">times</span> <span class="keyword">for</span> more verbosity, e.g. -vvvvv, or specify a numeric value, e.g. --verbose=N)</span><br><span class="line">      --quiet                                     hide all <span class="built_in">log</span> output</span><br><span class="line">connection options:</span><br><span class="line">  -h, --host=&lt;hostname&gt;                           mongodb host to connect to (setname/host1,host2 <span class="keyword">for</span> replica sets)</span><br><span class="line">      --port=&lt;port&gt;                               server port (can also use --host hostname:port)</span><br><span class="line">kerberos options:</span><br><span class="line">      --gssapiServiceName=&lt;service-name&gt;          service name to use when authenticating using GSSAPI/Kerberos (<span class="string">'mongodb'</span> by default)</span><br><span class="line">      --gssapiHostName=&lt;host-name&gt;                hostname to use when authenticating using GSSAPI/Kerberos (remote server<span class="string">'s address by default)</span></span><br><span class="line"><span class="string">ssl options:</span></span><br><span class="line"><span class="string">      --ssl                                       connect to a mongod or mongos that has ssl enabled</span></span><br><span class="line"><span class="string">      --sslCAFile=&lt;filename&gt;                      the .pem file containing the root certificate chain from the certificate authority</span></span><br><span class="line"><span class="string">      --sslPEMKeyFile=&lt;filename&gt;                  the .pem file containing the certificate and key</span></span><br><span class="line"><span class="string">      --sslPEMKeyPassword=&lt;password&gt;              the password to decrypt the sslPEMKeyFile, if necessary</span></span><br><span class="line"><span class="string">      --sslCRLFile=&lt;filename&gt;                     the .pem file containing the certificate revocation list</span></span><br><span class="line"><span class="string">      --sslAllowInvalidCertificates               bypass the validation for server certificates</span></span><br><span class="line"><span class="string">      --sslAllowInvalidHostnames                  bypass the validation for server name</span></span><br><span class="line"><span class="string">      --sslFIPSMode                               use FIPS mode of the installed openssl library</span></span><br><span class="line"><span class="string">authentication options:</span></span><br><span class="line"><span class="string">  -u, --username=&lt;username&gt;                       username for authentication</span></span><br><span class="line"><span class="string">  -p, --password=&lt;password&gt;                       password for authentication</span></span><br><span class="line"><span class="string">      --authenticationDatabase=&lt;database-name&gt;    database that holds the user'</span>s credentials</span><br><span class="line">      --authenticationMechanism=&lt;mechanism&gt;       authentication mechanism to use</span><br><span class="line">namespace options:</span><br><span class="line">  -d, --db=&lt;database-name&gt;                        database to use</span><br><span class="line">  -c, --collection=&lt;collection-name&gt;              collection to use</span><br><span class="line">uri options:</span><br><span class="line">      --uri=mongodb-uri                           mongodb uri connection string</span><br><span class="line">output options:</span><br><span class="line">  -f, --fields=&lt;field&gt;[,&lt;field&gt;]*                 comma separated list of field names (required <span class="keyword">for</span> exporting CSV) e.g. -f <span class="string">"name,age"</span></span><br><span class="line">      --fieldFile=&lt;filename&gt;                      file with field names - 1 per line</span><br><span class="line">      --<span class="built_in">type</span>=&lt;<span class="built_in">type</span>&gt;                               the output format, either json or csv (defaults to <span class="string">'json'</span>) (default: json)</span><br><span class="line">  -o, --out=&lt;filename&gt;                            output file; <span class="keyword">if</span> not specified, stdout is used</span><br><span class="line">      --jsonArray                                 output to a JSON array rather than one object per line</span><br><span class="line">      --pretty                                    output JSON formatted to be human-readable</span><br><span class="line">      --noHeaderLine                              <span class="built_in">export</span> CSV data without a list of field names at the first line</span><br><span class="line">querying options:</span><br><span class="line">  -q, --query=&lt;json&gt;                              query filter, as a JSON string, e.g., <span class="string">'&#123;x:&#123;$gt:1&#125;&#125;'</span></span><br><span class="line">      --queryFile=&lt;filename&gt;                      path to a file containing a query filter (JSON)</span><br><span class="line">  -k, --slaveOk                                   allow secondary reads <span class="keyword">if</span> available (default <span class="literal">true</span>) (default: <span class="literal">false</span>)</span><br><span class="line">      --readPreference=&lt;string&gt;|&lt;json&gt;            specify either a preference name or a preference json object</span><br><span class="line">      --forceTableScan                            force a table scan (<span class="keyword">do</span> not use <span class="variable">$snapshot</span>)</span><br><span class="line">      --skip=&lt;count&gt;                              number of documents to skip</span><br><span class="line">      --<span class="built_in">limit</span>=&lt;count&gt;                             <span class="built_in">limit</span> the number of documents to <span class="built_in">export</span></span><br><span class="line">      --sort=&lt;json&gt;                               sort order, as a JSON string, e.g. <span class="string">'&#123;x:1&#125;'</span></span><br><span class="line">      --assertExists                              <span class="keyword">if</span> specified, <span class="built_in">export</span> fails <span class="keyword">if</span> the collection does not exist (default: <span class="literal">false</span>)</span><br></pre></td></tr></table></figure><p>mongodb 备份脚本可以<a href="https://github.com/xxlaila/backup-monitoring/tree/master/backup" target="_blank" rel="noopener">参考</a>本人写的</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;Days-11-14&quot;&gt;&lt;a href=&quot;#Days-11-14&quot; class=&quot;headerlink&quot; title=&quot;Days(11.14)&quot;&gt;&lt;/a&gt;Days(11.14)&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mongodb之前都是负责搭建、维护、备份、监控等操作。闲时来总结一下语法。
    
    </summary>
    
      <category term="数据库" scheme="https://www.xxlaila.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="mongodb" scheme="https://www.xxlaila.cn/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>istio部署(二)</title>
    <link href="https://www.xxlaila.cn/2019/11/08/istio%E9%83%A8%E7%BD%B2-%E4%BA%8C/"/>
    <id>https://www.xxlaila.cn/2019/11/08/istio部署-二/</id>
    <published>2019-11-08T08:34:20.000Z</published>
    <updated>2019-11-15T06:15:36.320Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在前面的一篇文章中我做了简单的部署，但是在疏忽bookinfo的时候出现了错误；然后研究了和学习了三天怎么来结局这个错误，这个错误不解决，没办法进行下一步。后学的路由规则完全没办法学习和测试。<a id="more"></a></p><h3 id="istio错误解决"><a href="#istio错误解决" class="headerlink" title="istio错误解决"></a>istio错误解决</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;istio的错误查看<a href="https://www.xxlaila.cn/2019/08/30/k8s%E9%83%A8%E7%BD%B2istio/">istio的部署</a>，本次根据这个错误来进行解决。</p><h4 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h4><ul><li>apiserver日志</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个错误访问k8s的apiserver 问题，应该是超时。我们可以查看apiserver的日志，利用 journalctl 命令来筛选apiserver的日志</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># journalctl  -u  kube-apiserver  -f</span></span><br><span class="line"></span><br><span class="line">Nov 08 09:59:33 k8s-master-01-3.kxl kube-apiserver[31393]: I1108 09:59:33.659161   31393 trace.go:81] Trace[40457478]: <span class="string">"Create /apis/networking.istio.io/v1alpha3/namespaces/istio-system/gateways"</span> (started: 2019-11-08 09:59:03.657132211 +0800 CST m=+328870.679516549) (total time: 30.001964129s):</span><br><span class="line">Nov 08 09:59:33 k8s-master-01-3.kxl kube-apiserver[31393]: Trace[40457478]: [30.001964129s] [30.001043358s] END</span><br><span class="line">Nov 08 09:59:33 k8s-master-01-3.kxl kube-apiserver[31393]: W1108 09:59:33.659790   31393 dispatcher.go:73] Failed calling webhook, failing closed pilot.validation.istio.io: failed calling webhook <span class="string">"pilot.validation.istio.io"</span>: Post https://istio-galley.istio-system.svc:443/admitpilot?timeout=30s: net/http: request canceled <span class="keyword">while</span> waiting <span class="keyword">for</span> connection (Client.Timeout exceeded <span class="keyword">while</span> awaiting headers)</span><br><span class="line">Nov 08 09:59:39 k8s-master-01-3.kxl kube-apiserver[31393]: I1108 09:59:39.979543   31393 controller.go:107] OpenAPI AggregationController: Processing item v1beta1.metrics.k8s.io</span><br><span class="line">Nov 08 10:00:03 k8s-master-01-3.kxl kube-apiserver[31393]: W1108 10:00:03.764977   31393 dispatcher.go:73] Failed calling webhook, failing closed pilot.validation.istio.io: failed calling webhook <span class="string">"pilot.validation.istio.io"</span>: Post https://istio-galley.istio-system.svc:443/admitpilot?timeout=30s: context deadline exceeded (Client.Timeout exceeded <span class="keyword">while</span> awaiting headers)</span><br><span class="line">Nov 08 10:00:03 k8s-master-01-3.kxl kube-apiserver[31393]: I1108 10:00:03.765401   31393 trace.go:81] Trace[1649710078]: <span class="string">"Create /apis/networking.istio.io/v1alpha3/namespaces/default/destinationrules"</span> (started: 2019-11-08 09:59:33.763211641 +0800 CST m=+328900.785596022) (total time: 30.00209862s):</span><br><span class="line">Nov 08 10:00:03 k8s-master-01-3.kxl kube-apiserver[31393]: Trace[1649710078]: [30.00209862s] [30.001534667s] END</span><br><span class="line">Nov 08 10:00:33 k8s-master-01-3.kxl kube-apiserver[31393]: I1108 10:00:33.840606   31393 trace.go:81] Trace[970347589]: <span class="string">"Create /apis/networking.istio.io/v1alpha3/namespaces/weather/virtualservices"</span> (started: 2019-11-08 10:00:03.83792882 +0800 CST m=+328930.860313362) (total time: 30.002612137s):</span><br><span class="line">Nov 08 10:00:33 k8s-master-01-3.kxl kube-apiserver[31393]: Trace[970347589]: [30.002612137s] [30.001075132s] END</span><br><span class="line">Nov 08 10:00:33 k8s-master-01-3.kxl kube-apiserver[31393]: W1108 10:00:33.841663   31393 dispatcher.go:73] Failed calling webhook, failing closed pilot.validation.istio.io: failed calling webhook <span class="string">"pilot.validation.istio.io"</span>: Post https://istio-galley.istio-system.svc:443/admitpilot?timeout=30s: context deadline exceeded (Client.Timeout exceeded <span class="keyword">while</span> awaiting headers)</span><br><span class="line">Nov 08 10:00:38 k8s-master-01-3.kxl kube-apiserver[31393]: I1108 10:00:38.260710   31393 trace.go:81] Trace[460935607]: <span class="string">"GuaranteedUpdate etcd3: *v1.Endpoints"</span> (started: 2019-11-08 10:00:37.644096515 +0800 CST m=+328964.666480867) (total time: 616.515599ms):</span><br><span class="line">Nov 08 10:00:38 k8s-master-01-3.kxl kube-apiserver[31393]: Trace[460935607]: [533.664848ms] [449.34458ms] Transaction prepared</span><br><span class="line">Nov 08 10:00:39 k8s-master-01-3.kxl kube-apiserver[31393]: I1108 10:00:39.986622   31393 controller.go:107] OpenAPI AggregationController: Processing item v1beta1.metrics.k8s.io</span><br><span class="line">Nov 08 10:01:38 k8s-master-01-3.kxl kube-apiserver[31393]: I1108 10:01:38.780611   31393 trace.go:81] Trace[269873276]: <span class="string">"Get /api/v1/namespaces/default"</span> (started: 2019-11-08 10:01:37.631910347 +0800 CST m=+329024.654294682) (total time: 1.148554735s):</span><br><span class="line">Nov 08 10:01:38 k8s-master-01-3.kxl kube-apiserver[31393]: Trace[269873276]: [1.148211464s] [1.148180236s] About to write a response</span><br></pre></td></tr></table></figure><ul><li><p>istio-pilot日志</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl logs istio-pilot-569499d666-rfjsh  -n istio-system discovery</span></span><br><span class="line">2019-11-08T07:26:14.097765ZinfoHandling event update <span class="keyword">for</span> pod istio-security-post-install-1.2.8-c52np <span class="keyword">in</span> namespace istio-system -&gt; 172.30.112.9</span><br><span class="line">2019-11-08T07:26:27.395268ZinfoHandling event update <span class="keyword">for</span> pod istio-security-post-install-1.2.8-c52np <span class="keyword">in</span> namespace istio-system -&gt; 172.30.112.9</span><br><span class="line">2019-11-08T07:26:38.227484ZinfoClient received GoAway with http2.ErrCodeEnhanceYourCalm.</span><br><span class="line">2019-11-08T07:26:38.227760ZinfopickfirstBalancer: HandleSubConnStateChange: 0xc0001fbaa0, CONNECTING</span><br><span class="line">2019-11-08T07:26:38.228913Zinfotransport: loopyWriter.run returning. connection error: desc = <span class="string">"transport is closing"</span></span><br><span class="line">2019-11-08T07:26:38.230352ZerrormcpError receiving MCP resource: rpc error: code = Unavailable desc = transport is closing</span><br><span class="line">2019-11-08T07:26:38.230387ZerrormcpError receiving MCP response: rpc error: code = Unavailable desc = transport is closing</span><br><span class="line">2019-11-08T07:26:38.235755ZinfopickfirstBalancer: HandleSubConnStateChange: 0xc0001fbaa0, READY</span><br><span class="line">2019-11-08T07:26:39.230701Zinfomcp(re)trying to establish new MCP sink stream</span><br></pre></td></tr></table></figure></li><li><p>istio-galley日志</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl logs istio-galley-64f7d8cc97-8nbpc  -n istio-system</span></span><br><span class="line">2019-11-08T07:23:38.860184ZinfomcpMCP: connection &#123;addr=172.30.104.7:57190 id=3&#125; ACK collection=istio/rbac/v1alpha1/serviceroles with version=<span class="string">"0"</span> nonce=<span class="string">"16"</span> inc=<span class="literal">false</span></span><br><span class="line">2019-11-08T07:23:38.860197ZinfomcpWatch(): created watch 28 <span class="keyword">for</span> istio/rbac/v1alpha1/serviceroles from group <span class="string">"default"</span>, version <span class="string">"0"</span></span><br><span class="line">2019-11-08T07:23:38.860217ZinfomcpMCP: connection &#123;addr=172.30.104.7:57190 id=3&#125; ACK collection=istio/networking/v1alpha3/gateways with version=<span class="string">"0"</span> nonce=<span class="string">"17"</span> inc=<span class="literal">false</span></span><br><span class="line">2019-11-08T07:23:38.860268ZinfomcpWatch(): created watch 29 <span class="keyword">for</span> istio/networking/v1alpha3/gateways from group <span class="string">"default"</span>, version <span class="string">"0"</span></span><br><span class="line">2019-11-08T07:26:38.227268Zinfotransport: Got too many pings from the client, closing the connection.</span><br><span class="line">2019-11-08T07:26:38.227414Zinfotransport: loopyWriter.run returning. Err: transport: Connection closing</span><br><span class="line">2019-11-08T07:26:38.228857Zinfotransport: http2Server.HandleStreams failed to <span class="built_in">read</span> frame: <span class="built_in">read</span> tcp 172.30.104.4:9901-&gt;172.30.104.7:57190: use of closed network connection</span><br><span class="line">2019-11-08T07:26:38.229130ZerrormcpMCP: connection &#123;addr=172.30.104.7:57190 id=3&#125;: TERMINATED with errors: rpc error: code = Canceled desc = context canceled</span><br><span class="line">2019-11-08T07:26:38.229162ZinfomcpMCP: connection &#123;addr=172.30.104.7:57190 id=3&#125;: CLOSED</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前面其实有一个错误，忘记记录了，是一个tls的证书问题。根据上面的错误在google上找了好久，各种文档都查看了好久。就是安装的时候去验证tls证书，还有什么webhook问题。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;解决办法是；需要在apiserver里面需要配置 enable-admission-plugins，由于在安装的时候指定了某一个插件，导致这个未启用，如果没有配置该插件，默认其实是启用的。两个插件分别是：ValidatingAdmissionWebhook、MutatingAdmissionWebhook。安装文档里面已经修改，可以<a href="https://www.xxlaila.cn/2019/09/11/kubernetes-v1-14%E5%AE%89%E8%A3%85/">参考配置</a>，修改以后需要重启kube-apiserver。修改了这里还是不行。还需要重新安装istio。</p><ul><li><p>验证api-resources</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl api-resources | grep admissionregistration</span></span><br><span class="line">mutatingwebhookconfigurations                  admissionregistration.k8s.io   <span class="literal">false</span>        MutatingWebhookConfiguration</span><br><span class="line">validatingwebhookconfigurations                admissionregistration.k8s.io   <span class="literal">false</span>        ValidatingWebhookConfiguration</span><br></pre></td></tr></table></figure></li><li><p>启用 admissionregistration.k8s.io/v1alpha1 API</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl api-versions | grep admissionregistration.k8s.io</span></span><br><span class="line">admissionregistration.k8s.io/v1beta1</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;使用上面命令可以检查当前是否以启用，admissionregistration.k8s.io/v1alpha1 API，若不存在则需要在 apiserver 的配置中添加–runtime-config=admissionregistration.k8s.io/v1alpha1。</p><h3 id="重新安装istio"><a href="#重新安装istio" class="headerlink" title="重新安装istio"></a>重新安装istio</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">helm install install/kubernetes/helm/istio --<span class="built_in">wait</span> \</span><br><span class="line">    --name istio \</span><br><span class="line">    --namespace istio-system \</span><br><span class="line">    --<span class="built_in">set</span> global.mtls.enabled=<span class="literal">false</span> \</span><br><span class="line">    --<span class="built_in">set</span> kiali.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> tracing.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> tracing.jaeger.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> tracing.provider=zipkin \</span><br><span class="line">    --<span class="built_in">set</span> grafana.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> servicegraph.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> global.k8sIngress.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> global.k8sIngress.gatewayName=ingressgateway \</span><br><span class="line">    --<span class="built_in">set</span> <span class="string">"kiali.dashboard.jaegerURL=http://jaeger-query:16686"</span> \</span><br><span class="line">    --<span class="built_in">set</span> <span class="string">"kiali.dashboard.grafanaURL=http://grafana:3000"</span> \</span><br><span class="line">    --<span class="built_in">set</span> gateways.istio-ingressgateway.type=NodePort \</span><br><span class="line">    --<span class="built_in">set</span> gateways.istio-egressgateway.type=NodePort \</span><br><span class="line">    --<span class="built_in">set</span> ingress.service.type=NodePort \</span><br><span class="line">    --<span class="built_in">set</span> global.configValidation=<span class="literal">false</span> \</span><br><span class="line">    --<span class="built_in">set</span> ingress.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> gateways.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> mixer.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> prometheus.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> sidecarInjectorWebhook.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> pilot.env.PILOT_DISABLE_XDS_MARSHALING_TO_ANY=<span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li>参数介绍<ul><li>global.mtls.enabled: 开启Mtls认证</li><li>kiali.enabled: 安装kiali</li><li>tracing.enabled: 启用tracing</li><li>grafana.enabled: 安装granfana</li><li>servicegraph.enabled: 启用servicegraph</li><li>global.k8sIngress.enabled: 启用k8sIngress</li><li>global.configValidation: 禁用参数校验</li><li>ingress.enabled: 否启用Ingress</li><li>gateways.enabled: 启用gateway</li><li>mixer.enabled: 启用mixer</li><li>prometheus.enabled: 启用prometheus</li><li>sidecarInjectorWebhook.enabled: 启用sidecarinjector<br><a href="https://www.cnblogs.com/CCE-SWR/p/9990291.html" target="_blank" rel="noopener">更多参数</a>介绍参考</li></ul></li></ul><h4 id="配置验证webhook"><a href="#配置验证webhook" class="headerlink" title="配置验证webhook"></a>配置验证webhook</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;完成以后我们需要配置和验证webhook</p><ul><li>admissionregistration.k8s.io/v1beta1 应是启用状态<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl api-versions | grep admissionregistration.k8s.io/v1beta1</span></span><br><span class="line">admissionregistration.k8s.io/v1beta1</span><br></pre></td></tr></table></figure></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;在前面的一篇文章中我做了简单的部署，但是在疏忽bookinfo的时候出现了错误；然后研究了和学习了三天怎么来结局这个错误，这个错误不解决，没办法进行下一步。后学的路由规则完全没办法学习和测试。
    
    </summary>
    
      <category term="istio" scheme="https://www.xxlaila.cn/categories/istio/"/>
    
    
      <category term="istio" scheme="https://www.xxlaila.cn/tags/istio/"/>
    
  </entry>
  
  <entry>
    <title>mysql8.0 错误</title>
    <link href="https://www.xxlaila.cn/2019/11/07/mysql8.0%E9%94%99%E8%AF%AF/"/>
    <id>https://www.xxlaila.cn/2019/11/07/mysql8.0错误/</id>
    <published>2019-11-07T01:36:43.000Z</published>
    <updated>2019-11-15T06:24:23.442Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h4 id="mysql-8-0-倒入数据报错"><a href="#mysql-8-0-倒入数据报错" class="headerlink" title="mysql 8.0 倒入数据报错"></a>mysql 8.0 倒入数据报错</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;今天数据库从5.6切换到8.0测试的时候，倒入数据到8.0版本报错，错误提示：2006 mysql server has gone away。<a id="more"></a><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;经过查询得知，导入SQL数据库结构+数据时，如果sql操作时间过长；或者是传送的数据太大（咧如使用insert…values的语句过长）；就会报这个错误。登录服务器查看了数据库连接超时的时间默认是8小时，问题应该不是出现在这里。登录老版本数据查看该数据库表的数据，发现该表存放是json的数据格式数据，而且很大，很长。根据这点消息，可以简单的知道问题</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这种情况可以通过修改max_allowed_packed的配置参数来避免，修改my.cnf加大max_allowed_packet的值即可。</p><ul><li>解决办法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;找到mysql目录下的my.ini配置文件，加入以下配置或者修改以下配置<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max_allowed_packet=300M</span><br></pre></td></tr></table></figure></li></ul><h4 id="参数详解"><a href="#参数详解" class="headerlink" title="参数详解"></a>参数详解</h4><ul><li><strong>max_allowed_packet</strong>: mysql根据配置文件会限制server接受的数据包大小。如果一次插入数据库中的数据太大的话就会失败，<a href="https://dev.mysql.com/doc/refman/8.0/en/packet-too-large.html" target="_blank" rel="noopener">官方介绍</a>，<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里我刚开始修改的是200M，还是出现这个错误，然后我看了一下sql文件大小是在260多M，索性我就把这个参数调整为300M，在执行倒入数据ok。这个参数调大不会影响服务器的性能，可以参考官方说明。</li></ul><h4 id="mysql-1067-Invalid-default-value-for"><a href="#mysql-1067-Invalid-default-value-for" class="headerlink" title="mysql 1067 - Invalid default value for"></a>mysql 1067 - Invalid default value for</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql 8.0 在倒入数据的时候提示: 1067 - Invalid default value for ‘xxx_date’。查询结果得知跨版本升级引起的默认值不兼容问题，登录老服务器查看该字段是一个时间字段，是一个datetime类型，而且默认是0，然后看了一下导出的数据数据格式居然是0000-00-00，该类型可能是默认值被限制了，查看 sql_mode。</p><h5 id="查看-sql-mode"><a href="#查看-sql-mode" class="headerlink" title="查看 sql_mode"></a>查看 sql_mode</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="string">'sql_mode'</span>;</span><br><span class="line">+---------------+-----------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Variable_name | Value                                                                                                                 |</span><br><span class="line">+---------------+-----------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| sql_mode      | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION |</span><br><span class="line">+---------------+-----------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.02 sec)</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NO_ZERO_IN_DATE,NO_ZERO_DATE这两个参数限制时间不能为0</p><h5 id="临时修改"><a href="#临时修改" class="headerlink" title="临时修改"></a>临时修改</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="built_in">set</span> session sql_mode=<span class="string">'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION'</span>;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>这个我操作了，没成功，我用的永久修改成功导入的。不知道为啥，可能是姿势不对</p><h5 id="永久修改"><a href="#永久修改" class="headerlink" title="永久修改"></a>永久修改</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;可以直接修改my.cnf文件，在[mysqld]下面添加如下列：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql_mode=ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h4 id=&quot;mysql-8-0-倒入数据报错&quot;&gt;&lt;a href=&quot;#mysql-8-0-倒入数据报错&quot; class=&quot;headerlink&quot; title=&quot;mysql 8.0 倒入数据报错&quot;&gt;&lt;/a&gt;mysql 8.0 倒入数据报错&lt;/h4&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;今天数据库从5.6切换到8.0测试的时候，倒入数据到8.0版本报错，错误提示：2006 mysql server has gone away。
    
    </summary>
    
      <category term="数据库" scheme="https://www.xxlaila.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="mysql" scheme="https://www.xxlaila.cn/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>istio部署</title>
    <link href="https://www.xxlaila.cn/2019/10/29/istio%E9%83%A8%E7%BD%B2/"/>
    <id>https://www.xxlaila.cn/2019/10/29/istio部署/</id>
    <published>2019-10-29T08:21:08.000Z</published>
    <updated>2019-11-06T07:30:39.462Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="Istio介绍"><a href="#Istio介绍" class="headerlink" title="Istio介绍"></a>Istio介绍</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;istio代表的是Service Mesh的方案实现，Istio 有助于降低这些部署的复杂性，并减轻开发团队的压力。提供一种简单的方式来为已部署的服务建立网络，且提供具有负载均衡、服务间认证、监控、流量管理等功能。</p><a id="more"></a><h3 id="服务网格（Service-Mesh）"><a href="#服务网格（Service-Mesh）" class="headerlink" title="服务网格（Service Mesh）"></a>服务网格（Service Mesh）</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;服务网格（Service Mesh）用于描述构成这些应用程序的微服务网络以及应用之间的交互。随着规模和复杂性的增长，服务网格越来越难以理解和管理。它的需求包括服务发现、负载均衡、故障恢复、指标收集和监控以及通常更加复杂的运维需求，例如 A/B 测试、金丝雀发布、限流、访问控制和端到端认证等。而istio刚好提供了一套完整的解决方案，通过控制整个服务器网格提供行为洞察和操作控制来满足微服务应用的多样化</p><h3 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Istio 服务网格逻辑上分为数据平面和控制平面。</p><ul><li>数据平面由一组以 sidecar 方式部署的智能代理（Envoy）组成。这些代理可以调节和控制微服务及 Mixer 之间所有的网络通信。</li><li>控制平面负责管理和配置代理来路由流量。此外控制平面配置 Mixer 以实施策略和收集遥测数据。</li></ul><p>构成每个面板的不同组件:<br><img src="https://img.xxlaila.cn/1567136153850.jpg" alt="img"></p><h4 id="istio-组件"><a href="#istio-组件" class="headerlink" title="istio 组件"></a>istio 组件</h4><ul><li>Envoy: Istio 使用 Envoy 代理的扩展版本，用于调解服务网格中所有服务的所有入站和出站流量，属于数据层面。Istio利用Envoy的内置功能实现如下指标:<ul><li>动态服务发现</li><li>负载均衡</li><li>TLS终止</li><li>HTTP/2和gRPC代理</li><li>断路器</li><li>健康检查</li><li>分阶段推出，按百分比分配流量</li><li>故障注入</li><li>丰富的指标</li></ul></li><li>Mixer: 是一个独立于平台的组件，负责在服务网格上执行访问控制和使用策略，并从 Envoy 代理和其他服务收集遥测数据</li><li>Pilot: 为 Envoy sidecar 提供服务发现功能，为智能路由（例如 A/B 测试、金丝雀部署等）和弹性（超时、重试、熔断器等）提供流量管理功能</li><li>Citadel: 通过内置身份和凭证管理赋能强大的服务间和最终用户身份验证。可用于升级服务网格中未加密的流量，并为运维人员提供基于服务标识而不是网络控制的强制执行策略的能力</li><li>Galley: 代表其他的 Istio 控制平面组件，用来验证用户编写的 Istio API 配置。随着时间的推移，Galley 将接管 Istio 获取配置、 处理和分配组件的顶级责任</li></ul><h3 id="Istion-安装"><a href="#Istion-安装" class="headerlink" title="Istion 安装"></a>Istion 安装</h3><h4 id="下载istio包"><a href="#下载istio包" class="headerlink" title="下载istio包"></a>下载istio包</h4><p>执行下载和自动解压缩</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -L https://git.io/getLatestIstio | ISTIO_VERSION=1.2.8 sh -</span></span><br><span class="line"><span class="comment"># cd istio-1.2.8/bin</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cp istioctl /usr/bin/</span></span><br></pre></td></tr></table></figure><p>安装目录中包含：</p><ul><li><code>在 install/</code>: 目录中包含了 Kubernetes 安装所需的 .yaml 文件</li><li><code>samples/</code>: 目录中是示例应用</li><li><code>istioctl</code>: istioctl客户端二进制文件。手动将Envoy作为Sidecar代理注入并创建路由规则和策略时，将使用此工具。</li><li><code>istio.VERSION</code>: 配置文件</li></ul><h3 id="在kubernetes-集群中安装"><a href="#在kubernetes-集群中安装" class="headerlink" title="在kubernetes 集群中安装"></a>在kubernetes 集群中安装</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Istio 会被安装到自己的 istio-system 命名空间，并且能够对所有其他命名空间的服务进行管理。这里采用helm进行安装，<a href="https://xxlaila.github.io/2019/09/04/k8s-helm/" target="_blank" rel="noopener">helm安装参考</a>，我们需要为Kiali设置身份验证凭据（监视）。用于后面的登录认证</p><h4 id="设置用户名和密码的环境变量"><a href="#设置用户名和密码的环境变量" class="headerlink" title="设置用户名和密码的环境变量"></a>设置用户名和密码的环境变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># KIALI_USERNAME=$(read -p 'Kiali Username: ' uval &amp;&amp; echo -n $uval | base64)</span></span><br><span class="line"><span class="comment"># KIALI_PASSPHRASE=$(read -sp 'Kiali Passphrase: ' pval &amp;&amp; echo -n $pval | base64)</span></span><br></pre></td></tr></table></figure><h4 id="创建命名空间"><a href="#创建命名空间" class="headerlink" title="创建命名空间"></a>创建命名空间</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NAMESPACE=istio-system</span></span><br><span class="line"><span class="comment"># kubectl create namespace $NAMESPACE</span></span><br></pre></td></tr></table></figure><ul><li>创建用于存储上面设置的用户名/密码的机密<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF | kubectl apply -f -</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Secret</span><br><span class="line">metadata:</span><br><span class="line">  name: kiali</span><br><span class="line">  namespace: <span class="variable">$NAMESPACE</span></span><br><span class="line">  labels:</span><br><span class="line">    app: kiali</span><br><span class="line"><span class="built_in">type</span>: Opaque</span><br><span class="line">data:</span><br><span class="line">  username: <span class="variable">$KIALI_USERNAME</span></span><br><span class="line">  passphrase: <span class="variable">$KIALI_PASSPHRASE</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li></ul><h4 id="使用helm安装istio-CRD"><a href="#使用helm安装istio-CRD" class="headerlink" title="使用helm安装istio CRD"></a>使用helm安装istio CRD</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># helm install install/kubernetes/helm/istio-init --name istio-init --namespace istio-system</span></span><br><span class="line">NAME:   istio-init</span><br><span class="line">LAST DEPLOYED: Fri Nov  1 10:13:22 2019</span><br><span class="line">NAMESPACE: istio-system</span><br><span class="line">STATUS: DEPLOYED</span><br><span class="line"></span><br><span class="line">RESOURCES:</span><br><span class="line">==&gt; v1/ClusterRole</span><br><span class="line">NAME                     AGE</span><br><span class="line">istio-init-istio-system  0s</span><br><span class="line"></span><br><span class="line">==&gt; v1/ClusterRoleBinding</span><br><span class="line">NAME                                        AGE</span><br><span class="line">istio-init-admin-role-binding-istio-system  0s</span><br><span class="line"></span><br><span class="line">==&gt; v1/ConfigMap</span><br><span class="line">NAME          DATA  AGE</span><br><span class="line">istio-crd-10  1     0s</span><br><span class="line">istio-crd-11  1     0s</span><br><span class="line">istio-crd-12  1     0s</span><br><span class="line"></span><br><span class="line">==&gt; v1/Job</span><br><span class="line">NAME                     COMPLETIONS  DURATION  AGE</span><br><span class="line">istio-init-crd-10-1.2.8  0/1          0s</span><br><span class="line">istio-init-crd-11-1.2.8  0/1          0s</span><br><span class="line">istio-init-crd-12-1.2.8  0/1          0s</span><br><span class="line"></span><br><span class="line">==&gt; v1/ServiceAccount</span><br><span class="line">NAME                        SECRETS  AGE</span><br><span class="line">istio-init-service-account  0        0s</span><br></pre></td></tr></table></figure><h5 id="查看安装的CRD和pod"><a href="#查看安装的CRD和pod" class="headerlink" title="查看安装的CRD和pod"></a>查看安装的CRD和pod</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上述安装会把istio的23个crd都提交给kubernetes api 服务器。如果启用了证书管理，crd计数器为28个。我这里未启用证书管理，只有23个。还生成三个pod</p><ul><li><p>CRD</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl get CustomResourceDefinition</span></span><br><span class="line">NAME                                   CREATED AT</span><br><span class="line">adapters.config.istio.io               2019-10-29T08:41:31Z</span><br><span class="line">attributemanifests.config.istio.io     2019-10-29T08:41:30Z</span><br><span class="line">authorizationpolicies.rbac.istio.io    2019-10-29T08:41:36Z</span><br><span class="line">certificates.certmanager.k8s.io        2019-10-29T08:41:38Z</span><br><span class="line">challenges.certmanager.k8s.io          2019-10-29T08:41:40Z</span><br><span class="line">clusterissuers.certmanager.k8s.io      2019-10-29T08:41:37Z</span><br><span class="line">clusterrbacconfigs.rbac.istio.io       2019-10-29T08:41:26Z</span><br><span class="line">destinationrules.networking.istio.io   2019-10-29T08:41:25Z</span><br><span class="line">envoyfilters.networking.istio.io       2019-10-29T08:41:26Z</span><br><span class="line">gateways.networking.istio.io           2019-10-29T08:41:26Z</span><br><span class="line">handlers.config.istio.io               2019-10-29T08:41:33Z</span><br><span class="line">httpapispecbindings.config.istio.io    2019-10-29T08:41:27Z</span><br><span class="line">httpapispecs.config.istio.io           2019-10-29T08:41:28Z</span><br><span class="line">instances.config.istio.io              2019-10-29T08:41:32Z</span><br><span class="line">issuers.certmanager.k8s.io             2019-10-29T08:41:37Z</span><br><span class="line">meshpolicies.authentication.istio.io   2019-10-29T08:41:27Z</span><br><span class="line">orders.certmanager.k8s.io              2019-10-29T08:41:40Z</span><br><span class="line">policies.authentication.istio.io       2019-10-29T08:41:27Z</span><br><span class="line">quotaspecbindings.config.istio.io      2019-10-29T08:41:28Z</span><br><span class="line">quotaspecs.config.istio.io             2019-10-29T08:41:29Z</span><br><span class="line">rbacconfigs.rbac.istio.io              2019-10-29T08:41:31Z</span><br><span class="line">rules.config.istio.io                  2019-10-29T08:41:30Z</span><br><span class="line">serviceentries.networking.istio.io     2019-10-29T08:41:25Z</span><br><span class="line">servicerolebindings.rbac.istio.io      2019-10-29T08:41:31Z</span><br><span class="line">serviceroles.rbac.istio.io             2019-10-29T08:41:31Z</span><br><span class="line">sidecars.networking.istio.io           2019-10-29T08:41:34Z</span><br><span class="line">templates.config.istio.io              2019-10-29T08:41:32Z</span><br><span class="line">virtualservices.networking.istio.io    2019-10-29T08:41:25Z</span><br><span class="line"></span><br><span class="line"><span class="comment"># kubectl get crds | grep 'istio.io\|certmanager.k8s.io' | wc -l</span></span><br><span class="line">23</span><br></pre></td></tr></table></figure></li><li><p>pod</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl get pods -n istio-system</span></span><br><span class="line">NAME                                      READY   STATUS      RESTARTS   AGE</span><br><span class="line">NAME                            READY   STATUS      RESTARTS   AGE</span><br><span class="line">istio-init-crd-10-1.2.8-pbtb8   0/1     Completed   0          47s</span><br><span class="line">istio-init-crd-11-1.2.8-shx6q   0/1     Completed   0          47s</span><br><span class="line">istio-init-crd-12-1.2.8-zmh2w   0/1     Completed   0          47s</span><br></pre></td></tr></table></figure></li></ul><h4 id="使用helm安装各个组件"><a href="#使用helm安装各个组件" class="headerlink" title="使用helm安装各个组件"></a>使用helm安装各个组件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">helm install install/kubernetes/helm/istio --<span class="built_in">wait</span> \</span><br><span class="line">    --name istio \</span><br><span class="line">    --namespace istio-system \</span><br><span class="line">    --<span class="built_in">set</span> global.mtls.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> kiali.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> tracing.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> grafana.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> servicegraph.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> global.k8sIngress.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> global.k8sIngress.gatewayName=ingressgateway \</span><br><span class="line">    --<span class="built_in">set</span> grafana.enabled=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> kiali.createDemoSecret=<span class="literal">true</span> \</span><br><span class="line">    --<span class="built_in">set</span> kiali.contextPath=/ \</span><br><span class="line">    --<span class="built_in">set</span> <span class="string">"kiali.dashboard.jaegerURL=http://jaeger-query:16686"</span> \</span><br><span class="line">    --<span class="built_in">set</span> <span class="string">"kiali.dashboard.grafanaURL=http://grafana:3000"</span> \</span><br><span class="line">    --<span class="built_in">set</span> gateways.istio-ingressgateway.type=NodePort \</span><br><span class="line">    --<span class="built_in">set</span> gateways.istio-egressgateway.type=NodePort \</span><br><span class="line">    --<span class="built_in">set</span> sidecarInjectorWebhook.enabled=<span class="literal">true</span></span><br></pre></td></tr></table></figure><h4 id="验证安装"><a href="#验证安装" class="headerlink" title="验证安装"></a>验证安装</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;验证文件里面的服务是否都部署在kubernetes 服务中。确保部署的pod 在对应的kubernetes namespace 里面，并正常启动。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这期间将创建所需的RBAC权限，并部署Istio-Pilot，Istio-Mixer，Istio-Ingress，Istio-Egress和Istio-CA（证书颁发机构）。</p><h5 id="服务器验证"><a href="#服务器验证" class="headerlink" title="服务器验证"></a>服务器验证</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;确保部署了以下Kubernetes服务：istio-pilot，istio-mixer，istio-ingress。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl get svc -n istio-system</span></span><br><span class="line">NAME                     TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                                                                                                                                      AGE</span><br><span class="line">grafana                  ClusterIP   10.254.113.150   &lt;none&gt;        3000/TCP                                                                                                                                     3h22m</span><br><span class="line">istio-citadel            ClusterIP   10.254.27.143    &lt;none&gt;        8060/TCP,15014/TCP                                                                                                                           3h22m</span><br><span class="line">istio-galley             ClusterIP   10.254.155.177   &lt;none&gt;        443/TCP,15014/TCP,9901/TCP                                                                                                                   3h22m</span><br><span class="line">istio-ingressgateway     NodePort    10.254.170.109   &lt;none&gt;        15020:31952/TCP,80:31380/TCP,443:31390/TCP,31400:31400/TCP,15029:32532/TCP,15030:31518/TCP,15031:31525/TCP,15032:30404/TCP,15443:30309/TCP   3h22m</span><br><span class="line">istio-pilot              ClusterIP   10.254.228.182   &lt;none&gt;        15010/TCP,15011/TCP,8080/TCP,15014/TCP                                                                                                       3h22m</span><br><span class="line">istio-policy             ClusterIP   10.254.13.184    &lt;none&gt;        9091/TCP,15004/TCP,15014/TCP                                                                                                                 3h22m</span><br><span class="line">istio-sidecar-injector   ClusterIP   10.254.154.169   &lt;none&gt;        443/TCP                                                                                                                                      3h22m</span><br><span class="line">istio-telemetry          ClusterIP   10.254.71.72     &lt;none&gt;        9091/TCP,15004/TCP,15014/TCP,42422/TCP                                                                                                       3h22m</span><br><span class="line">jaeger-agent             ClusterIP   None             &lt;none&gt;        5775/UDP,6831/UDP,6832/UDP                                                                                                                   3h22m</span><br><span class="line">jaeger-collector         ClusterIP   10.254.100.29    &lt;none&gt;        14267/TCP,14268/TCP                                                                                                                          3h22m</span><br><span class="line">jaeger-query             ClusterIP   10.254.18.117    &lt;none&gt;        16686/TCP                                                                                                                                    3h22m</span><br><span class="line">kiali                    ClusterIP   10.254.156.117   &lt;none&gt;        20001/TCP                                                                                                                                    3h22m</span><br><span class="line">prometheus               ClusterIP   10.254.145.181   &lt;none&gt;        9090/TCP                                                                                                                                     3h22m</span><br><span class="line">tracing                  ClusterIP   10.254.87.72     &lt;none&gt;        80/TCP                                                                                                                                       3h22m</span><br><span class="line">zipkin                   ClusterIP   10.254.39.22     &lt;none&gt;        9411/TCP                                                                                                                                     3h22m</span><br></pre></td></tr></table></figure><h5 id="pod-验证"><a href="#pod-验证" class="headerlink" title="pod 验证"></a>pod 验证</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;确保已部署相应的Kubernetes Pod，并且所有容器都已启动并正在运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl get pods -n istio-system</span></span><br><span class="line">NAME                                      READY   STATUS      RESTARTS   AGE</span><br><span class="line">grafana-6fb9f8c5c7-n2plk                  1/1     Running     0          3h19m</span><br><span class="line">istio-citadel-7c9b84ddb6-n5h2n            1/1     Running     0          3h19m</span><br><span class="line">istio-galley-64f7d8cc97-zdbb6             1/1     Running     0          3h19m</span><br><span class="line">istio-grafana-post-install-1.2.8-98grv    0/1     Completed   0          3h19m</span><br><span class="line">istio-ingressgateway-65c7498b78-dfmfp     1/1     Running     0          3h19m</span><br><span class="line">istio-init-crd-10-1.2.8-wxxjn             0/1     Completed   0          3h20m</span><br><span class="line">istio-init-crd-11-1.2.8-brjhh             0/1     Completed   0          3h20m</span><br><span class="line">istio-init-crd-12-1.2.8-w8wnc             0/1     Completed   0          3h20m</span><br><span class="line">istio-pilot-569499d666-vhgn5              2/2     Running     0          3h19m</span><br><span class="line">istio-policy-5dbbc56db5-dmr4p             2/2     Running     3          3h19m</span><br><span class="line">istio-sidecar-injector-747cf74498-99drh   1/1     Running     0          3h19m</span><br><span class="line">istio-telemetry-7db5dd4c57-zngq7          2/2     Running     4          3h19m</span><br><span class="line">istio-tracing-5d8f57c8ff-vt2kn            1/1     Running     0          3h19m</span><br><span class="line">kiali-7d749f9dcb-68tlt                    1/1     Running     0          3h19m</span><br><span class="line">prometheus-776fdf7479-zbrxl               1/1     Running     0          3h19m</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Istio 以一个项目的形式部署到 Kubernetes 集群中。我们可以看到，部署好的 pods 中，除了有 istio-citadel、、istio-ingressgateway、istio-pilot 等 Istio 本身的功能组件，还集成了微服务相关的监控工具，，如：grafana、jaeger-query、kiali、prometheus。这些功能丰富且强大的监控工具，帮助 Istio实现了微服务的可视化管理。</p><h3 id="部署BookInfo用程序"><a href="#部署BookInfo用程序" class="headerlink" title="部署BookInfo用程序"></a>部署BookInfo用程序</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;现在开始部署 Bookinfo 示例程序。部署Bookinfo条件是集群中至少有4个节点，而且每个节点的内存不得低于4G。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;可以部署安装随附的示例应用程序之一-BookInfo。这是一个简单的模拟书店应用程序，由四个服务组成，这些服务提供一个Web产品页面，书籍详细信息，评论（带有多个版本的评论服务）和评分-所有这些都使用Istio进行管理。</p><ul><li><p>BookInfo应用程序分为四个单独的微服务:</p><ul><li>productpage ：productpage 微服务会调用 details 和 reviews 两个微服务，用来生成页面。</li><li>details ：这个微服务包含了书籍的信息。</li><li>reviews ：这个微服务包含了书籍相关的评论。它还会调用 ratings 微服务。</li><li>ratings ：ratings 微服务中包含了由书籍评价组成的评级信息。</li></ul></li><li><p>reviews 微服务有 3 个版本：</p><ul><li>v1 版本不会调用 ratings 服务.</li><li>v2 版本会调用 ratings 服务，并使用 1 到 5 个黑色星形图标来显示评分信息</li><li>v3 版本会调用 ratings 服务，并使用 1 到 5 个红色星形图标来显示评分信息</li></ul></li><li><p>下图展示了这个应用的端到端架构<br><img src="https://img.xxlaila.cn/1572576628250.jpg" alt="img"></p></li></ul><h4 id="打标签"><a href="#打标签" class="headerlink" title="打标签"></a>打标签</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为 default 命名空间打上标签 istio-injection=enabled，实现 Sidecar 自动注入。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl label namespace default istio-injection=enabled</span></span><br><span class="line">namespace/default labeled</span><br><span class="line"></span><br><span class="line"><span class="comment"># kubectl get namespace --show-labels</span></span><br><span class="line">NAME              STATUS   AGE   LABELS</span><br><span class="line">default           Active   43d   istio-injection=enabled</span><br><span class="line">istio-system      Active   29m   &lt;none&gt;</span><br><span class="line">kube-node-lease   Active   43d   &lt;none&gt;</span><br><span class="line">kube-public       Active   43d   &lt;none&gt;</span><br><span class="line">kube-system       Active   43d   &lt;none&gt;</span><br><span class="line">monitoring        Active   35d   &lt;none&gt;</span><br><span class="line">weave             Active   35d   &lt;none&gt;</span><br></pre></td></tr></table></figure><ul><li><strong>注意:</strong> 此步骤先不执行，如果这这个执行了，在后面部署Bookinfo的时候会提示如下错误<code>Error creating: Internal error occurred: failed calling webhook &quot;sidecar-injector.istio.io&quot;: Post https://istio-sidecar-injector.istio-system.svc:443/inject?timeout=30s: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)</code>这一步有执行的可以执行以下命令进行删除</li></ul><ul><li>删除ns的label<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl get ns --show-labels</span></span><br><span class="line">NAME              STATUS   AGE    LABELS</span><br><span class="line">default           Active   2d4h   istio-injection=enabled</span><br><span class="line">istio-system      Active   174m   &lt;none&gt;</span><br><span class="line">kube-node-lease   Active   2d4h   &lt;none&gt;</span><br><span class="line">kube-public       Active   2d4h   &lt;none&gt;</span><br><span class="line">kube-system       Active   2d4h   &lt;none&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># kubectl label namespace default istio-injection-</span></span><br><span class="line">namespace/default labeled</span><br><span class="line"></span><br><span class="line"><span class="comment"># kubectl get ns --show-labels</span></span><br><span class="line">NAME              STATUS   AGE    LABELS</span><br><span class="line">default           Active   2d4h   &lt;none&gt;</span><br><span class="line">istio-system      Active   175m   &lt;none&gt;</span><br><span class="line">kube-node-lease   Active   2d4h   &lt;none&gt;</span><br><span class="line">kube-public       Active   2d4h   &lt;none&gt;</span><br><span class="line">kube-system       Active   2d4h   &lt;none&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="部署Bookinfo"><a href="#部署Bookinfo" class="headerlink" title="部署Bookinfo"></a>部署Bookinfo</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;直接使用kubectl create其常规的YAML部署文件来部署我们的应用程序。将使用istioctl将Envoy容器注入到应用程序容器中：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl create -f &lt;(istioctl kube-inject -f samples/bookinfo/platform/kube/bookinfo.yaml)</span></span><br><span class="line">service/details created</span><br><span class="line">serviceaccount/bookinfo-details created</span><br><span class="line">deployment.apps/details-v1 created</span><br><span class="line">service/ratings created</span><br><span class="line">serviceaccount/bookinfo-ratings created</span><br><span class="line">deployment.apps/ratings-v1 created</span><br><span class="line">service/reviews created</span><br><span class="line">serviceaccount/bookinfo-reviews created</span><br><span class="line">deployment.apps/reviews-v1 created</span><br><span class="line">deployment.apps/reviews-v2 created</span><br><span class="line">deployment.apps/reviews-v3 created</span><br><span class="line">service/productpage created</span><br><span class="line">serviceaccount/bookinfo-productpage created</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;该命令将启动bookinfo应用程序体系结构图中显示的所有四个服务。已启动评论服务的所有3个版本，即v1，v2和v3。而在实际部署中，随着时间的推移会部署新版本的微服务，而不是同时部署所有版本。</p><h4 id="检查部署"><a href="#检查部署" class="headerlink" title="检查部署"></a>检查部署</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;确认所有服务和Pod均已正确定义并正在运行。</p><ul><li><p>检查 services</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl get services</span></span><br><span class="line">NAME          TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE</span><br><span class="line">details       ClusterIP   10.254.61.113    &lt;none&gt;        9080/TCP   2m27s</span><br><span class="line">kubernetes    ClusterIP   10.254.0.1       &lt;none&gt;        443/TCP    43d</span><br><span class="line">productpage   ClusterIP   10.254.130.5     &lt;none&gt;        9080/TCP   2m23s</span><br><span class="line">ratings       ClusterIP   10.254.186.181   &lt;none&gt;        9080/TCP   2m26s</span><br><span class="line">reviews       ClusterIP   10.254.200.107   &lt;none&gt;        9080/TCP   2m25s</span><br></pre></td></tr></table></figure></li><li><p>检查 pod</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl get pods</span></span><br><span class="line">NAME                              READY   STATUS    RESTARTS   AGE</span><br><span class="line">details-v1-c5b5f496d-lphgd        1/1     Running   0          15h</span><br><span class="line">load-generator-7fbcc7489f-vbpnx   1/1     Running   2          20d</span><br><span class="line">nginx-deploy-d494b9564-vx97s      1/1     Running   1          20d</span><br><span class="line">productpage-v1-c7765c886-97spj    1/1     Running   0          15h</span><br><span class="line">ratings-v1-f745cf57b-mdgxr        1/1     Running   0          15h</span><br><span class="line">reviews-v1-75b979578c-ghqqm       1/1     Running   0          15h</span><br><span class="line">reviews-v2-597bf96c8f-r659w       1/1     Running   0          15h</span><br><span class="line">reviews-v3-54c6c64795-tvsmq       1/1     Running   0          15h</span><br></pre></td></tr></table></figure></li><li><p>确认Bookinfo应用程序正在运行，请通过curl某个pod中的命令向其发送请求</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl exec -it $(kubectl get pod -l app=ratings -o jsonpath='&#123;.items[0].metadata.name&#125;') -c ratings -- curl productpage:9080/productpage | grep -o "&lt;title&gt;.*&lt;/title&gt;"</span></span><br><span class="line">&lt;title&gt;Simple Bookstore App&lt;/title&gt;</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在每个服务旁边都注入了Envoy，架构将如下<br><img src="https://img.xxlaila.cn/1572577460804.jpg" alt="img"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bookinfo服务已启动并正在运行，您需要使该应用程序可以从Kubernetes集群外部访问，例如，从浏览器访问。Istio网关用于此目的。但是我在部署 bookinfo-gateway 的时候出现错误，错误如下；然后看了一下 bookinfo-gateway就是提供一个web访问的程序，既然是提供的一个web访问，我就使用了Traefix来提供这个服务。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">Error</span> <span class="keyword">from</span><span class="built_in"> server </span>(Timeout): <span class="builtin-name">error</span> when creating <span class="string">"samples/bookinfo/networking/bookinfo-gateway.yaml"</span>: Timeout: request did <span class="keyword">not</span> complete within requested timeout 30s</span><br><span class="line"><span class="builtin-name">Error</span> <span class="keyword">from</span><span class="built_in"> server </span>(Timeout): <span class="builtin-name">error</span> when creating <span class="string">"samples/bookinfo/networking/bookinfo-gateway.yaml"</span>: Timeout: request did <span class="keyword">not</span> complete within requested timeout 30s</span><br></pre></td></tr></table></figure><h4 id="创建-bookinfo-gateway"><a href="#创建-bookinfo-gateway" class="headerlink" title="创建 bookinfo-gateway"></a>创建 bookinfo-gateway</h4><ul><li>istio-Ingress.yaml<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat &gt;istio-Ingress.yaml &lt;&lt;EOF</span></span><br><span class="line">---</span><br><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: istio-web-ui</span><br><span class="line">  namespace: </span><br><span class="line">  annotations:</span><br><span class="line">    kubernetes.io/ingress.class: traefik</span><br><span class="line">spec:</span><br><span class="line">  rules:</span><br><span class="line">  - host: istio.xxlaila.cn</span><br><span class="line">    http:</span><br><span class="line">      paths:</span><br><span class="line">      - path: /</span><br><span class="line">        backend:</span><br><span class="line">          serviceName: productpage</span><br><span class="line">          servicePort: 9080</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在浏览器输入<code>http://istio.xxlaila.cn</code> 来访问。用 productpage以查看BookInfo网页。如果您多次刷新页面，您应该会看到产品页面上显示的评论版本不同，并以循环方式显示（红色星星，黑色星星，无星星），因为我们尚未使用Istio来控制版本路由<br><img src="https://img.xxlaila.cn/1572578398765.jpg" alt="img"><br><img src="https://img.xxlaila.cn/1572578189667.jpg" alt="img"></p><p>基本道这里，动态更改请求路由学习中，😂😂😂</p><h3 id="监控方式"><a href="#监控方式" class="headerlink" title="监控方式"></a>监控方式</h3><h4 id="生成服务图"><a href="#生成服务图" class="headerlink" title="生成服务图"></a>生成服务图</h4><p>要验证Kiali是否在您的集群中运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl -n istio-system get svc kiali</span></span><br><span class="line">NAME    TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)     AGE</span><br><span class="line">kiali   ClusterIP   10.254.156.117   &lt;none&gt;        20001/TCP   4h38m</span><br></pre></td></tr></table></figure><p>流量发送到网格，有三种选择:<br>1.在网络浏览器中访问<a href="http://istio.xxlaila.cn/productpage" target="_blank" rel="noopener">http://istio.xxlaila.cn/productpage</a><br>2.多次使用以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl http://istio.xxlaila.cn/productpage</span></span><br></pre></td></tr></table></figure><p>3.使用以下watch命令连续发送请求：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># watch -n 1 curl -o /dev/null -s -w %&#123;http_code&#125; http://istio.xxlaila.cn/productpage</span></span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里需要配置Kiali UI，我们同样适用Traefix来进行配置</p><ul><li>kiali–Ingress.yaml<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat &gt; kiali--Ingress.yaml &lt;&lt;EOF</span></span><br><span class="line">---</span><br><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: kiali-web-ui</span><br><span class="line">  namespace: istio-system </span><br><span class="line">  annotations:</span><br><span class="line">    kubernetes.io/ingress.class: traefik</span><br><span class="line">spec:</span><br><span class="line">  rules:</span><br><span class="line">  - host: istio-kiali.xxlaila.cn</span><br><span class="line">    http:</span><br><span class="line">      paths:</span><br><span class="line">      - path: /</span><br><span class="line">        backend:</span><br><span class="line">          serviceName: kiali</span><br><span class="line">          servicePort: 20001</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在浏览器打开<a href="http://istio-kiali.xxlaila.cn" target="_blank" rel="noopener">http://istio-kiali.xxlaila.cn</a> ， 要登录Kiali UI，请转到Kiali登录屏幕，然后输入存储在Kiali机密中的用户名和密码。账户密码是前面我们设置的</p><h4 id="1-网格概述"><a href="#1-网格概述" class="headerlink" title="1.网格概述"></a>1.网格概述</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;登录后立即显示的“概述”页面中查看网格的概述。“概述”页面显示了网格中具有服务的所有名称空间。以下屏幕截图显示了类似的页面<br><img src="https://img.xxlaila.cn/1572578943386.jpg" alt="img"></p><h4 id="2-空间图"><a href="#2-空间图" class="headerlink" title="2.空间图"></a>2.空间图</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;要查看名称空间图，请在bookinfoBookinfo名称空间卡中单击图图标。图形图标位于名称空间卡的左下方，看起来像是一组相连的圈子。该页面类似于<br><img src="https://img.xxlaila.cn/1572579048298.jpg" alt="img"></p><h3 id="分布式跟踪系统"><a href="#分布式跟踪系统" class="headerlink" title="分布式跟踪系统"></a>分布式跟踪系统</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;启用Istio的应用程序可以配置为使用流行的Jaeger分布式跟踪系统来收集跟踪范围。分布式跟踪使您可以查看用户在系统中发出的请求流，而Istio的模型则允许这样做，而与构建应用程序所使用的语言/框架/平台无关。使用Traefix来提供这个服务。</p><ul><li><p>Jaeger-Ingress.yaml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat &gt; Jaeger-Ingress.yaml  &lt;&lt;EOF</span></span><br><span class="line">---</span><br><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: jaeger-web-ui</span><br><span class="line">  namespace: istio-system </span><br><span class="line">  annotations:</span><br><span class="line">    kubernetes.io/ingress.class: traefik</span><br><span class="line">spec:</span><br><span class="line">  rules:</span><br><span class="line">  - host: jaeger.xxlaila.cn</span><br><span class="line">    http:</span><br><span class="line">      paths:</span><br><span class="line">      - path: /</span><br><span class="line">        backend:</span><br><span class="line">          serviceName: jaeger-query</span><br><span class="line">          servicePort: 16686</span><br></pre></td></tr></table></figure></li><li><p>执行创建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl apply -f Jaeger-Ingress.yaml </span></span><br><span class="line">ingress.extensions/jaeger-web-ui unchanged</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在浏览器打开<a href="http://jaeger.xxlaila.cn" target="_blank" rel="noopener">http://jaeger.xxlaila.cn</a> ， 使用Bookinfo示例生成跟踪，要查看跟踪数据，必须将请求发送到服务。请求数量取决于Istio的采样率。您在安装Istio时设置此速率。默认采样率为1％。您需要至少发送100个请求，才能显示第一条跟踪。要将100个请求发送到productpage服务，请使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># for i in `seq 1 100`; do curl -s -o /dev/null http://istio.xxlaila.cn/productpage; done</span></span><br></pre></td></tr></table></figure><ul><li><p>在仪表板的左侧窗格中，从“服务”下拉列表中选择productpage.default，然后单击“查找跟踪”<br><img src="https://img.xxlaila.cn/1572592255728.jpg" alt="img"></p></li><li><p>单击顶部的最新跟踪以查看与对/ productpage的最新请求相对应的详细信息<br><img src="https://img.xxlaila.cn/1572592385675.jpg" alt="img"></p></li></ul><h3 id="监视Istio"><a href="#监视Istio" class="headerlink" title="监视Istio"></a>监视Istio</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如何设置和使用Istio仪表板监视网格流量。作为监控的一部分，需要将安装Grafana Istio插件，并使用基于Web的界面查看服务网格流量数据。Grafana将用于可视化普罗米修斯数据。在执行部署的时候也部署了这两个服务。</p><h4 id="创建grafana-Ingress"><a href="#创建grafana-Ingress" class="headerlink" title="创建grafana Ingress"></a>创建grafana Ingress</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat &gt;grafana-istio-Ingress.yaml &lt;&lt;EOF</span></span><br><span class="line">---</span><br><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: grafana-istio-web-ui</span><br><span class="line">  namespace: istio-system</span><br><span class="line">  annotations:</span><br><span class="line">    kubernetes.io/ingress.class: traefik</span><br><span class="line">spec:</span><br><span class="line">  rules:</span><br><span class="line">  - host: grafana-istio.xxlaila.cn</span><br><span class="line">    http:</span><br><span class="line">      paths:</span><br><span class="line">      - path: /</span><br><span class="line">        backend:</span><br><span class="line">          serviceName: grafana</span><br><span class="line">          servicePort: 3000</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><ul><li>执行创建，这里我们可以在以前的grafana里面添加数据库源，就不用在新起一个域名来进行访问<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;再次加载Bookinfo应用程序（<a href="http://istio.xxlaila.cn/productpage）" target="_blank" rel="noopener">http://istio.xxlaila.cn/productpage）</a> ， 刷新页面几次（或发送命令几次）以产生少量流量。再次查看Istio仪表板。它应该反映所产生的流量。<br><img src="https://img.xxlaila.cn/1572593852626.jpg" alt="img"></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;istio 还提供了网格的全局视图以及网格中的服务和工作负载。您可以通过导航到特定的仪表板来获取有关服务和工作负载的更多详细信息。<br><img src="https://img.xxlaila.cn/1572594150893.jpg" alt="img"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;提供了有关服务指标的详细信息，然后是该服务的客户端工作负载（正在调用此服务的工作负载）和服务工作负载（正在提供该服务的工作负载）。<br><img src="https://img.xxlaila.cn/1572594261333.jpg" alt="img"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Istio 在grafana 提供了很多的监控指标，可以分别点击看看<br><img src="https://img.xxlaila.cn/1572594330246.jpg" alt="img"></p><h3 id="查询Istio指标"><a href="#查询Istio指标" class="headerlink" title="查询Istio指标"></a>查询Istio指标</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Istio的数据是存储在prometheus里面的，这里我们通过prometheus进行直接数据的查询</p><h4 id="查看prometheus服务"><a href="#查看prometheus服务" class="headerlink" title="查看prometheus服务"></a>查看prometheus服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl -n istio-system get svc prometheus</span></span><br><span class="line">NAME         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE</span><br><span class="line">prometheus   ClusterIP   10.254.145.181   &lt;none&gt;        9090/TCP   5h35m</span><br></pre></td></tr></table></figure><h4 id="prometheus-traefix"><a href="#prometheus-traefix" class="headerlink" title="prometheus traefix"></a>prometheus traefix</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过traefix 来代理prometheus，然后我们将流量发送到网格。</p><ul><li><p>prometheus-istio.yaml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat &gt; prometheus-istio-Ingress.yaml &lt;&lt;EOF</span></span><br><span class="line">---</span><br><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: prometheus-istio-web-ui</span><br><span class="line">  namespace: istio-system</span><br><span class="line">  annotations:</span><br><span class="line">    kubernetes.io/ingress.class: traefik</span><br><span class="line">spec:</span><br><span class="line">  rules:</span><br><span class="line">  - host: prometheus-istio.xxlaila.cn</span><br><span class="line">    http:</span><br><span class="line">      paths:</span><br><span class="line">      - path: /</span><br><span class="line">        backend:</span><br><span class="line">          serviceName: prometheus</span><br><span class="line">          servicePort: 9090</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li><li><p>执行创建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl apply -f prometheus-istio-Ingress.yaml </span></span><br><span class="line">ingress.extensions/prometheus-istio-web-ui created</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在浏览器打开<a href="http://prometheus-istio.xxlaila.cn" target="_blank" rel="noopener">http://prometheus-istio.xxlaila.cn</a> ，可以在输入框里面输入表达式来获取指，输入文本：istio_requests_total<br><img src="https://img.xxlaila.cn/1572594888435.jpg" alt="img"></p><ul><li><p>其他查询尝试：</p><ul><li><p>对productpage服务的所有请求总数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istio_requests_total&#123;destination_service=<span class="string">"productpage.default.svc.cluster.local"</span>&#125;</span><br></pre></td></tr></table></figure></li><li><p>对v3版本的评论服务的所有请求总数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istio_requests_total&#123;destination_service=<span class="string">"reviews.default.svc.cluster.local"</span>, destination_version=<span class="string">"v3"</span>&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>该查询将所有请求的当前总数返回到评论服务的v3。</p><ul><li>过去5分钟内对productpage服务所有实例的请求率：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rate(istio_requests_total&#123;destination_service=~<span class="string">"productpage.*"</span>, response_code=<span class="string">"200"</span>&#125;[5m])</span><br></pre></td></tr></table></figure></li></ul></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;Istio介绍&quot;&gt;&lt;a href=&quot;#Istio介绍&quot; class=&quot;headerlink&quot; title=&quot;Istio介绍&quot;&gt;&lt;/a&gt;Istio介绍&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;istio代表的是Service Mesh的方案实现，Istio 有助于降低这些部署的复杂性，并减轻开发团队的压力。提供一种简单的方式来为已部署的服务建立网络，且提供具有负载均衡、服务间认证、监控、流量管理等功能。&lt;/p&gt;
    
    </summary>
    
      <category term="kubernetes" scheme="https://www.xxlaila.cn/categories/kubernetes/"/>
    
    
      <category term="istio" scheme="https://www.xxlaila.cn/tags/istio/"/>
    
  </entry>
  
  <entry>
    <title>pipeline核心高级篇</title>
    <link href="https://www.xxlaila.cn/2019/10/26/pipeline%E9%AB%98%E7%BA%A7%E7%AF%87/"/>
    <id>https://www.xxlaila.cn/2019/10/26/pipeline高级篇/</id>
    <published>2019-10-26T01:59:01.000Z</published>
    <updated>2019-10-28T02:40:59.762Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前面的两篇文章介绍了pipeline的基本使用和一些实际使用的例子，看似很不错，但是在实际应用也会出现很多的不足和问题，随之系统的庞大、服务的增加、人员的参差不齐会导致很多的问题。<a id="more"></a>届时会带来很大的维护成本和一些改动，所以我们在做事情之前就要考虑进去，一些意外事件的发生、或者是在将来即将会发生和需要改变的事情我们都要想到或者是预留口子，这样才在今后扩展、修改、引入都能有很好可塑性。</p><h3 id="jenkins-job介绍"><a href="#jenkins-job介绍" class="headerlink" title="jenkins job介绍"></a>jenkins job介绍</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;大多数情况下我们都是使用jenkins的普通job，普通的job好处是配置简单，结构化可以复杂，也可以单一。在使用jenkins job的时候我们分为两种：一种是单一job，一种是具有耦合性的。下面对两种情况进行对比和比较。</p><h4 id="jenkins-单一job"><a href="#jenkins-单一job" class="headerlink" title="jenkins 单一job"></a>jenkins 单一job</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在jenkins的传统模式下，单一的的job可以让维护人员可以很好的查看里面的逻辑步骤，job里面所有的任务都在这个所属的空间里面执行，它里面包含了：代码pull、编译、打包、复制包、发布包（使用内置的shell模块来写shell，这种应该不存在）。种单一job服务算得上是服务周到，不影响其他人，自己管理好自己的一亩三分地。好处是当出错以后影响范围小，容易控制。如下图：<br><img src="https://img.xxlaila.cn/1572064519037.jpg" alt="img"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在这中模式下，维护人员前期用看似比较轻松的工作建立起了整个发布流程。但是到了后期就不行了。之前我在的这家公司前期也是这么这么做的。开发完成后提交git，然后自动触发、构建、制品库、发布，在一个job里面就完成了。后来我们准备推行更好的devops方案的时候；发现以前的这个job建立有问题，一想到几百个微服务，几百个job需要去进行改造。顿时我们运维脸线一黑，虽然我们自己写了一个快速在jenkins上建立job，但是一想到几百个还是不好。为了解决这个问题，我们使用了job之间的任务关联，然后通过参数传递完成整个流程服务。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这种模式下的弊端就如上面所说的一样，但什么时候好的服务呢？好的服务又是什么样子的呢？这里也可以嵌套一些微服务的概念理论。如果我们要做到什么时候好的服务，我们得了解了解一下: 低耦合和高内聚。了解这个东西有助于我们在接下来的pipeline 流水线的设计，包括在后期devops的设计以及撸码都有很大的帮助。</p><h3 id="耦合性"><a href="#耦合性" class="headerlink" title="耦合性"></a>耦合性</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首先我们来了解这一概念: “高内聚低耦合”。在软件设计中通常用耦合度和内聚度作为衡量模块独立程度的标准。划分模块的一个准则是高内聚低耦合。从模块粒度来看，高内聚：尽可能类的每个成员方法只完成一件事（最大限度的聚合）；低耦合：减少类内部，一个成员方法调用另一个成员方法。从类角度来看，高内聚低耦合：减少类内部，对其他类的调用；从功能块来看，高内聚低耦合：减少模块之间的交互复杂度（接口数量，参数数据）即横向：类与类之间、模块与模块之间；纵向：层次之间；尽可能，内容内聚，数据耦合。</p><h4 id="低耦合"><a href="#低耦合" class="headerlink" title="低耦合"></a>低耦合</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;不同模块相互依赖多少？模块应尽可能独立于其他模块，以使对模块的更改不会严重影响其他模块。</p><h4 id="高耦合"><a href="#高耦合" class="headerlink" title="高耦合"></a>高耦合</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;高耦合将意味着您的模块对其他模块的内部运作了解太多。对其他模块了解太多的模块会使更改难以协调，并使模块能力变弱。如果模块A对模块B的了解过多，则对模块B内部的更改可能会破坏模块A的功能。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过实现低耦合，可以轻松更改模块内部，不必担心它们对系统中其他模块的影响。低耦合还使我们的模块彼此之间不相互依赖，因此更易于设计，编写和测试代码。我们还获得了易于重用和可组合的模块的优势。问题也被隔离到小的，独立的代码单元中。</p><p><strong>好处:</strong></p><ul><li>可维护性: 更改限制在一个模块中</li><li>可测试性: 单元测试中涉及的模块可以限制在最低限度</li><li>可读性: 需要分析的类减少</li></ul><h4 id="高内聚"><a href="#高内聚" class="headerlink" title="高内聚"></a>高内聚</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;内聚性通常是指模块的元素如何相互组合。相关代码应彼此接近，以使其具有高度的凝聚力。易于维护的代码通常具有很高的内聚性。模块中的元素与该模块要提供的功能直接相关。如果需要修改一个功能，最好是在一个地方进行修改，然后可以尽快的发布。如果很多不同的地方要进行修改，就有可能需要发布多个微服务才能交互这个功能。在很多地方进行修改，不仅修改速度很慢，同时部署多个微服务也提高了风险。所以在找到问题域的边界域后可以确保相关的行为能放在同一个地方，并且它们会和其它边界以尽量低耦合的形式进行通信。</p><p><strong>好处:</strong></p><ul><li>可读性: 功能包含在单个模块中</li><li>可维护性: 调试往往包含在单个模块中</li><li>可重用性: 具有集中功能不会被无用的干扰</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;内聚性低意味着组成某些功能的代码会散布在您的整个代码库中。不仅很难发现与您的模块相关的代码，而且很难在不同的模块之间跳转并跟踪的所有代码。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通俗的来讲，内聚是从功能角度来度量模块内的联系，好的内聚模块应恰好做一件事。描述的是模块内的功能联系。耦合是软件结构中各模块之间相互连接的一种度量，耦合强弱取决于模块间接口的复杂程度、进入或访问一个模块点以及通过接口的数据。</p><h4 id="可维护的代码"><a href="#可维护的代码" class="headerlink" title="可维护的代码"></a>可维护的代码</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一般在编写可维护的代码有助于提高开发人员的生产力。具有高度可维护的代码使设计新功能和编写代码变得更加容易。模块化，基于组件的分层代码可提高生产率并降低进行更改时的风险。通过使代码保持松散耦合，可以在一个模块内编写代码，而不会影响其他模块。通过保持代码的内聚性，我们可以更轻松地编写易于使用的DRY代码。</p><p><strong>问题</strong>: 当我们遇到问题时，请评估修复、修改程序的程度。是更改一个模块，还是更改分散在整个系统中？在进行更改时，它是否可以解决所有的问题，还是会产生其他一些不可预知的问题？</p><p>在编写和使用代码库时:</p><ul><li>我要修复和创建的此功能模块是多少？</li><li>此更改是要在几个不同的地方进行？</li><li>我能否独立测试代码，测试整个代码有多难？</li><li>我们是否可以使代码更松散地耦合来改善？可以使用高内聚来改善我们的代码吗？</li></ul><h3 id="Jenkins-设计"><a href="#Jenkins-设计" class="headerlink" title="Jenkins 设计"></a>Jenkins 设计</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;有了上面的的理论与概念。根据这里理论和概念我们就可以设计出一套更好的devops流程。本文将kubernetes平台上来做这一套设计，并在实际的环境中应用。涉及的功能如下: 服务 Job、Code Job、Release、Notice四个功能任务。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;每一个环境有错误，就会执行告警任务模块，告警目前使用的是<a href="https://github.com/xxlaila/jenkins-wechat-notice" target="_blank" rel="noopener">企业微信</a>。job之间需要传递JOB_NAME，env，version三个参数。在之前的devops设计里面整个job的调用设计还要多。形成了一个通用体系。在这个设计里面，当还需要增加一个任务流程，我们只需要修改pipeline，然后增加一个job，在下次构建的时候就会把我们新增加的流程给加进去，非常的方便。设计图如下：<br><img src="https://img.xxlaila.cn/1572081425995.jpg" alt="img"></p><h4 id="Project-Name"><a href="#Project-Name" class="headerlink" title="Project Name"></a>Project Name</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;此job一般就是服务，job名称以服务的名称进行命名。里面包含了四个功能.</p><ul><li>Clone Code: clone 代码。</li><li>Build Code: 就是对开发提交的代码进行编译。</li><li>Env Version: 获取本次提交的hash，以hash为版本，结合环境来做一个版本记录，这里需要进行判断。uat/prod环境不需要env前缀。</li><li>Build Docker: 把编译完成后的二进制文件，打包成一个docker镜像。</li></ul><h4 id="Code-Test"><a href="#Code-Test" class="headerlink" title="Code Test"></a>Code Test</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用于测试进行对代码的自动化测试；自动化流程、性能等测试</p><h4 id="Release"><a href="#Release" class="headerlink" title="Release"></a>Release</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;主要是进行发布服务。当接受到上游job传递来的参数信息后，结合参数信息来进行对应的发布到kubernetes中namespace中，主要包含了以下功能</p><ul><li>Push Docker: 把前面打包的docker镜像推送到harbor</li><li>Edit Files: 修改发布的脚本</li><li>Release: 执行<code>kubectl</code>进行发布<ul><li>当发布到kubernetes中，kubernetes 会执行<a href="https://xxlaila.github.io/2019/09/27/k8s-pod%E5%81%A5%E5%BA%B7%E6%A3%80%E6%B5%8B/" target="_blank" rel="noopener">health检测</a>，如果启动失败，会进行通知</li></ul></li></ul><h4 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;此job主要用于通知。当接受到规则的告警通知以后，就会进行触发通知相关的人员。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;前面的两篇文章介绍了pipeline的基本使用和一些实际使用的例子，看似很不错，但是在实际应用也会出现很多的不足和问题，随之系统的庞大、服务的增加、人员的参差不齐会导致很多的问题。
    
    </summary>
    
      <category term="jenkins" scheme="https://www.xxlaila.cn/categories/jenkins/"/>
    
    
      <category term="pipeline" scheme="https://www.xxlaila.cn/tags/pipeline/"/>
    
  </entry>
  
  <entry>
    <title>pipeline多分支gitlab触发</title>
    <link href="https://www.xxlaila.cn/2019/10/25/pipeline%E5%A4%9A%E5%88%86%E6%94%AFgitlab%E8%A7%A6%E5%8F%91/"/>
    <id>https://www.xxlaila.cn/2019/10/25/pipeline多分支gitlab触发/</id>
    <published>2019-10-25T09:20:15.000Z</published>
    <updated>2019-10-28T08:42:04.528Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="enter password to read." />    <label for="hbePass">enter password to read.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="d94e17a0b370d20c3d92f030807a557674640a2aa3acc1dd0f4ccf9894f08bc8">d69a90776b8106231e3f5503e1ddcc13f0a06d8dadd8234c5c68029f211ebabb4ed79e0a37894d9b100cc46ecc86e80f15a75fac9c13ce5af6f8509a1c8876945af8a7b28eb4bc7ca611fd2c8556cbeefe0e0b4eb7f37e8483be7b81758df86c5204d15c6159b0e2950603b31b4f791b2e764d0575a8e7c031e1f2f33c25c490c8ff94b516baf993a18449ca7573c917d793d837f89e3ac293933750ce67eb9871c938e411000d5e9eabc3ea7363fcaac23185cf81b6ce49e70d1bad7d08703d9ab3c311d89e8c38ee21bf56e2000d7a46672bdb000302760b84d8d16eabd37f221efc13208ea68bc450c6df7fb4871bc33aa514ed91caf2ca3bcb35230e44135a6f81eac52ea77800d18f9fc50bb97f516d2ee2be373cca7156dd22d815573ffc3f45ba66c1e8926959e271dd2d22b33b66136a55c98c81ee7450419ffd454d7046bf22572cbff5ab9f649b9fcc8181973ca17728155c4731c9efcb0ca8b0ce5a9c80b0ff23492231d0403fd01e2528b2f4d02601895289473d429fc4f0e43ee1f8bb7a4d37044eea13c8c49ae76961871f4627f18f9b3ab91695016b15bedace997992daada8597bd9e3b2fd02bcf176e363b0e4c41b412c7397fb9545727aaac2ebb8da0978d659ec9672547447452567af5848950835b3c242d44a7637f868806cb6f8f047cd081939ee8696b0fa55596a14e1aa2d62176d11a5a856648fa6954c2c9ffeaa0629764c9e9477a03ecb1e603ff8e0a3e2fb5d96198cc16b6d440462bbe991e50855958903447841a5bc394fbe28f3196dfbb1ee79b6323c23ebe733e41f8e91def7b6002f8ca3cc5adc677cbe85af41745a1a2cc087bc18f1cad2638d3750d88739a85a193dc4fc347600c1d4526b23e9525682879fad572d8379f4873146af48d759f489a85fb23e622a4fc1d06301892dbd1788a9ff6c8ecc1060e8e81d99daa25664cffa46c0950f4ff30a047eb1229acd9e961a38f011bb703029a5cf472329ee1fdd39d3ebe09876cf86605122970dba841acfb002b5419d46bcf92a228a5d4c93530e56517fdd0c8c462b4a212b3881fa6f6e2e29ec4ca4494bd0bd21ab7c3bdbfce5f18fe654484fbc0b5c9c387eabb78f2421b6689dd99109e9c40461c6106def38f8a5b2100e32bccb8b0e96face5e5a38918ba681fb4f6344a2a5d3d6ff73d974d989219ac60a9cf5b78b7795270e11337e1c6541bbee129fc0f2d0d60a250e1020ea245688e4b3003c433a4e4ed061b99df2e72bf906393895e19fb4cd2bc53a1381d4c84ce8370a1ec9e904daa049614a084a881f3247505509b56d383f924e7ab741baee1cd5209605c7eba1c52cd4f9fa3e93feb7e6ba8e4b60f1af63ad28a20ecf1c44bacde94910682ef312fe770f5dc8be030002867423b9f323968934a4a1f800db101084776cbc6b8e531a36db86b94b6ea2d3d5561094b3852faca834d44744afd2d1da7160053ee5bb3d2fbaf14f5e51cdff25ae2b9466ae5567707cb4f90408d1691360f4714e32f328ff3cd92a5d5068958aa0215fc958341a52c6b9df4fedaf705803f396360de0d6405c8c4c52a17947b4fbeb178ad6fcce00c6109e0dd4ed27c6c4392aa4b5b353a80bc4fdeea261ec4679f1f2f4eb49bf4376f4ae302d045ccff046f4db7140de5f82a885c61b599a7de84ccc04e0ed2d4397b0d5b781895c9fc1d002da9114251366c7206560fa3ff6151c2ce5b6ad9e46e6d17447cca0f67592d89a06c8ec338afc2a2cc77f62895978573dbc5395fd28b4e6826a420b6dba04393d1741e2b53772871033ed8339645582a0ab1860961550359ea63680774608d567626a69c9ce852ea26ac0f1215421bb2e3e03e94d1dffeda0ba95213c59d3fed5081bee87f9e7baab3e32417527629973bc9e278fd8ab62def13de01ac12a766bb85d9afc3d6cc194911c5dffc883b2079712d6c30982ecbbb5b34d5345530a40d33983ea73c5af0754ebac2f69725b8ce8b794dda931158975616cf359244f7428a002cbfba66d8570413debb89203f22c1380cffba6bdd3da952aba266448e0027ee73b4815599b177ca14e8e197b87748ee9e93b66df8e558ed59180c494fd8309edd94ca1d3b6b12dd4484f25629d5f7ab15e329d12297c12187478f44259b42e9903d1582867cedf2183364c5c078c2e39330ad9ab05d87aa20cd958b77ac74c6d31e60ce83edd2077c5ac3319b3dabf17282a327c5ac4aac0041ab57d39486bd56cb0f3e4e49accb975673a3d8095a26bbbe99b768b68e3229fd20a8be4a5b8c1559ad2c33ff1fcbc6426608ec0a7fe04921a1e62d747dbe4bb2b618019d68ce333d342cb05f38c197721d475131694f3406f05859348d460dfced10e659226ed6293a102d3bb3fc55fe77496a6b8a5f3c6a89f23e393ec4ffab6e54389953675920f26931b250753cb6d7c07dc0e52e9dcd3e29568086a906db1b523ceb93d7afe939383341c7b9fd69305d31f63b10f1bc4acaf4ddcca156c161e90ee5e3f2398af792f08bb41cea3e432bdfa4ad4145f2ff0c39247c36f8b5fb25dfac6b09e6ae57fa71a684386d02348a23d748287a2596558bab23b08e29b17c0c0287a1d6c730d174e82082e3e01de47905306085dc418b83229bed0c5a80d34c32a5f8f26879b342d67ae6073c8ea46e7e55f189c8c6d938479b6bfd5233c61fa1e2b2d94ed58b702b64432314a2ae22dc910463b2576f374f2d2f06d71113875be15826a9b7b5611e8e3284f2b54c5f74bd103fb836d98343eebca9e30ade1d374e0ee919ca6142802564625de981bcb059f2c4031e3b17e1a88ab1da34501f11f772dcb81abc4b1163812149233e5c5863b1db3c234d477c5009746a71736bb67513c7e8db6de0e1cd2de4836eaaeee6e2e1d02085979f811d05d43ae0eb4c67fda15f1184b4404435a4dd743d7a84d577a073ba77d51ed8a8552d018f7c269bfd70240cc6f141d5f27467f843adbab8fa8edb1ab0b11db1dd368dc996531d8a03e3a2af6373cf5b53d1136182d606a6d9c38211c5fd6a9d1d23692cbea493523f21bfd8db334a48d44de9260be93dee85eba95978f7a983cfce61d9d81ef7c8cc9fdeb16644aa1a4644c7fbd48a396951cac12cc1142850bb73144b6fde3f358fdb114c3cb3367434738ad30bb21e5ac6ab83f1c53d0fdfb65e536f91a8772ea067decf69afdc9141de5bf3923afec9fd3f85aecb25fc1914cbb6bf89e2dc101baa90a4cd2043044b1ef3eed43cbe8724389d50569a9c6357fb256c94ada9a82b6ab38bbf11dfc5712064ba454e057093b7663b830ff331f0bf56967596b8cc479ec345aca4dbed0156ca1dfa94e0ede0b209b31c1a2981a9252bb7fa5e397de083b5a76aaac277c94ac0a92441e8ec69f83ad62395116d29faf9d86ed5fd830ea719426dee4340606ea82f491297f95566420aeaccff66dc30c1c02e70ead1d356b2a5150136ea4e6a8d03dd61fc0d6bef7095f086cf9594e2e59ff0338fe18c3e781aa41956a9ee8db3cef67a0e869058c9526d7559009c73be99cc870e013063e57530ecf46ab90c4c9f36feca14ffe52739b66e5770c4bc060b47e02f2634d1fdcad9c8fec46cd9aa2dfee1847fea2bc2ca2893797404a120090ae58f39826b8afe1305e41a3dc5aa734298a48032b457e93c74b0c4a358f1702536196aad61213662f28349d0acae5bdc787d6b1d808a3858916ef2946baed159e131abe00e5747205f66240618d9ef2bf611a732003ce3402e8ca030ae88ca73bcc5a159e738b092449a9b282f4f93fffdd5dfbfc70e55cb019d4438ba66a6402af7ad08d76d4e87193d6a5ae0af3e67d0a918d08d664d8ca81552acc742d0d8ca44a393ff4f3348078022839528d9b7b62b3936850ce16aeae87ac6e5bfec578160f861414b4733839a8e99a3a8fee31780a6fd0ec5537b72a3b988a52673d99ef5609ee258f694a53a8e333a6e9c793cf41bd0990541abcf93e0fd01d3af13a85a1fa146544f47e173f59dc83f980be248591ba65148c41bbe7c16136208e4c021af61196eeb9205d27dee1e1592e80429114122ddbccfe8ce4683c44af31e4ab3dfea6d50a2174a292e00d2d20034c539b6b0c32d086f235aac5ab1bb652cb42046f1756910c5ec3bf771acbe811101fab9d95fa2eb4788f1739d873211dcda00a150b1f81e552c5f3f7cc7e5347d60dba81620e5c2fff87b8bc39c3653ee9b290e9597ce21f579f30e07cb5893d97fbeb2addb52bb1256684c6f23375f1f74e2628c794099b7788e1c567d1e1deb5688d676abb510aa80b1b9e4fec3d8a8d4df6756fae6748f31de944944a43b539a3ef160a74b8a2993ca4cbfe1101ac48ca6dc3b91ac850c3e65e504543ec802afea03207b7ad697281e3040e94654efb1af9d17aab26d32c73def5671d99e8fc97ea231cd014e0c6032a98a6ed4f8ae22583f42b86f9b4c11e732e06660321994a22ed1333ccba9759f73bab30e103cd371a77e05b552e3c9fbe1b2e1551041f04a52fa2886907a65cc6eee4d8692f433f0be5ef935d39c2cdd31813f803c99ccaa3724655daa9dcefdaf2ae9fef1bff81ea1dd2a2b71f515de003776dc2b4234250007883c7baac0c649bb26f094c10514acc0ecf6d614657328505549edc69275eaec04864ba525996f89d0f8a53a5889eda490309fcc0ef742c78fde66481f85f1b69d9dacdf982d14fb6137f74cf4af9153b28f2e305dd153b18633a5585f606da0531d5c747037090eabbfdd5f1c6b79daef2f9990a2a9ecfeee18ce488466649031bf04e44e0b23954185a5fc6cee9ba32e16f3c8aad31e605a57933eb60b507a93d36090b0a9db6a3bdff2325e8b93b655e086ff19e58ccec442443848e7f8b9e63372e8d7f95eed5c34350b1b8bb13bde0edea052e6d800acd8c2b140f08dc48ecbf971a7d58e2dae496e51a6f7bc62770d12d78d8be8d556ac40ea7c22ea840f8d30199d1527155a56be856bbef986db10d4ea2e4c666aecd063e2946f6ecdaa37419948843d4a4626be9c022d5657ca3efbeecc797770ca9e0c878e21e32917afa264553a7bcfb7e9b57bc8c942d2ee779538a9e9257da43851ead6916299454924fb4dab9d1af9c80df82f060bdb8face0d4ddf628e782007d7699c29eef6a2f4878b3fbf82d23b323d8171cee26ea334e61443ce2b9bb226eff0d5f70ac1c6d0876c4a02fcfffe48b6a692450943ccef89cfb261dd132a4a5f15eaa9d81a85bc18ff4f7dbe759555de1d8bb9f4fd213f862208c3f85e54a34c5d17f3b80d526ce1f7a3a09d9b07516e27a8ac7c617b3d43a7ed38f1bde2742b444ec89f05f005ddff7a514b192a56a94cbc0994f9b283b6012464f94af209dbc1397cc495640a49fa00b49181dba25adc8d857c237bdf9e474f905f7cf1f31d902c69ba14ca194a0d43235a6972e1a85d7824c89b95cd994a18450ac56bc75584b1f90788b6ed1e86671bc4fe8ba5593f1776b02eae5205f73288210484e23460aa50328ae10cfdc8ab1d1504da718652f2bd4d2abb4370efaa0e875447044084d0de7a2c051752a8bcc92792d37335a37221f833ed21c397f6dad54a9ce519591e77631ba544ce94392e939c0a1ae0b6711011347239989e08be6d84c7d6daf97e814e7e4cc39b147bdb3b733b047ca1683f3a301a987ace60b1d20bd4c87228394efc8b38d55ee76b83fd412d6fd5e6410e14dc11fac0be7dd7d97ee331c2f327ebce7cdc2e6b6b1e425da33d66a6ccdb0b1bbd6c84d80f93575ee6d2107abf664c313dad06db51f9a6392840f8925a27785623509f2ae2cc62af31db5065f1a1e025f98892e891d54168eaa437219a6f1eb7706fa308023b187a9356227a801efb417421e3f80cffb3d61376a07eaea3454883f8d1b7f14a747858e0ab2ed5a3c095f5a37305437f8980d614d757ec53ad2cecc7b66eb41d79209aaa270ef83c2be106382cccf762631262bdf7cf64a25996d122e8047e8f46b15564fb92c16322ec587a85ceca63e045411127c3cc864e4cd52c2a6a605fb5c7a821d44a6fbae0e72dd736923a3c78b2996ebcf872f0a670d3fb777c5d213fb878252601a81bb410f7b2e093db2e3da418c9412758252c7c5b1d1a812c5318ad0e40b2f83d849fd5dbb31a86134879aa037b7871334d2e700ee3ad29668e1998dfce31e3f4820633a5991a8ee852bfdcb164e424a5185071726160122ab51966122bb6df46b34e655adbd28379d6d8ea67f93ff4e0162962aa2e0a1cd8169d9227cfaa1825540ab8c77de2ffab1cc6e951b1d6367d4332935aac63364f63dd6ace06526cf7c7d6d8bb521cce3ede6ef7ddb3fd5f4a3e04465992375ead05903fa2e50c321c6f2744b75fcc3c93784b913f597c2f616875e71d451fc960fe63b8dc5c1c4a02ecf0b379b91feb13fda8da985ef77709db492fa5e17831e6367f5f87cc9fa98cfbaf2f4901430a9830415bfc2ba06c7bfbd6537842eb0b4beb4c1d136f2775f6054741fa9114efdd06264df3cecf928d9801e05dc598a2d258a0e7f6e685b88c2047fd290da151c9d9a3349f170f87642077b46808183cd76f02c52f0d0b8a0d155175b018ddec1e75131a80424d1a31ba616daa7157a2eb8a161e94a4e023a70f3e56b0ef70c123faa87154d2d5ef75f83ac02d7742366e34289200da8beedb766ea1238e27ff9b1b1ce3c03fc969bca143c21531bbcf4469f6ce3193755c651066adf36d57da6fb29da1ae5892103ca4eccbdc95f9d182cb9746d1f53fd9c3b5c6e5ec3956c4b8a3aeb3afbb35ac5e2b366cec1498f9b426d911107165002d0f44f0199f44243a6e542de77ceb30984f15b73e7dfe00def5884987420dade2bba3de681197c6c1989f7b3bcb116ad7240e1b11bb2ef40cc542cdcee379acb347ba01ff1f6a7e4084149807b241ef2361f56d7a5b85ee19d2167bb2ae5b18b4ae93a10b32669867dc7928631902e99b3d85e0f8789f9a964ed8f066933e4249441abfae1185e2684ec47130a0d3b759731d131670a5865c30308e728d9594755ef450b3bc596b2c86c197a16df1f791a16c8af810a764add246631dd96a0cbb16968da8df6fb60b593aec1e6c264a6b65cd6aacffab31a037c01c4bd0d27d421f984fddb8604f1ef33bae5aea16d3cb897e1f1f0f7c92f7e55fe80620d5ae28b91852fd724bf6741fbbfb64c2f247f0621d962df8569366dfb2d7d4c4329a65569adec9504f088aff7cb18629e56894200257a45c69452681a05abeee32852f8e00450672d6f336e3e00f9b1a4f656601c889e34acab5d307601da17d8999cd761f2cfde68d26a49cd6185992a96bb5ac3354f1d8928743608eb7f3257e35cfe3061fd1b2c73b2959e7b0833fcf5042ee9d545bebd9033ebdbccf86dbbd2a83fbc0d1dbb01a0cde6fbc025cf2e8408c61184c31bf3810e2592313e0f50f1c3b0c84600b946279972de0faa0e2e1b099189f62c1a24e04eff62a07d42e32cad333744196b2689c24502244a8db3e2ecfcbbe1ad1c51e9726c57cf897b428f80bbd7074b5a77da051e6312b64029d7c0cc1a6e6c8b95d21ea146b6bb05d603042688085592a306f6e21b3d0e4b9f85a0bae8ce70bcc306f6b6f5d16799b42dfdda26f4f86f341910fc0e89173291e7294f9904e340a4685038cb62a67c442f1a4a7f9cb951eeb5e2eef28f7f6a25c817e2317f4fe7a5ceef9fc9d3c6035a14279cb711e3c2eb85ac84cf61ffc45fe526a3431898f031c4413765cdfe04984d30388d67550fa3628992708ab15cc302546c923c5f9ca7d4bc686a2fe397b4d0e09c8c6aab5b8a8a2fb6111913ac144dacfac742633bfda6aab5b98113b488698bda3070fea77ab793c247d076cf2d9505bb33eeb80a22100d9343fa5967975e279e6d9a451df426309817073b5c7466a0645b250e7b4031849cd121c08d1d3a791abb9a78da61a5eba296207a3ecc4bc11cd8474a5523de2d6c7441a8c08bfa0d05d222aad877062827f41c4f3a3bed21334f2008f6907a0416d739baa5b36b7deb9c03fdac562ce1a3c707e596ad4a0f9a8dbb8f9484343bad157e781706e225b3e2ffa16888b9d4b1e192f48258c2132d82c6a62ce4d857ba9f2d68cd6228b907f8a1b36c03646c1f432d68c68cfe304e922578527f81566d88b959579b910774320d665b388895b02e6c0a2b43a72488bf3cf3bf23d8254b761a3ffbb499f4b0c4379f142e6616fce8a994e078bce0332aa61caabac7bb6dc76667b5815c63f239700e4ad49b654356aeba5495f277855896ffc2e5ffd82c51539bcd216ed617d5b6807f8f9e5857f0d4df64315a00198e978c4fb89daee6410cdab270ec37f459783de7bc13cecf879b7f884f895774bc8e0a4863a3440d848bf6cb35a51f10eace2f35f4017f7bfa6eb892a08fe63411253fb24b400c1e520488afb55e982a70e0a962099c4b002911eab98afb01bb1956ee7fd74356e6d638774be7731f2c8c5faad3faa924abac732bb56ea19f42ebcdca09f7118e8e2b151d7f5738ba4a53cb5f893d85d50e1619c6adf9c3bc411478cc715e5f379a8117432e8eab94cc2218745778a31a2c81c673a29e9d4d1a743110c2ba3f1fb5b8be41e4aca497727b376a9be142c689ffc0c134763bbcf8624fdf4860babd93415469a4169089ccaec60889298fd784291c857b0555f1db9b19a5dffc5b57a57d0c6bef664ae3863a16f6f82fdbcd3d17717caaa337391cf84fe78ea41f4a6eca1251c4506559f2d8622bdc2d51c2656bc005053ac11732cfb575349ed60feb3b041b66af2186cb8e43205572efe0c4f0cae92b0593a29796328b4bb5e44a61dd11288b0b45a635fdbf35bc6d1c93c5b8d40f3e514abb94f457029089b534b1985dcf25feceb843aecd21ccf9b16edc9e3e45de64122dd9521d47ebc7feaf0402fde0314773da676716fe7d342b26eca93b98410c991a3f53587adc4cb18f42774f7834aae796a224dacf9bd0bf6094cf51c7d60b871f1f4600d0cde77fb9ee080b062f57a46b8ba73d1692e0bd22341a1c1d9678ac94208e5f654f5a8d5a08f146aa2ffd4e426dd88d0a4b042eead380b91ed5f34b3d9d14a39ec7c110481dc341d0922b0e61dc06bfd548e2f787d55c431cadf6c77cc0d614a9d8d075c8261c4403f8c56b8d95d93f982a26a4eb7e1c1373df43832bf42eef614cb9c60483d18cf0d6298312e7b995340a8444363aed1e306586fc2d8e345f33aa6fb0930ca5eb99dc091013c913a8b5b1e5c06b5426c814096adfd93f8180ffe5bd8b11508d5ea72f699c444e65a47b851d95a0a477d966f53bda37c8607c72c64a4446923331b71af0571fcd5230b1557b79abad8023ba9aa7c46ee16e5537da972c689027584f55615c43912512ac46a40f74a4ed834a730094a43cc2cdf057f06c1eca4f60ee4956fbf8e438bb85821aee5724214d374fc507e5b4a04487d06b9de449ff03185afaf534cf9d01f4d9dd35a3333e8a241e7d8acbc57918f517a6093b512b0d8f8f8de03b7fa21ea93ed79c4cb55f4bc0e218e452b53e8eb76a607e051632832de1fa4d674c3ae04f6cdfffb78cd1619844a629555ab2455967c10e06e77432db27e64c8acae6e7df4700b3fd9fe6c97fec671e39a546a14ed18ecc76ac2b6980b426916a4ed090c8fd2a46a5942f7471ccbe2bccff678b316823638b58a44cbe1f99ab67cbc8ce9c7f776d3132defb656be91d7bcda38a04ec924e0a54176e155a8b2ed11c7b2845d4b64b0303130b0473fef4a2352a4f158029899740da9bd86933380b163eb40821c607a5fdf988090220137f375ec937521331b529ab4f3ef43a7c4ad19849854a005df156164d06b3ecc2c862b4045bda3d30f46c4814c87fcb3597e05d2595f9e9a55648ed803847aa95dc2f5422907215cbbaff7243496a3fb440901deb2832bb02f4496a0426f3ddb232e780738d7eddaa32ffdd5c2e449672c79b5c42e04c94c8f5bfb6d337d812a20f45f52f358733a47cc8e23bb42d53b128ff15fd28dea55e8ce764e9e5031fb4ab6f41849b93bbaa427275d1a3ead3347c7e725e10bc9ffe16f9b693a5292c0d36d2269da9d75ee0b8248930fe13a015224be78e5f03ab005edfc654566338ed1c5b7e6475ee885d78d45d4fb44d5d75f447f4eae6e5e743c8dc3c0db61157cc90eb40592bd9bc10737c15462767f77ef22d00482f0dfa91e077f2e8703c1c25ef53a31e02ee7e543e58b6679875e5d1a1dac5c12ea507de3601d4748588d4158703697ed4146bdf60d942198b73c822566be851ff2346c30b0fb2b9920685e485a3a52666bdf7d8a1339be934cc6c9053587e5eda384c10ca6f135da94dc6959d5635909e85e4002893f6bcfa0c141859049c1dc7e0ea552021bcfbec7fd89dae0c241101eba4e21a621c7e41f74ba32a9340401ca0c70703f611a2ab0aa371b4766907b2cb47870530d6bf326f835e37c1a12372220f8981524c2459c61a68d114a6eaf05fb1876bef0f74b1303c66e27e6b8199c07580a4e032514df14cdaae8cabc8f11de1febd9cf466cb2aff593590980337475b04274ef57d9de9bf44e696933beca40057456ebe8c44882584990ad793bf78cecc61777dc3e3f9c99817c9eaa7ad3b63fd6b848fa98ed2f6d496841445a466477942dce4f60cc6d87a9e20270f0164a9f38db5339f55cc45ce2cdd75e7128d800ddf6594469b6220d14c3df8bcf82a349ba0176725b64d6d5c2abe838c885e66a76066a1b90a6318662965f6a0cb9da074025d9e3ad11332597280fbfe7ce348cd1356f110d64b2e6622406ca6330a028eadaba20a8ee6b4e761d4f40740ec6fa1ac318be42215326e2872e93e2122f996466d0ce0250be791c864bb160a98a1b3e77d7f08f8a2919112e669f3c3dae94598bc8db7b8ee4a982aa636789abb8cf29a598c15e23d09023b1ef5f82dd61b89a3d5a48877a7f33b39c7109705607c34bf3295f6f268a043576eb99037f33a7794e8dec463dae6f1777a2537555c274075c117bb4ca509a071efee988594b8e397fa64433d90323a43f232d7569e851fb0ead54a8b0b488430fc5837a923d1197aa018c84f62b78c3178aa14f1dcf193c21233a2163423acb8e59d08e722741162c84353d9155eb3d8876d5d3f645ec9009524d1283ed42a13b404f4e82a4f3d685088a4d0f0038298be29c74421efa012527908f1e4e5c0193e2997b62cca72b78287019d85a0eaf7c76122b994ab40f2d0606b0b8fe05f52d92af36143adb64fe4135adf89b1386feef6a1f9613a2cb8d52915dab89ac92681a94f6becd798d7c76ab9d489caa436fb180235458ff697511edbe793fe37d876bcb46c0112576662885ad9eaec9b8cf89fbeb5087389171e066139dbeb664637d1e8167afd5f91b8dd4b5a073b58eaa1e296b9ab407adf17924e21c1da0319dd98ad12ff866e8033d8e0482e0404a093e1f8ae3b304b1f105f0da2856664cc64054894da4545a8dd1192459c6d75b766b5ee0cb7a44f39d8b5f841b61ca1eaa3d3da88db67b9459e760768849281bb30884973890f5006a1422f36a53262e9c8d777545e2885110cc7ef422c1331ee7aa9b3b3c5ac730eb846f558de1c4ed537a1bbaa808f4fca3790592794dec79cb635c3e72fe68f7834558bcb3b0b2a6be24c10f0089c37a4715a597951acd8e563530bb40f738b70e472e0bc60a1f8f7752b5fcb9a6c2748e475c21cae3c1d102a145ffb67bd65404f91cd2d85c53593cf28b9f227ca4eee4b88ce6b3614fdb9f938eaf5bdbbfd36e2e8518e08f384bf85754fb586d4fc59d0ec8f73664029e5aaf6f5e9fba51b5f2f57285fa4277d6fe3fdc748fddb502f832143dfd7978772a0c40fcb5e0907af03bdcd0773f90fb3d3ca8a6b8e8927f8d5c5b472a26b0b315d009ec48472e0cbff98d6ecd00e04bbd858d99d28d53bbf7d1d9fd58ba3331d7e8675548bb05b630ac1f264f72dac05dac0134e8d838d9f80ea68c46b0a8e6f1ca2d3d59bb3440d25329fd745ec4221c4499dc2ce40657446b0bb290110f5abd513ebf5311e8896ebcdcd79ed37ba6c4059c4dda1c10f4d49c5505e8f2ccf99469d1e9e272939bbee3a3a9ae011d199e852880b8c49322140d45eb12893be76a40307498d768713eed6d391db94c3e6d29bede67c4a64a69326925fea528f0f34758b84aa29cc862a95494c39c95206d3e28b8d80884408607acc22bd6dcacd3ef8736fbd8fbfcbe3439610921716a12c35f67e0335ce69734679d59452a2ae8c0eb77bd34269be35ca2499140d3f8ae6ff019cdc02e6663d14c88a47f70d1098aba4ee651f150c9e6e91111f5e775bc5006a604750ae762482b04aa3a98a3b6c784021f9b00e9740c6d904ba0f38f9cb29d2878777a48fe11687d2d705979e71bd8d6d6157e2ff801e0d3ea99c4b277525c8d3a0d7c1e778dc190848df67a5918460c437f13d7d778e452dd5e89dbff09eb7b7222e6ff79c776070d22621aad3ea6f75ad362c3ad5affa75995f76b977bffaafeba2189b659f540a0de7e137aaa8d5babd1009188867ad23c926f75f4bd3d07153f850e2d1fc5b7531cd9bacac89902f622b2dc945d059d080a751369c3cf42b157a0299ed0ed3560f876354a64fd261e7222ee8cf10d10966e720ede4f174f995f4cf0a1031fa2168bb96980ee006ac53c2414a8db9320df1d8810f34aef2fc37f09f0ba9cdeae3e5967b1e6ca71b33e113a2aaa8cc0443566790bc3befae84068555b56e8bfd7d992dc393882e413ba978cd6cf64c0c82687e6edd05ccac3e6d0038869245c979c66262bf18db8af24fc36bc01302c36b1a1d0f4e75b5c34ff76130ff159f105b9551ddce2f70ff443d594512e7b0ca6c9e321cf3f3b08884166c511e82cf51e0ff8a036125fb0dee68e52fca8c6ec01370eeed8d1065daf55c41b42f0a2e93659f304aa3c4ddb7812e9ac67c170dceb5882cfca87dd697883bc78fa0e858985611139fe920c42d2d051abf36a47a590879f36d928f348041aef481d37d82bf85762aa2d34e4a18a7e7417083f6637c21b862dde826fcbb4a806b17b52126b01c5b6d6bc71fed9db606da3312d936c59a9d5ee269ec883e4eed9cc5b9c1c2302edb3c35b1595556017cdba2c7f026bb43e316cd3f59eabc0ba1d8eaa8a1b6f9aa4b7aecc34bcb6631bc6a9898815b0c6b9f5985338cda99148a166c7ab7869dbfe26769ef40b356fbefeaed3748c409fc3c1bb127c3720ee5b2d9a276270794e078e8e74e5c0620ebce369172abe786e6ab90e4c1278e603ce67673ae2777dd85d77fc44951ed61d5617bdfd81b76608e3473f19c0a74fbabef5533f3114dad0339ab6f4081705a12cd1ed944556b6174d2532b6a460f664ec0c1d5c36a6fcd3f75ba256d57788385b6343c96aa3f3dc9734cbc8736821524640e01ef9785ef21a6be374b67918a6f3d31d5c140ff1f6bc6d84c642c104cc90a593fbf1123e41deae528f633dc408a78c6876c173417524172e21fa2f869fc352cb86fbb941f3971a342db926002058716c6601d8e23667bbdeaa07beed5241b9f2d7578e177060581016d512c0af0b96a86156f8c7fce4bfee25e21ddce63a0b757455f1f176643d7f20c3202f16f69ca9bf755069afdf9a8ebfdd572362204b19b13239abbd8468902cf400e4e5e30dd2881aa12cf615ba01fdf3a39dae4108ea217352e298e95d2dcae6c87ca9781653cb3f081f317e5e34e92ad7807addb8744f4c4b15c752ec3866de58035d3c51a5205e8528d54f9a9b44f577eb24f540ab312b08d49fac101a5833f0ae49cc431891fa67cad1dcdc2e216b9855cee5add261b0e4e603c795a402a496c88e2aeaedbb50697070f3f6967f4d33c35fb816b41e1eef72c678a0c33ddf2cc85ade2f18258c2db7285eb60dffeaac6b99947ca4160c77c21dd19e26efba964e41903062b80e3a5da3ba33c5e970506461c203d0d1e859fcf90d21b2c3833f0bb3d666f6d8715dd0d0bcebcc4ac7b2f6453dc638fe8dd4ce69e70dc030b0e16a287d5f296b1ad233c3d6b16b5112f54c859ddde4908725de608b13a2cf266c8788d3745cb28a91aa7b93c8a427e623a3216c1458d526fb6e184d38b00bf49a53b8b5e152d8d0f77cf84e59be6725f06e37c323ca39d25ec3070c9a7c1b22c3720936aab27dcfcbf049ac8a683ac1a5bfda02c8978c66b658faa77196c21f31b52fa51ea5ac72a55e9a97d9a28bcb34f974c7aeb5fc8bc72bc08baeca67c03e3aec0e1f4e7123321cf1aed683b486457e92b75c8c00cb74522698257f27aa3f628a5f668cd7cd3093a9d70848be2764ddb308f296e3ddb71e233413f34e0852c7b90b41da55b505200dd27cbfad3a270c1e00bc0725b3cbaff9db58db6215c497cc0338b3c64170d9c3cd6df57fe7ed07f1071023ffbde5f3df6d126d2ebab717ae437cbcea68668392cbb035602586e565c9b34b93322c7ea0fa686814d4a28a18ac7419529b0fce0cd24a0f07762b8d85e1b97518e3a8f6ef4fb7831346403cc5eba0dae234694a80d5557240cff537ed796de2e7928507ce98e98e1ebc531303da35e41c8ebd61c1e7d1f88e695fa05d4d8ae8aa5e1eede0d1947e9d40191b5c47fe8c6a27fb0ff699f6683aecc8898b9a10092f43b5aa31bf73af9f4b96f5d57f64ef40f35fc8a9f194ae004726bf83999af174d6889883c42a132cd55dc5c23710169db0f5ec176afe7e9635e81388fee32a1eb558fc29ee4859c4f21ad6f4c7fc6016d91df78e900bd8f0c8cf45c5e7e004b2958e29312f828f8ff991b5a79cf52b2e2207e18a2f4f261ab7746a6885cbad571396d04b2abb0ef60409e564d0379d74b4d391c6aa51bc016dea92aa98c58bce480886c57f3df817bed7dfb9fc431215370391cc707731434c13e67a4acb0ac8ef8d517c87ca7c0e8a4a2c5f6d20dd395b0a04e831d6a003902c8f10811ca616a3b0666acd654c019cd0eaa1606240fc0207226a21fcc71428f07c5b7e0bf17532c25b291fe91a12f2ded12a92a606b21e25c478c2ede27e34738b4f02c18f6e1febb561240499779940811ea8840979ef947b0f722728f9df291e78b4f66b2e0dc4b6a7b7e0a0ab6e0aaa774c83b1e50d2485e3c5d72794e65b13fa282bdeaefb67e301a85dc71b3abae9c1b92fdaa3d18cdff080053599e68a7e92d8bb5ca1d3727e6bf268a37e375107160d2448d82dbadbf1357fd594fcb177b2ba29d5a9aec0533bd8d21eb168b476ef552df1e4512ce44299ab77c51ba3dd614fe88c17f2f2779e1ec5808f381bb71996ef496e7765df10f3b18cf1b4d16cbc981c930069f69eb2eca690c534d77af2c51af1aa14a186e23e128d3c2dc1b643be06bc01271da7170f97f2729683c06abbd845d7b16918db8d2191bb74936f15496e8189aeb8a0b874ddaec3e1c26ba2a2e0fa15116083653f0b172460728dea02998d1693f1229ad06aab06b1acaacfad4055b604b2809525f54e11bc05d4ebf01c730228e33d7ff622a11d5b80a38d6f41e7169e4091fd89a190565d2d8176ed6d977babc14f3091fa7a2f0c3664b7c1736fa58072e73ebadfa0827af850cf43028043adfbcd91cb7ae401ac0eae1c44b64d7d042c168f1fd878d37e76a14efebadc015e5cdb44feddd530cbc2f8f108d2fc86f284e299589ec56e2655b46d0f02a3256cc52edb2030f896266b9663820518ea7d5e981461d43860975823e790af2c73075e1b39b6be92c324f4ca60a54628d58df7769d99703b252f835ca672478e2754c0c6a97b950894aeb79fb94041fb7a6a1b79d0e4e6abad2c3b25abbf022378e74f81b5c7718a896779800151496dc90951ead812729d4d2450f4227164c3915cb200a24a14f2e779e3cb10ed0d2c8f165b302a0ea8678ae27f77db9fa172eacd61689c81ec9cfaadd9ae55b724127df37e37195261ff80ef4d2fd78fa62bb8e03dd35f189cea9053262b0016b56d52f1b27abe1400e97d4899e43ec993da2bcdcb179b91d15f6cf93f36ac16d9b32ec4087be98685dc45ef7649aaa70e87796d4eb05737ba8efda415b3708726ddcd94f59b237816e4d09df59ea905fd6a25547b96dc22ee687abf5f41070a30fbb8c251c45dc43f070239fca896164b6119eee50a5401df0a841fa855e329a221925636741d28763dba5a1bcbb2356b75ad7efb4bed61beaf5f1beb13ff14ab309b847fec09532090e82e1140f21f9ec6ff554c7de23a2066689bcf62fd3c42c2126065a728d9101f1b18ce8af5f3de1abff030475b182308c65a9b28414abac1f572afac1c66dde7a7d89fa26f4e672895f4003c8ac01a0036f8a4f444d2d3a32741ac4e6880cdb56169e29585b9192d73c2c206e7a92a59c58b485d3fbbcf64ee332c8fad4528a22c7a165b93d36dd032918012bde433c5598d657831ecc6a5b030b27b77a54d4d8f82b93ad36f7cebb269c9ffe5aa26b0cc0705bb5489d70910d85a12ec27a55714d6600c20c04e304aba8b8ae949225536a7194468d404fbcb9ab4b077b983a1f6c743c87aa5b1ecc1a38d4de6b3a3c7632c3671cde3245d7fac85bf76db566cd435f7341948dd888ad9cee7ff9deface00e24971ef198bb62b0c590a9a9b7804cc97d472ac565cf6f481445e6ba14a24a8bf0839a677e2d64d21ecf75f660c5d11eedd4d501adb671ce69964a79ad9c4aa708449feb5379d766634fde2415a145e8d7827c3e80bbea471d64efa0b538ae536c5c454c03a482e57938a0ad66c7144113f382d12b2feede7e8e198fb7ac1dbe8f92442982b8cd80521ba382edb9729b3f80dc590a77adc87b96daf59daecaa8040b34840dec7cce39bf2610ac593a7be1086656fc54da14347aea1627cd00eea4ba84f3a0ca5b3c9977b4032f1d31b2d724c2a620e13054c5a83a84024f474d47e23e9da5667fdc4479d89dc19ede3af9328743db2c57e1114a61abd2313b91d3f85d446817c43e3efc2c6cfeb870bec2a51b437cd81d2ad87ffa335e84aa5156ba4f2d7f7e9361704e34f9d6a65e3888cb0c9531b10aec65f808f15407fcd9c14401b59156360fe54fba4d82195a1755e6948e3c8d6cbd1be76b53432e7cb504165a9f1c738bd2b2b03156af0ae9906888a3dfb6e2d4e4f83e78800fd510dc708f0ff117b73c74d76e6209682ac5b2dbbeac2f2563ae065cb6513aaa0efdb5873ec217c78dbf451ef388563e658f19b2693ed19a8c88fff4353a809c10f762efe9c9228c5bd3b30241acab825dbd50b87006d7a23b2caa1de96c79c92d3b14ce806326ef6708176737e6a5901ca8bf760cf725c6f19b1be6dfb325907a759ef285d4fd45a26592084d0806989f77c958ae2eb679213f5bc1eec19e5b39d7b975a51d01daf0cb2dd610f8d305cc029a4c8390045b0527e2668ee99ec1d573164417a029ac35711adac3e3d121a12824944b54f7d16dfdcd3852d4102aaee6efbf445a2cfeab31ce6a34f05bce4b2fd8c900d49a4904759cdf652802d7f16be758475275f0c8a5877c547afef220992c2e39aabc8fe4169717a8f6214835c271777485f338d3fa5dcfb7b5d954bf2cef72b0f8c893a8132f5250041c03e4f8e70c2d06325f39a051977957543b38a0186e781ec37b4d971f8f388e166e079b8d32137848641e19c202515ebb16db6971653a7194b683780421979f7efca70bdf1210267c9eadbacb0be598d8aeb707d176e62f7908ac02f8a96a98c09cbdb286087175536a87e2f0af8df8bab325803ddc274218724bf9f28c35ed36e5781008d8c4351bbaab7c6410d7025f2ab76289173fc4f69ac8e6e58a5b1a9825bbaa1a088f50756f86769f8863d879e7b08308095e4c38322ea1082de2ec44a561bc6864282144265a3661018dcbdf18e1f8424ecbb814cff99150cc696af01c1f6acc54fe502e7e39c429c41c7acae74dbdfcfa62df2ce4fd6401dcd360a6b1036e7346968813813fbcf8f92c8d649d8a4595d5a77dcf82ef4ef73ad7952a533df8f22d763681cff5cc7a113cbeae82f69783890369b49ccf2d7e3e89b454e4fce8b093873ff5231a8029cd2927525581d8800e8e1ae2a1fbdb5745abb0420536d84bd62fcd6d6df3ca45b16ad32e203ec76b95e21642215e0015f208df97b8713ada68ab8dfd92ff17fe56d9bb9352dbd50ef77b1a854dc2fc0fe53868af966c0781d747e2fbaeb95be6998df8a11d31b90c3950d3fd68d57a6865747c46862854ea46541e67a09a3afe7ad0dd7c52e8bfb449e85d7d0b7390f298b54df434cdd943bd692bfeaaacdf34a1258ec01446e03e744e5917bfb5f9d9b52e2731a79348ae8eb9dfec0801e9bee0978486594cd5f1dfbe6c3efd86a4edbe99ecfa2f47b4b3fd41a5468416220718dec5e605af40816fe10e99116f861c16498ea46aedee36730342e591be4ef11464fae12b5f74dfad644d1d8b4e4f494f32db48fff3c8663063f841ac283895c9e28c90eabcccbe10bbe9e6d181523f6c9701a7aa99af15ea369d7fa36fe5181f47eed4186dabc8fd157acc64216b74acab90aef7051887963c224086ed6dd6baea8cb72ff0f2dae9f663f256c0abd9150272f64557e8e3be38939e7e072a9b23c38e5f0c9a791c34d1882db7a6a0b31c611459d142c32b4a2b0a27593b6a86523b17908a8488d95c1dca227ea30ca45579f2e09116d6a7fe8f57c5931e7af6bcea9278410154938a8e0cc63f8cfe2bd476244e8e51c778434b486dd37a3d1405e358d03bbbaa786370f407f6797dc666f99a8e4ad87574d1ee8cdb395f25299f5fd6938bec5dce5e622e24636165d5e7207024cbd57e2c6584f44375b5639d1fedf93b53b2508b37775ce6a069720c586b51e338f54726f6e0699c3792c4dc84170ac0ee958c13be00d2408f22fa8aa142463e65707fd154d397c7a61aff3fd7f266211c50a800be287ddd92fa66ad04fc879a2f65caba3fc86f4c0e7c6234b1de5e24a468fadb3a9364ee7cc533c7c11d586533a0baaad163d2aec3cfa8c0a9a511e35e3bb21958310a079e89d5a8e1de8c7f2ec8a3c20798c50e95576bb754b26219471d6d3b462c18358fa7c0d2b9ef67df1db09f6702a72e3df1b90ca9cb16681d3fb84b0c1b67573d33a832b22506003a3e30b084fdade54dadcdb0128ff719e7ef2a696d0f24a0b4a85146a6ff38d870411df920d8236e151f716856dea7c7d4e675fca35b388b144bacfde055b204a9a30b7fb106b70b764d24f5f668457098a5e3c30b42b2a2f002c8b90a3a2cb5651b6b667c4672310aea5332e17447a262e49aa9737397cd1dc70e1b8c1ca5524546f3257010afd1fd48f913300b2a357f86467f02ea5d6d6b9bd299b97c8654737e7e6b6986197d8077d2b8d85cd982d154f90508dc78605fba80fdc2c9a56ac2dddfc74243eb4b37e848b4183a9d57aa627b806e5cfa56b32c7647c1da7db0442b3fc0936cfb7bdcd90468d4a010cd06272b05bd2a591c09149f033cc58ae78e10fd0f30ceed85e773395e3ef8c936830ba8dc1c7fc3b9021ff0cef4cfbdc67d9c9f73c11478b7fed27c5e0d1919c70ef46057a8239daf4211ea970c9d769eb18272dcbe5b27c8abc3c7e917264f38551e96d5233260034808d44ac80799164f5725ad249a7eb55483308ec80f5254c60ade9da0adb2974c5f90adf58ef11458368924a682fe9c1fad545b31de1f3ac3b928e29fb17de5c82a120706865a60dc7b4773cb2a75c2dc84957899c145bc0312929557754f23d35233fcc788d350539211150b8dce64f19d2c10d178842d79b2680ec72462de4c81df4db173c0cac5ec01d31daf69b8748945f603a00448689bf1cee9fdc68101daeeba4b1c6352979701fad18a8f6c57ab980a40a48f79927fa206b05030f17c04b895edaf61356458f113c4c05cc2b6054c418c9849730c0533b71c4476bf841058fa3c41cce51338e5cad71e3c1f030666f3cb66fefcb91df4d2886325e483115e191153eeeec978dc49532b35d8e21724c9d29577a04be7eecd49ea60768454db3908ab290709bc84549320ed4d475a5895023e1b2ad88760456bb52aaa519c119da733b841e994391964d1519b37c6b5b72df4836a7d9683a805615c5a7b061b3bad75d886f1b43275e91ed9fb1e7188075ae66b11e9be2f3fef1ae2cc7a2e612950fef888ef812c4ab6770995bc16c62df6696490519264c03d2ee77f17247a859ff1ad56b8fcd8727a000b93fa770debbcfa2d5f5add6904b58f76bd326fbc296d362fbf6bc20f2bf3c2cb245b203a370b4ab8272ac1ce059486f2c4f3262e1b2d3f6a8bcaf399491217f03bf4e0e761b770bd4eeb2cd832eb6696ebbd9d85e909a123459a1e1e1292428d31b6fa07c5c915f8c458f2e1baf97e5b51b8235ea36f02f333e5e70b2e417f0911a347a424981ae5e9bf2c5929d1d2c7408596820d084a8a22ef9effe2e8082ffdb9e36e165f64af87a6d9c63960cc5176a34e9cc3305cdaec907727e5fae501dc0af5ea91ce803fb7b104d0957642bec110d614c62ae5bf27801688b7711c5ac80de8f2daeafa304a9bdaca402780f53553a66d5ac73544d59eaf8c9d21dd73887a5142956e5d75eb41a8e18451fe2bec66ac2a966349ac60f06c5965b80412b79f007550a40b57966de7aaab23b09fa2f2171b748ba78e4f7fe122c1854cbca2890e74ff23ec9cfcb8bffb3b4f51c067119ca53fcb04f0bea9a3f6e7f29183605e0d1e0caaab0f44fec39bf312da9064e6f0ff3e3a798697e50dfbde1575dbf4f841013fbb5fcb0adad10c79a7dde405d4ae9c5a65eb8805a84a50085fced58d3581cbdea4546cf901eb8117f195eae8bdbae28ff21b25b6ed5c9ac8e3e9ededc09ba9769467b431c1248343b5a75b3b6e3ce2cdb670c8968e1f942584827f306bb4912e62250fd06534390e892b5523b321f135727f084362f7143344022fd8b4e91ff97cff85e87b902ba4bcf56240286e401f275eb540c1ad4f5d797346e9d4576064c14170df436fab7e4001620c6fc48cd21128a0aeb1e964002c9d47a82b96af8435cc772e104ef12d9257ce6a3514917d95f91503c17896e9adf9fa27f4b87b4d6a222666c7c39757bcdf89ac5cba21a7e0136b9713bb4951eac24331debefaae29105a7dcb6192e93774da99194003dbb5d810a3503c235f375abebb664d8bdba800b87d9d8796f681960e9a8aa1f31fcd5b5981fcd79f39c8ec67118321fc45a69229c60ebf90cc5e83ce568bf8ef469645ed7d9f3562f39638736aabce6abf61c8a9faac5408a5054899799eb115795eaeb7b4bd5ec95c81fd2461cba8b223402cf13b4913a4ab2346315f0e11056938159e655c0c19f6db0253a6cc03719371416b0224f37cba99d0ada3ed7f8a331f3e1a329d6179eb76be777857adb90d86663c4d84809c4a9664af05abdd76434a249af91d79f1319ccf6ba9914b681790fce1bee3c1edfce5a0dad68e4bd33e8af313d5f33c86b367c6c3064e4d542e285652ba56cfcc1462df63be30bc0b7b8e8dce16fa557f59f69124de90168ace2c1d50662c4162a52a7f822e54b1fdd0bb190b44203361324ab05ed137a6499eed6fd38444829a0599be41c286fa7d9544969e004f3f7d8232d5506c3850dcba819463b15d3bad00a68596d6ad166601ca9ba98d66948e24e942a042c17592c6709639c52806ab8512576e623e1c620148b54e2ff5f0be05b4b18afc5e325f084126b73dfb2204684e489202832d27e3e5aad1e2d2ee8555e3ec73576efea5d0262588ee79064f8d737a078bd377da21a665db72c38a5956d0e297bbf7428666aaf7f002255bacce194a22805324dc35ea7af14d598798a797c79e3c145e15d0366b30b1eb393517938bafb1fdcd694b7d3cdeee1cc7128a800fb9c81d6c03b9eaae6ad14433a468670f1a88312d6c74df53c1605a54296a08a5b47cbb98877b217146d066ba9d5680d36dcedb6f53daeadc7bf723e9fc81db6e3b4931356fd457add461d793c89f46720fbeb35c61dad2ba1ca4902c505781d06cbde709dc4051ea44d42770ee916f2b63b407869a5af08f58ecea90c3edeab808ade5d54bb1bcde425a97192e977ef1578356a0cf502bb602aef106a41984b41064e06c349812a8210ff99e54bd7f430d49cd96874a1c17ac2b20bd0b641aac52fa523cd1056367ffd3d3d94d4decf4eb0d91af03bc0223dd3a4bd344e2e39dc8da0f2850a73fd514c3968d6c16dc89a8a6339937c93e937ed1e7b3923093aa343360ebabd82ff16c5f35c32f33ec5187494964b9cbc85bab4951e880a00a61194a6ed70379ba93d5f6d3cd04b9ebc6c4484df2a1a32f3038f9fcb6e6bff28cc141ecf200468ed820f31359e243f8ab751d4199bfb024a7f04b3f7eff50bd18cfc82981b151f3d4fea1005ba8d8c090739bb585547d022c061114930c607a297db9a31dbbb14086a25028bd777408339f97d84b47b3fbfc9674b499d3c325877b678e4c907a8e35ea8ea2f3f5574ead77f76ede7a6b155e2780b905be69b1ffe3e070187bb15c14520be1cadbe1fde5b615a14355f5ad5ba0bb7ce009386ccc7f3a1deff693240370d4e28ae8a2e87757ec185684fe491b2176fde0c117fae7ca3bf493d75a7a2791612f746745e38a22092324d53b72c7114dd891105f69a96bfb107121edbcb2c13a54a58d325ab31b725db65c66cb29d7b490945954d82e3e0904af14a38c5f104c929fd578737c8bf53beca0cf1a2f33579adeb0944294316527dfeceed8f9880b0fa2e6edb0237fcfa0766719d3dbe3d7726447c51e62fb17496716e52508addafa9b6daa390ea2c2a771bbb3f42cf4240cc38e2b01532ef82740fd3e30199ee301c6ae7a2be7aa7b14d513841f8800e8a605143354c2a68229d4adfa69a96e549dfac704f651e3a6b09a92fd69806020442e78ed229128b15d4b9f7f148bcbaa79f94acc1452ff5734c1aa839121749af484774975446e7e2b6fbeb9b893d3b32f24e358aba29960b224a870b870e0c9889d01b52cb011e62d4801d3cee5f4a49ab8b8356f26253847193d15ded722bfb8e0aad7945901e673167867e563805cd79b112dc479a754578203ff08d75329b98e336124b2ba276cdfa77506f240fc79667e7fb450cb8c4cf24d96c5997731bce372c42cff3398ab248593d3782f5338b6880603820534602beddddb67bc05870f56f006f7957e9b0bb8d123a1aa5a8c990dc48cbad27b923b72496ab27b67c778754d9e173f459c4044f73f6c6fdcfce72766edb4cc7562ade3f824a1bee9a5f5a1332ff89d1e23201900e6dcc42f4bc3270c1a3e98073b657bf8c9c25835dce4d97733dc1a7ddfe6c2c7b13da093469873d90737f3dfd36d30b6fb4c77953814ca5dd49eabaed387ff7e88d55df3e8e6386691a1c6cf74e7af52837f7a88654f71170b79158c6ef0eac1e9aa60e042c6b102574abed47f7027a5574bb680980a61c1c56d765f3617d6fd9515c4a9c9300a102479128c0c8138b682751d4eeeaa9adcee36a9668d02c6bea172f1ad32bb5d0ed7cc0b713af8fb0ad13fede9e27e5e095b647f13e00e541349170b45a4621accaa4e7796047ee75e248634f6d9af69183f310ac8842a26682550e1a8128b644bc6db4d33f9b0dc1948efc5043657b4027f019b48153eaafa879eae0586ac3a9998764663bbe32d4ed48caa6cf2c7e1c68e253a1417ad12023a2830e29b44e3d9242e6f6974dc3a1bfc7d46fdcb955109cc453c09df7896df3f24260a37e8affe520d0eacb65d8927cd813d295468baa7bfd2ff1aac3743e3d62f69275b1850e41458ce4d35383d6082d3edbe493d3f7ecaf6c5114ef8bc2868ffafd7a35c3ff58abf3256e942d82947b5472761263a61a7f25652643c3150503109f696938fbc566212e5e81d4243d7efa2dc77bb3044bd73bd4e0de8d3f6f0c3314b64053c84deff643c24af6524832e1043ef70aa3d8847f9e33f6276c63706623eb0de2adb7b96b344c5c8db5c221ae20fb1997fe89c2778cb9965f447216a6ab1a31a8184dadd7cec1cb2666420636825bd843dc6307515a1623958c877d28e44a4cbf7dbccf1a4dc2a0aefd096a67912d57c81460c6adc62e856e90981186962df8e0b08be2f47365584bdaff77d3dcd8a05ff9d1cb28c04d11af08963df7f9af9030dfdbc05d737b8d527c4de3ffee0c572aadf7af0192c9a073c52c6ea2e222952cd3fd3212973eb4b0adf9172466b8bd3a634476a5d951f820ffc6ed71c5e5a0f31e51809f9112ea00952cd04acaff9b895a6797137c55de66868c60fff9614fdf8d3340e596f58aa5f500ef94c0bd9ddded424acea8646ea72828d5d3ef9a79b8c71f1c96659c673a7ea4e6a54a973965796d8ffa8f950ba26b9adf0497a69be3a2086476ab12407b76b4ac868052599c322aebba992c73bb0e6f7ca1db012f19ca5217bc87e38606912df11af22617130fcb096067b369e4618a15e4c768fa1b70cc592e81f010a2ca764b6aa0ecdf0b173f4c7f09954a648e27813464aabde6df359ebd962f682948f34e88d7bc1780996313f9afe4901f39dec8449f222953d07256a171bfe59c113a3ec7dba66cd1bf65803643f511bf715f277e5b00138cc8dd10db43b32def67c6bb05a2f3d1716bcc41ef4c5f51ca4363d6a4face7deacaffab544a7b9a943d901254416cba59d6e094f415f8993b298c9a53cb8460e85406d0e452ab848b3934da40403d998123027c6bb033c609ff8b61b9e28095895bcd97a525d1f368a8c234ab4289585afa5f714ae9ed1f44bac8067f24e0dd56dbe6d0c5344dfb37823b538372d3fb2009b159660d376cb1ded95dd522f039b9b3976c43a721f3479ce87d70e78a667b660f1f3fa3905090b3437ae46a23785102e0b17841cb2860163a1d2666742c39a8b16003a002b3e66fd830e6b6f5d1a3794877f84157aa9d4d3be4d9475340afb5794d695f88b495148ea71981b919ccbf97498e2f6a973e3811c11501291e468f238c0661c9531b0f528f2dbc7d042276542002300b7ff11dc62d37800fbb70ef1b74fb8c14756bd2cf78ff35e1d51dbb4b6b3d23bea7ce816f1696afbb25371236f55cb67232ff5c3c31865d98233438961518b90746f699f646106e707b4b2a0aea0ee9b83ab4b59e7340b6cd26388f1867c9c4fd6ab57c5566f6459ec5e65959fd4588f7230a9b8b485dbc294cd12d1eefecd3dd1e7c1ba80debce1645277df08e98de935464a8ff1d046b529098895921326f975980047e190c05f46e987e9482e3648d063d8f6f1f423d039f67916565d867c5568102cf1946fe9b0d9d949c52e6cc34c983f43a6e895072b325cedbdf0eb0383b6f9e2d744cd895d28ea732532b4f71c1a25da7d2dc5c22c4129b0529fd7869b07d06601e620938dea9e16b61a44da31b2f655c37df9f59b910c20423c6b7438ba1de6ad40d5ef5bb8743e8469807afa5eb2ca4dd353c382a01935336e8ea2852ab0b53c455aa4e55f94254693286bc51d345691d35fdeee543b236cda1e812fb9df524d44534f6a9b91a2975650333326321537d1b4b3d00a88e13f415202b84fc47df60a0d1c177a1c19440b7c2cc6dc3215151c87c6b576bd04134373f11d9c46a375491de7ae127b941bc2c2b798cefc63ece6419a918ffd4caca1985c3bf5772dd24955ef69b45bf3e1d510fb1974218f89ada63c8ac19b1b570eb9c0799bb485dd8e0ae61c2fb35e305ef3010e9da6c01e98b469fec0b981e35e5c4ed7abd75a780ee3036bb73aae2e70ebca459779f0a660649b03d2cd3fa3640898930095aa5c671f2a169f201a261248b2d618684a98ef321982772831c91c7f123a077882e538c17d2750d147a93c43393f8ee718ad17562e64afd0ffa0a498428735c3b5e31bc2985e7c3851f6c62c4011984bd2f5618efc9b249b1b59b6ecd1caf5738a0631e5867be0bbf525c3e1105a68832d413583ede3691ff26e0cce450357757590fc54abc0c1ba486a6dacdfb91bcf2250d1b60e2e14f2e34362c278e3f4b5d9e5f5d3082bda0012321ba55584217f922a9d54620bff8661f405bf6dbf6aba8bfbaafddfe04aca58e09df22d8272c4a15074e30c1edaa7e7ae185994079daae5a7c468c8d4ac5d8f6b6466daded4d72e65892075d16af78fecc6c20940cf8d2bbf7cbc207e67b65b5b6b352245e72fac29999dc8a022a0910946f02320ea3fa0c513fbb4695f831505652bcd8de6257625579cfdd29b398d57792e90cb239a079b1a7ae9e6331d206c479527cadab45903f1b76562265e72daef74df1654a50702ee70c7d63aab48fbd8d6893ccdd69a84ec00f6b2ff5077c44dc3d69cc256dde725aab693a2d33fd7f99dfabfcba4ba581fe8ac281ca449b7a910167d3a4f7ef4e860f24d72a5115450bfab1153e527c6b84aeb9ee4fd37080fbb47d1ef395ca029a91c0e8501ec5eec791e0cd1ad8d45344f25f7d51d2da2c75bb5e2a8e8ab412b0e76f4f36315e38e99a508e36855bf9122005a5ee88c3befbb2522c7e41bfe215fca7b8cd4aa6c0b7ece88492bcd535504fb2640ba6f6c656c65267349818029fbbae1e48d844ce20cc644f92fd2a881a79a33777815438c4ee9731f25e6df872f1884594e030e6604d467f3ec2ad5d5210014f1efd50457ff6fb8d14cb592ef3e0e772152ef40fd52cdbefd0bb1fb521c6101f983eb487b5603b71f314b429d4a20329feae59e6d98720908f4ce71307d411d0c806ac62f959c70192cbe8e0ed4fbf607be4f018bb096be78b067679d233704f374362ea4424dc1e16e46d78ddedef215591c04b70f34cd7ae97469abf238d81411e11d5dbe3129e284e733bb92da8e55a46b33e2a4b0f245e92b17a6b31d08184151c8f6d6e73bcff4de701c89282c4f50c41e8eb3cbfa642ee01bf0e60f12c22d713f4549eb81236dd7ca538439baa4232ef04261d3b9960fa9a514f3c039d490a70d3152039eef04d3c2e148212536d2d6a69e6b1d2ae8e30367b4ad1aab74f6fd9e1909bd7389416dbc98ab14d82c4f67c3d66c1a52a885cf654bee0c82adf22155d05fca113acf89e6ac0e00869129dc19a09fd3f2733c39010a31df2f9a79527018cf40ee5b4b4b6915d5d8e610cdf909da5009a2b887ca7ba44e462a4e9921fb2ad3bcb90cb8ee6ff4f0e03893332c5f922b57810e51f696c7ecae0e1d7403ce221d36fcd93b2f95ede5c8b3761205e930bfc46ac2d66282ff5c554261e352ffaf0448f8cb47874b1f329ffbc8c5e1989ca611ece4e428b16bee0a75aed825d698c62b5ed6d31a10444701dc7323cc6e687521bb7bcd4c59ab1cb68d942734aebdc21be782df022e72fd316c07928a53705da302855364368592498729b252acbb79d2f9aa5f7954a0c5bbed3417c4c2a689496146815261035ec2261d014b25cc612de737167bb668474f4cd086f8a2c607c7fdcf28613ed3348b1757a92d56be63e01655715983b88f492d308377e50698068e23f072b8f712bba5012cfec1739472ad31c4a3aef7f2693750a6b7f37728ed4ff6c72f1d3a5be1d86199e01b685df031e28faf1aab9c71b004a08be174a821ee073e0def9f8cd5a8fce8ba3e29918c997a37dcba016a06eecdecc57a754da6d5a92fdabf19d9048497d9c4083fa4f913c0b29f333580410a74d2f396dccdb5b4a75528fdad4101c7a7371f10288fbadbd25354a180cae6049d2318812617c4f86e2d7fe8ff8f7259ef1c69f03aaa339064bcfb141d588a689e8256c6b5c8ecbe98d4018313976f7bcd9642c948188c2c5467ac07e7fe1c9d69aa99e9f93386f703b0e6d800e4ecdf86175e5013e6e20b300e618c724ec54e4d8827155049854d5a8a7abf65052463dee0bbba83d81e4db76551d8866da88280bcdf4d8c25a130942a35dbeb6c6f44dcef2266e798b0999684e3bd2b9f51bccece4a748e037491d26fede1d84d38705b1924a3c273079ce92c54f55af8d7397c49fc87d4512326cbd73e82bc2e6ce1fb3e009fcdc7110385edbae8fb4aab6449f94cf20b6384aa78203209b47310ff80371ffeb9b4c88971ea35ec34ae1fc7944bc279159ee6a10eff69c8692eca3e270f3589c615a4cb5eb91d36dd8ba3d3558c9f45ebca53f4ee1e62e80deacc70eb592a9a3d8e986cc477fc7bbb01263cef0d4b2f64b4c97b8b662dd04b682fb6738dfe4ec1e26443773523a7095d4dc50af6d3ca79e6f767d9075cdc78f4ca57a291971c42cd86e0010215ee5fa2e5d12398d8ab5133492d91fae9f181be4bdd267bef98933e5dfcebc30f52c44f1706203c1c4d5c538b9afe4a3150efd409b962be8474a5750dbe9a5948c54956bf11241bfca758d8d7672dfffcb53d2d487b1b388e3b5395ad6b135622b7880f7f5535df7692ea642f1ff88ad0bdbfce2f47f25b819e6412c23456fcbb70bcf1373ab37ec73a83f7e3b1678475470754e3597cc3886624f39d221a8721d895e75723c9464f20fa98e44824c109e343a2086356ad5cb223de0e209065e33f7f63550f4ad85097d9e2c725492e37edade4b533729bb6ff8b6267af6960d2b44d451ebf61a74920664d6f3ef5d5ff99e53171f6798ac52d92035f4620816b5816ab796ab33ed3041be36e53363203886644fbcf2c6eb5a2f3629506eafebcf5b4dfc3329533f6399b6abd24148f3184aede8607902ef60cd16232f73e9758960a524afca0b2eddfd1114d59417cad4a723bd5460b902955afb90bc89f26fe83f5bda70581d6d0da2d1ca81f1c645780ef2ec70966cecbb0468093eda2ca23a73b92ff96e3b280bbd91a6411b4968d1e0a8b21d016d07d52ce4930e22b7697adbf1f9deedaebd8d21a59121b36a4d477d4d761cfca0bc02f276f5fb03a1e20244dd96244fbde1bee19470d8bc9d033481d390e2d3064266442f7298a7dbae4524eb644abd223bf61dc95877aa5c2dcad819ae303ad5bcd7db3142c9cddf075668eb4d1934e4e36f34fc7697abdafdd0dcb7d286402da0d297bb941019e2e1140a52715310663cfeeec327922980302b2ea46b958bad566151b53c93dde270fea513944d1b0910ad29772c6f9db74f60f62dae1dddb62a007e0a8cf42c9162d48d5f3421710bb5313c82b8969c82b285c75c38c6ee890247a6138b017333d8538b464c53fa8a010610758de840f1aab41ff9a808a78d29fcf910f93409129b7397473622b7270942bd987fdd4b09d652720346ec499e3ace6128a99028015853a5191f594064778c9bed99c4600b3eec80092bc916e52fc36a4bed0765eb21f863b331bb99d01377ea38fc6391725cb7f63c88a6993b486ffffaacad1122ab7ba14183a1e0db843656cafceb8c679461194fbebb00ca24039fce59fb34c3675cb486a65db8c7019ec16253f1785d9fc17fd7154d058f01e7a3a6a7317c01b49e683817de9dd762e6cea6fb6da8941d7b4844f0b9a307867bf942dc9751e7f695a9fead8cb89d2c78ba0148c40e3057791ee33f4c8c93fdf2336bcaeef89f2e57674c06956673d8e3a85ed2903447b2e38579b7c905bee2632ecd1f0a19e88ee95e2988d32e52893d25ab47542144b4b9b45d3e58c7543d8086dc20e5b7f35a3ea9d7742fef6a1daf25c06774042b860d6538cbc92d458df576d0ce222d3747e9925d45e476d94675a31b373ddd76fd7bbac86ba1a019d59c27af0eb41d95be79289f2d39e4238a2aca272b3fff0839c358d3d293700ecead08853b2c2620c2f5226be147e83e6e9b6290fec596124fc57d67021085bac598b1b15f1e84f642f5f551aaea9ed1ca3f475fa84f296db761a4655327ffc767d52b209289dfd87cabe9373e87d3a43e9704ee70202512ffa7915d5576842a7f69a67120192b8dd072566e1e427f580d7abe05e8d52522e2662de10b2601cc943caefdf0bb65be1e6b37b9c5e7fe35f4b2d7bf94e321efc01ef3ae7703ea06905616222f1cecfd815686f45348c4feae31acd1c43e316da9217bbae38f81aef1862b7ed90531a911fe62ee215f6a85b857aa9f4e04086c87a2996b75e09948edfd1aeb7a54e0ee8640d70cec4d548ccdeccb45b974a92a1c18fda0d2f762aec7d7acb3da171aca1c3ff8fbfcb3ec1c98b010877b5b994c76bb1635c5c98bcaed949fe73d95fc3147b56c49c75e93488b0bbd83d9a93b819fe607f5712360ac3720b69ed782a0682df7c941af4f51f46301ee7aeaae32e8c5a46759997c4583c182d6e20c212c5422714c126501d73b34c7b754fca4bf8313f16c7fb41b8d72de514c7815da88df8fe15f39aff62b70dabaeb5028b2162b0191202b82396ba1007d34a236717f1fdce1efa14e91a604b9590d33b248e26d974444b8d4f1d5e980a714a24eb1eb9ae8a93846fd155352f38d908c7ba15def9cb4c91f9142f00b75756b5d4d6fa0ed7cde6d274ca2ba20e7ab0c5a809e902a41f68cad5f93177acf18e29b43727e6b89cef612acb282e118319a421d746b2b3c8ce407fe8d3a122031d299c69dae059f87c509bdf7b6ca29b319d49f3106101f1dfa510dbc7766e880b694203dfd615357dd65422f8e2937dcd74a59c6275012a9a4ad3531d93949e4106e20285a616a38bbd7cecf9399065af3da12e9c53723aaec3b576a7119082f9552008e7ee3d2fdb2e1543317e9c68da68957182cffe2e93a7209795e02dea86070dd2e92db5c7b6450c386e3f63a57b18a95247cc21edc9cd25830c1150262ba9d4091e94974760da1074faa1620d71a26d8d1d56557eb48f02018693f98f82f6ee5aca23db3d6c484421eb74c5caa9f040ad19a9669332226b0e7af4b27525747adbcc5955274971d0582051f34260ea4f000820e12448fb8b3a6cb21d9b63747305bcef0827ac9b0981a635954332c84a939fd47df2a2068af7a19819be0a8496dc2c249f14b662228a72f86223feb78bf07351171a53cf72108dd19d6f0e131ba3774bc418585e59155a4d7424a4a2ccda85b3de4b2fd33e2bf2602fb727cfb2dcc1bc933633d511b6b30cc3206533b1894b414159c60447315d1293faade0dba5079c71f909bdcd5c1dc1597972313a89cec9e2079615d2f57dc7e869b14c41b2c3d8b379c681b35ba085671843f17e415d11ec4158a5cb5d3e43c02034c8befab50d47c5309ebe2fed8cb3f07510e4fce09e31b30ef711e744f342f90722f862b7ada6299d4a8126d69260cbbf08bbb814a12c706ff58a8d1fd2435934d5a9743db21b3fa65b81fd0dd9ec2d7262a80278b38c5da44af206cac7ea0a588cb3ab78181d8741e9a1440eb152ac81bf79391d747b7cb91f9dab5056aa41f1f35acc13efcbd17c9d0a4a982c171eb422f73b9035acd829619506b905da96ca7d4c4d627f307630905a1b4557ae88edf2eb3eba26f3ebd96f586fb433acfacbdd19d3cd72611f27b948d50897709aed110495fa7e4810d99d0290d0a7eec55c5259d5cb431fcdf1c067302327a48ff8f2dc61783afea4ad3fea3af66c8668fa62a0a227eab012d90d019f7a12b8f1e8c541d6733d2bb37fcfd93c473088a266a2922139948cc923dab52b6df1be0510d4559912de7749a2526c05d78e0a85e13060780dffbf5d6c488b24798902b7d9e9f774362ce03fff12251765fb7c97bd66cdddfcf67daea8d1a9c59eba702aca5c316e4a9b7b6d97002a755129d250e917b0064d3723a9c50d87aeb90299436ccd2e0e7af1bca3a3ae33b8fe6b8b788b2450c2206339ca98787a7171db453c57f1d58b93b39d9fe92ee8e5e6e3c7ad46f988d60b25e4770228319c821a3df95c085e54a05519d44bef3d59cef3aced5c74880e523e27f3b6897f3248d36feb7a678d9390aaa1e320b7ba02cfd81115421d6a872cf1ed7e2dacee3825d0b8190e6792ea975852c9bc1fbdde0e3cbbaa016b29318ae5be9a47fedd9eb12a3a8318f0169c353809a064a5d519998af19fdd21c3989504ac721de67362e51bd8c05762120e437b0122f97e81658694fecc73caa71f467ecd3cc4a372cbacc502b01e48cbf11135d7854c6bd3fd941cd855848a79ebc99193d1314101ce9c7b8a0c224c90e8ebc297cf918934e459076b00ec0f0a6880e1af43de15e3ec58e4b22acff4732db9a6b9721de352a8485fb7b0a61db562b7d1891be806da05746e81482a3c517d5e61dbd53ecbaac1957cf9d353bf3e62e6eb6ca625644e92dd18912671a4dd6f7afb4dd386a7fa6b2ac9c2a317191847afa4ce48b3b4f90cd561048c46ee9d2e9afa0fdcc04617d40d705333cb1721a588aa1346908dd7256a93581a637b51f95ffc7fdf151af4d410555b4459e518a3d1881eab37e8f840a047b02ab675c50f5f99411fd71ddc228b361e276155d5dc413c9566e4106ac0ad3eafe136e0990a3f1fd2afeecd391715021877bb23ec212e25a68c6c941a55a3de924a72841aa539127fccbad6b8f18912477cf7ba4417a665c2eaa9b30e7f152febdf5193f8ef93da780974e35b02d3ef805cc972c36406afd5c7761ff80c8c3a181a4024bfd160e7ebadb29e7bf84b68d30f56f8bfc9f2a5b0fd02c6fdf01db417127e565c0248da1ec74a6e73e830dae6aef7fc1edaec4c015f26665f1afa805f524d4bdd6f1182d3c746c547b9c7002b0750621dd2edd1b9ad8591efe611ab46af3810a65c9ef0d3c920e0a878b6f06e0984ec82f43c8b63e52f338307f2a34be5a3043d0166a16327a9bf4903056adb4019f4b1bf34bb48ba40f374285335c20e12f837e100ad96a79d52d74e9f9ba721afca6115bbf5e97087988a8ce6f9ef784213e53e9f037c715560c64ed7628d7834ac900ac50873283cdc2d0cd3d6d4c4bce4c1ca08ad494a69320bb1b84c3ab4a8b284e6a3479815054afe198edd73660e80faeb0f4684ad2db4d057f028dd02f25d89c2a8fcb932a30f9e9c1f0479031dd51c7aa03bd6e65d519306d9bade2bbb505523d3f7a242628b7386419f7157aa8116180c266a313636052475ca5988d2a51881ff72ab1e218e288ffbe8f6774c5db4d881925760289275c8c480ceae201060d9637a7b99c1b24428a760c100f8fae725906737d6508e2650c387552f0b1273994ad9acffebd794ce0e1d51d2662bcf60384fcfa2cf0a8d3629a6c1066e72655afcd5a9f18695eb85658e2fa7d0a739d5d423c640eaa11a2a356af1259a5caf447f808217c9d5bace90d0f7892c0728592882e537a2459a74780aeece8a0ebc4e80ddf61ae166fd78284335850220269e3420ec95a02fa2c4e5be85fc05b5779f350024169185b958e7be77c69ee7722ec27372c23e30845c235066b5142c9920e047ce09f255873fcea3c1a1a9b5a824336aaaea37eedc67214d329600d4c4154e74da2f5286ec178fa144d27ab9b82e288abe0e10ef0de0d7744d6480086c2b013e49f7893953790ad1d066a73b7544a6a0153ab5bcc0923e239a3ab1720fa0c8bcdc68c6dc77be0d15742968249aed98b2980b648d5213ba79a16c1699f866ee1fdaa43ef75ef9fefe86ad52d3d3f11b1cdb035bb23aa3204e3c00ce2bfdcaaab32710ba5ccfc9b6e70d5d50faa88aced93b2e5296e353615f8ec23103a964bb08c50a1e0a0e98bc6a013dc5c0c338275d1f160bbf4b73dd3cb097048edd1676ad0d0d9bbab1ab61fb609f257c4ce63bf1614cc97085cd8909ee348e2f4112752f6f90ceb3fe7e495be95ebe99be6a324702765b41ada115559e04954e641aab9e97d3cecf512fb7a667dd4efde8d529c5bab09be81f3494103369fcd41f8296b8b2d0a010c35d1c0eabea93652f74a5289de46674c308a8da5febc0f710318641c995a1b2f02f113adb49ce8afba9776982d5fa0b4b98e44089b4ab2afa177192727f22cf62d133ae835dcc25abc18061ae3f0af5fc651eaa368e813e0b57907770865398da6872f0e8e41462ea25754148e0700f2e561f68b69f57fd8a99493bde370da8079e77e38651761ba0f214ee31abf317311b50192b40f0a695a519ccf53e9658d3b3e07e3b07f4dfe5188886ea4ef7eb6de7b995eb09b874640ecb2e99c6730b6c7a6947295ca4df14f095af26f003cbdf4a6d82ebb35fb9088cbaff41ca7f64c48e4b030958de90f9e192bfab041cc19bdd59070a97004c915ab025690ee58a888cf499b8ae4f9fde4b07a209f5a33ff42871a99fa7a7e438524915d7499e13a00c17f48fb93a8d1cb6d4f9cd0799960f0f5420abecaa859a74c437184ae5e2c46edd5f570b0d0b0b73335d3664aefc38a03e0f56044c5a89b20b2799948123536ea3937394edac2bccde22e74e5229109df736f0631de6e3931f01b9bd296fe6ca36da6a36ea03b4f1c4f3a187d85537ec88ff97450cd4b439384d9b3a536355f390779337e993971491861f8018529e4c4da9583b2b47a7d6616f6f7fa8a22aaa21f5165cf6c1fea7ab945f7859710f16fc35e2f334525451ffce26583623b3b62311adda31845576fae0d211fc0d59201563f9cf1a4b80767c7b284760a6cd65f613bd38b7419c68768f654e5a13eb67c7b5650157b3f0860d0238310b297e4d3186758781d806fd50e068556b6e0a0ea811fa763dd9c318251fa9ca76faf607c8bb7656ec4c06ce6d91d92982a546c7e5ebcc9b96c6c111c11b260f940bd2a1bc93c420f6d3c6ffa47847d76667b01892aacbfa50d07695557a5af66ec0b4dc510040e967225214cddd373057f5e0e800b83a1eeae8ea0e21e2743335d009287a3c13d624e60f0c53021019029722e62d39d9c56287b15dad5d2ef641f25660a2efafad2096c1e3fab61e832b39c65d3595d6634b0f6c1cec7553473bed9f2bffbf1c7f811924d745d17fb175f459d595845461d6bb707446914db9cd824f34178b5256dd9976c2296c1e501861f644bdf96303d13ffed58efb25e75dee3907c61082c200b41d9691762c953d00c42f604cf49c5b7455209e0993cc23d7a0af6882af6b6adb1a6fdad61eb09c5178ed2ad5d2dea7ee3f6eb052b9080bccaf478287a1e2dc9df1f2908011a088e5c6ffec02c1c51762e9aaf9c19ff7039d8a9c8df86e9531033d799f72a4d701a5804dbddeccdba7fd48495fc27d394173d17abb97ca923e6574c64c59a3d4af724eb78b349f53aabc4368a83cf82f8bbcee5765901813af6c3e9f09b7a55d91c4a179c34e2bed2276e0a8cd03b5b7e91c4529287186cedf749e3be070be4c5bb5177ee707c4815d56df6b35981ed02f0738185777acbf11d309a92f3fc71e09d73cb972adc4154568769790ce6ba03ee9e3b1992b8cd5ebdfbff705ea49f889859dea9bdf98a8a97846d1bcd4e07e4baac92b4f29a4717ca6a5d5741015c5e3d69f2b79eec1dc9bbe547715879c161863fd0b64dbb51bc13b807c189bded13b7d9fa63ee67d2ffe0e901cb149f4c5115809f91b85b7da80394bf864253dbffa7cb027d82bf2258cb4f1c35e74144a1b25cae1e756c54daa60f7c6948c9376d36631310e9322cd443de3d3e4daa2b05b98a33dd8830e78a06e071ae492dec0639a33224f2c9b272584c21833902eaf9eef9de2397cb9412ae9ddf1b4c3e3c47e41fb9b5b26c128f16e4971829b3df2eea3cfad7ac07fd952111c0c2fa9d2056ad4b0c08fbb61b513675c8114f6110a260ec382ce45fd4be256a743e7e35963b364ceef039dfb15b5819cfdb2c4f3495e9a190e9a89b57ae6e7534c729cf867ac7f60c325b7913349f805c3adfdabdf5642d3f3d1088547bd36bf7b51a4a6458cdd86fd60a089f3346bb600ab5d4aeb26a098e515511e714b0237cb7a24aade2eb5bc5fb63d4b2cb86390bf9e1fcda5f8afe4dafbf11d34e49577d935d794b17d995b8194fd50e1a338c996ad2c50b0d8c7eb4519f0ec96046082eb24d3fb39cad02776e260440359926ad8ad2e5b3dc4418b9379fccb4a1a2b57ad2d0b2c76d4ed54855c0479e27e071fa78716fd5cc5f6eabd03febfdf23e4608a7f8224da56f7d021cb807445f1aea1a0d32a871f14d618f14746423c0a29ad9d4da071abf37fe9940af2669c8a557baa33882898443aae5abc57daee655acdbe4a9a8a8f85a0eae5a8f6e907990e0a6c3d0e1b6c8a4be01031d317b9f733712ebc3d17c92b210623ed26b410e07aee13a3c1e5e3a4e6c06aac71538f926151519ddfdef64c27bdd9ee430beeaecb4698ad50f504aca434e10b2d85496ba64303d07cf076f3a07289585962087b605014a14c5871f8a216914cfd6124eed0569d7e99804fe63bbebfe09bc885838cc997c48f656f2ae2dfcccdf1a8c292fcdb68ac67799400c26e3fc9ffd7f6ebccdbd5d42e7d314b987fec751937d55a072e2893b6b90e927409ba513198783241d13894ad9434e057445a577845e241fb254c38022ab70873917cda2b55f08207825f34cc201d6a9e37bdb86c5dd5b44cccae01bdb3f11821d5a3d67ffa65fe54534a46890964654230589cf3e406af857256878bf3d134eec94dc57ff73219ebc9541233fb64437fb2970393f62d0c718ece62f2f5824cf4d7f3b9e18258b05ab9285e508762b2e7ec0d5d5bf3da59555727e97139e5d63af4b609486a861597e2ac05449396216e4124c8062239926bda7de2879302dfac21aed2d9355a01c8fcce9d753c98c230f261ad7129e9b047dc3903f242f2013de1839d1eb7bae8f3a6018ac6235bba0d79b7e3025fd91750a15b11d78b6ac8a1ca653154af97f08889783af6ffe15431096fcaa509a69376675dbb023048bf7b651af515da317131b2de81e5993783e777d2c73b1f13bde7700c2c9d87ce8da0755c9a25b5a0eb1970baad081f29b025e3ac2afe125dab683402b588e709eab3caa4be76f29be242b86110062b09f7b6401b2ea98196773920239f9b6941251fef6cdb9e60ec73fef3c09122aca20e20947b01cc7a323705c0a98b02acde7632926e9cb9d1c54b4ad2f263bca92c370f9fcbc274430e1a0fb9d4e6dbb0f15b7b864525e982c6c7959cb0486e1cfb93f4794f9f4e4cae8c11b04e67a1c0c4e9a926f1375fa113a136516538d9d18939eadd6c3d17720ed85246d4b1df1587c20600044f68df31c7e1a40644a39e5d85843bc443b0e3ddac0ae650b09ce0556bcae9fa58e43ac6907fd993db4731de0416a29d1ad4942da06f4025afb865692339e93ae396757cb45342067cac0738abaf2ddd2adc9d0ebfe4eb2684d7839e937108a7d8d4c18aa5ed25266fd435fc136d69a36a583a898f3e21bd1d12be84c5d6c6182199f6a2418fb4b26c19affd57dcab0ef59bbbd247cb905093a259b1758703ba89d0b454472b34ce9c48bcdec03a0cf3179a9787031b9cf2c92ff8731963af91b1f3a360e72d9ecd52b82ee88783b55e74170aefc3fdf82ec84d9578195fd64cadfb96779b6b5cd418f78fcdee6591836c2fe3d15782d02279fe6c287b29db77d26e9d6491ecc9de14e681c2e950a6385f2e42fad1bde94fad6d42ddada648a3c924a01c0d5d1e8d2e240147d4fe1893136313c9e934b35c8463bac646c71e964f85bbb4bf4a3f76f1730e8def63273e0a4bff5d7786d2ee0176446c085a48ad8988ae4cd3456b0dc8c426c12ff3e17886bdef1ce791c68ccb6dfe7f98a7d0bf8b699f4298b10eb7e116089b9c934e7216c3a92525471c9a47211d32d8b82268eee17a8618d97442330bfdf68ff92ecb81da4bac3a3cab7505e31a6ef011775c342657ebe4b0503a5a3421c5ce8b0ced5807c05040e559f293ec07eb3be4f8712505cafa56db2507eed30dd03d2f0dd6747741fc62aa5266fcd8250ed215bcba855596c7883b947958af5223d6074113222e758a45421100bffde059c8dc4f5e7e4201536ebf439b80adf3d973426cc2feb4bbd78a8e12c22909750327d8b1b911bf2fd8d460471343e2db08234096119959557368f74a9d7ea14bb81ac592a64a90f6a8df43332b97f0dacf34ff95aeafcff716225ec6181a60940dc41351f86b49f02ad66cc21b57a2d139f683256e93c46eb769f0dbf36c22321ec4318411ac519d5f3bca2d60bab9bcef7197ebb0a4e8a0f13079b616505ed415083613d025604508a26c14b922a785c858f7976fe680f0319fcde8d62503942509305a5d5b4f7db70c6dedc5b0ade6661bf1566a4386027acf7247702e7fc6553a7daa9e65f9bd6b4164547d05d316371bc8ab03f657e66a166c9e6a745b9f5b3d5f55897715e35a73d89ed38a12f1ac8cb8a09c856483c7ebaa441859b206d83c604e02bf070eecb039560c1e81c9b04184a1baa19f4ba920c4db2b1f0b01db069134228de599825f7db3e360c9e7c40bd43178f3184b2032978a69b40ce865ea3c3a856aac0b66f97e40c5021bca0d3cda5dbc09485cd360f9ddf5c335ec77cbbae037c424ada0cbbc20666d5a15a9349e30bb017626f4eaed0fa689e6699d63ed2e3da429170989bec6d696d64ae6309a32f0e20284832de23470bc737201ffe14444bc7b877eff9957697b6f375ccfbce853c8db55673e3c4d68f9ea54682d9a2f9f89488031351a43f98f06d4fee0bacba453d41ef6ca2aaa6b7e99cdfc147c503c0fbb17957ff01c3ce518b6950af4811c77e38bc9fc2a0f4a9ec6bddf818a78e7a06fd51a92a47ba7ee4e027286042c5fe46a8a9a25c837955ec256d018cfc7144abe65a10eab32f63472c5ff4dc8cd0ea4ead339e2bced1b084c568c2423c40328a89ce41a13f3f3ba490172ad06a7985de5bb234e8ba068caa2678e2a78202de5097f38c2d3aa7f8883558ea8a18e9f65621836c3f5575277ed5a7de2e287eaaeafd093b32b9a592cd9751627f89bdfc1eef163d491f6a66e16d44da14e079b1ec5ceec68c92e9aa08b7b1751bd8eaf665436774ce833712c80e3a5b939c44dad38d4dddfcef42242dcbfa236b72734fb2bf8b8f6cdd2e3564448754ded9572c4d6a4f14fae8e9f73e544e2aec02fb14dffa047e603014dae9d0407485ba6dbb019ad681be531a87b3aea4c3e67ecc1a956df69840cc6422529135e370d1d2d78fad82b813a216e5bb94a52cebf96144066293fc1bff27118411483522dad25dfc509ca56ad6680e3d370db8a48d5d3827e90a2cd644b698af9e856e63c9ef9c098ca9f5723d01b381663887ee0e18ee06b36f15477d29944742f39a873b64a48424991d2b52e12865c092be4d606bc167c34c85a531a8f3ebdb958ef3b0fc5524f9df594a48408715e166251d0acfcdb17986d587bc58f9c25be2bc0d9ee42d64a0224d8abcab374f3bc4e59fb2088e1096fd28a18129eff1cbb176ab483087d43c62a81deeae7289958842355d66c06654c2c3c7b94509d12a32a36c9923a873048291eeb04a7baccc74c04d0714c3efe93d81db31d632cc2a437342e89fb6634a1f99d3266ae17254324c6d9f4c24b980bc5649fcc04406665b66e0441c976f3cb7c2c3aef1a6f6af24485300f581a4c849c9dab6612f8d16ba907835fe75bbd024580b6f412e9940c5d47fd032af96f010c5c63ae4be468ed69e704673893ac33322563150dc5adc36f2d2a63bceb4743a6809be365190330e68fda626b21b803a4d52818efc5412a7224ac1e247d2bb8572cc0418b89f60fb0835c01e4f5b5498326f4ed06e89876b8e6a4b1e048f0f1815e0ebbb885b4aeedfbbbc5d33b164a8933e82007726806db70dfbf6ffbb3a86213236ce867bdce51dfcfb63d51c1c71a18523a4ad9891fc1c85c79f4356f99785aecfeb6dbfa5f9a721ab969f0dc08f9c375b37cbba5daa782821237d357059e2232ca9caaae51a1ab07e29b4dd1187bc6896914a0230c4d31f5f09ff24b624fb0543b9e14c1ee82a4f0229c896d8998aa5d160b1a2c2149e34bda310182f544a3e167f71615068b6182ce0dace09cfe4268d1c964fdf610cb517d0c05c7b6ac6377f7edda9efaf0a4d71b46d2e44a459959e4660e42abaa267f3db330865f0210a5ea3ff3c5e574f96b34ee9070f4578b9357e936e7a454b4784ff9185ae2dc6569f62ad564ac51916b1419174054d86da74ad42b6ba0859f9c504a5b9da338a7c13d2cb913f13206442f9c8f5ff7b0c16cf2cfc3c01ed7629fc8539d51a3d6b8cf6e4713ccf508551ad117ee36f458b671b118cdee253295133bf83ac9157960c20abcad3b3ef57a31ccb3bd24e0b3f745a4b17f61c5d4ec7368c2676d4c9e43bcb4cfbf5c87da07189c9da51ff2bd0fb9bd2b3d3cad9026f27befe7744e66f77a737b762610909468a9e0df8696fdd549aa4122788845f25599f13e04e150e2f132d7d1ba37c729fad31c16655cb5fde78f5615ce39606d802ab749b79e4563bc6ff5e51e72278983f840109882c804bcfdae47ea635468ff5b556c18e37ef6609c20c19365a1b8f713e0056dd75c7126d3b49d4dbc388a5d6703e85d0c4917db77fbd4844a52970a53fbbd47ee09a06b6195674aa587ccb9ec8fa44783a57a52338fdf58f914319c0210c8c9cf1155568a786264f563d8b03f0c99afc02956e16204b61035ff53d59933922d01691c1e62a949045e4cc0088432a5df69e48560e45d4e95bef856567fe053bcc9c16d7c96708e517bc8bf7259302c5e39bf52115dfbd1b7c0a7f23e412bfce879ddfe98e31ff34b54dcfd88e5e1e409a953784cff7908b2698d4c9060d1322ca9d729e0c68019f13ceedc7f822a82db85b16ecaab84db241a511a5b32a457c8cf7b0950fd1cbbb6e3564343af6a3d4f0ea8160773df91713b3867403bd80451a7ed747ebaaffe872a4c8f6ccfc8aba5a4ed45cb8fd81d5b2b285bb7e6172e2b2a3131c613921f26562fa7835c3f428e7ca616c8f4efb28f75cdafcda90dc1fd18796e36da34f0197680b7e150e5e447522279a5e57b199690572f6fd860f7646dd934942c8f14f7ec4f74e1a55c58e936ece04ab3f9984fa597b4d0a271a24b338fb7f366ca343d47f7a65b30a33a26e29f75d9adb1ea62927cc9ca473147627b8d5531eac59f1f419501e5d791ef2e0c2d1e59edde1464700e69b4a89906b83607ca591ccce1e255864a555ce013161e96c81ae200f7094808f21cd3e14d3ab1e2e9e2416aa8e01c2d68e5053f0056f7ad081df43d3454613e32ebb97caa2c6b5c40cdc295cf23161dc924f445e8fb2c0b224612c6cd684e7ccb1876854d64ebeeadb8f4368c24db1e369770912922bb2346178c711ff91be4007e3c73b827eb25d395345f691d41c413ea3aa071e87a139d4c1812a96b56da10bbcbc21288b39fbcd84a499536bf35e81514346dd336a1e9d624bf6a67881e0c140eab699f75e69654f39e6b33ace32c3f9b512c7485647f0b3df8bfacf2c1aea35e5325fb0f3c6279f7b5a6fec6136fbc104cdd510f1b935a054f694c6a7ca441e5e6b81f6dfed29a1df363014a1ba6f795bb36c9f89aeda2b0940ca445cd94a693a3c17ba0d530abbc8431c1437622574d07467f2da34a23791ee854c8dbc494987a30384d78d2d83be18d42bab369b402976ed48452dc42f94765c3d910f4e96a4c6c7db424d450314c76de60c8ae4ff9464b34d531256fb69e794bdbcc84097cb4b83967db566838004149af04a077e4d8b9965892deaab51c7e721560b287b48be431b452edd53156afeede690664517015d437ecde58b30a573a5d465a4c2b093ce29accd6f09243355d2dcce02059b33caaab92fbecd4bc35d34a2ba5864a48f139058adcc5d309f8c08978f7131532a35e8a5845b3d583c3227b55a52419fef08f5d6a2c646ce0171a1520e4bc76f8db3c3c5987029fbc21c199c1612087175f343178544ebcc800c03818487df15dd5ee3d9f1ca109c8e7da8cfd1ed721d711af838c646969243c7679c10e8aaaa864e93db14afc5238fb195f051a81179940a183284581b641b801904fe2c1b2636da45f6fe8d6ed622ba502f1207f5208c9a0cd1b9b83bcc46eab54727924f8e643f19bafe5d0ed30366e23c0043e8e98415e3c8019f2512908f5b679c7366f00de58a4a77f90517459576d0e713951a11d22b30d1f3f084fc53eaf93110aca996f0cc0f114c784e15d7b13852639987b484151c439779dcf6afee2fd0053af8708ddadf594ca68f4cd4bd1f23081ebb4f7b7335d99784c9ce1b9016bdef3e24ac7f18fe35887ca3bd8db6fb85a1d3b4b9c687810636bdc0fe73ed37459476af0f39be5325ca2ba0a0465b7136602b345774796013d90a5a252c47d09ea43506fda26661a228b54b073b55975ef253187cc4f31f6b7221098fb9cd356efca0fec9d426f42574bb1bf158dee13ee58473fcddbb5171c7ff754cc44236fb7588220dccf25b262f34f8fe6a180115a76d51fe34c51ebb78a65011351b182fadfd8103f69a1af781b1bc31c60aafe750f6e615fa44e6599502c6fdf7fce6a07eee1c7227df78d31124213f75510b9ab506c524b0630384c289a657d69da3eeaf25efdcc84c2ae3aa4210483662c386024859388733831568c1e73495af3cf102a7bc255824bad8babf87038cb2c98eee3a0a8c5038e0a06367946e00aa66029e0ac6878961e7cf85c13d96d704d1794e296f4bad3153e08905d4f5cb16ce5a272228fea440f512a3610d42714eddf3f40f2797017b7ccfb289a9eba426a38754b454337b18635d2e91b6a1cb0cccd089a329dce218e53d5a2e02bd3abe248b1715326d474d3c0422335416259fbca764d6220c0f382e20046fd1b705717b6b626cc34c89a5a66f2f78af624b85a67bd9d9273cbd9c72f5ee820cf106716f44e0f4f981b558fc556e954047c75edef67ead1dc3b51c6b7002baf59d585f1e2844a901ddd7d7fcc961672ae70e37ee137b71c819044f4b66f12f3a68086b8fc74fbe44d238da4f52cffc74b288b796d1fd3d99d418e7aed9e69e74a82025048a80716dc7e9d808a97e589eb02983438810cdbd98de90f272623064cd4a314a18d84a675e4eb8e75c45da9f7b2d3284fe0937f2925198553c905741093584d81fd6a98e3aaf1c545255c4487da90a643273d1a77d4ffd4feba996e198072363fdb8f893da2156a1c44f4e921443007b1be7267d786de5dedd8efe4d44c96478a9c50c2c34fc249ddd62efbef00384d693e788a445ba8178625a65b03741442e0bf0cfcc28d5660fe2edf2a52844daa361b2c783bd3fec428175625d984ebcbb0f0b48bec30f808ba38a9aeaae78b55685700333e8d31587dbecd6f4a9116d84eea20f93aa54dd0925f498b894789bd48dea6569bc19bdfa6c4921a67d9aa2a8ca38f29bde052c1ce9c1a984f5a7f55666a6c65d195665ee78a5f9b99809384c8baeb9023d342ff1fa26f1a6fe03a861bf8ed1ea5015d7618f5efdbf6e9685721abc12d688b2ed70891df53308daf91e58bb4055393494db6dc0532a85a777c8eca1ee888fa7c1d3fc7d48bdb4bd450e7987312086c704bd836e5fb3d371a1e1ca6f9f1fa405f48e3cc9ad6410e2f59dbede16328e92849922088636606fa03e45de360089b8713302098c07a6c8f6c1ab36aed96987d40d65197ffa8958d66db9ef7963b6ae411e41f85a97ce6d1570f7346167495b5f7b44c0eb8ed9a10392a6e29f6ad71a80ea43551c55cf499a96c8169ffdcf6becd38d954f99369f1952643c0d8d16ba712b75107776190ac5a7769512551844e772e8d45a158b02cc51d7e1b648c579332424b972e02e01f0776ba737a010d2e897873ee442f5033f19634735f311993e80b9a9ed9fd4181e466352576b2c85e1883cd79c8fbd712439ab31b8b4290867c1261d3a5f33552c3fbe2227b17756b55665ef20fbd7f68585d8153f31ca0e66e00e0166f50df728abd99c0f14ac1710e434ff1ec24c3342fcf9c761f1e9690078bdba3e0be8d9e34b37e2062cbd206bc47c98ffd85cb5a0eeb547380ad5ece28d7987b9c91f91e787e02915c8a5a6c7ecdbb7867a27dd281b901db1efa0eab857fa4dd9803b9fdd0c3239eb62bb5f50581179002765083c749e46a29c57e7fe22c60e833bdee9b1e6900b62870ca5dc849f8e9f523751c5f2a2a2d45a07a82bcd38bfc968afa72ec562d295e092a0672e68df5a84efad7d96e001571fe2141f6809a653e894084d5aa1ebad5b273278cced191a2a9610ad85d869f671c30d76667525e795f84df5c5a8b0431a80972b8256b83964b314697a44505771c97c0c140c90e078b13392828ab5345e0b067b7ee193ce8142836c244acf31ddfe6e0ec4a6a71a39ae9c999756665df23835984a9438ac9a0e665b8fab32753fd5fdf31e902ad24f0e9e616cb9db063dcb0e359bdec416e7bf8008d1abd45b8dbc673b469a7c53b2489716af6ad0acfd411e842572d0143fa4f004270d55079b1d3c931e3456b49d58f0f6922a4a06ae7191bbd8e5eceea471ae94dc6383b0f78ab8cb6f06b39bf44c19bcba0b8275981141fc46b0a86d9d2d9a181e21a8e99e501230e67855c7ff63d2b65085efde5206e22451f3bd1b59068a201dfc3957888589dcaf6f13bcb7aa73ee821ea8e684766a6bf0a8b6dcb8b6c9c94a0aad7be363d34b8aa0d57a26e7136cbc9a9e2e229ad9f813fe2f0dac5bc354026cc753407079e33585ee732ba675b3043bf9f03b9969ef49d4308ca185c8816b5da2f50ec98b6215003958225a391edd8f3851c1335e1888cec0f6a29da0630d64f851d8a0a15bd249679653bab80ff142191bbe525ec47779b7a40602b3659d2a0f46a8f9566d2331b76f2cd0adfdc8900935b23bbce07fb144f38c6ca20a3d30e1fc2341f205182eb7bbdef75b1fca5fb9a37055237092127bcdb7df4d720832e0875908ef4b9a81a0540641e878915ba9f957a665159734b3546a28ad34830058ae963033bca0b03368e1e5d48303ecafc1b94dc2b568b004d5c387b262693f0559ef84d2d2b04529eba6e2fba22f1b9481d8612d7fdff8c0b236b54940badb31fccc8e42aa33558d3c9d521d58c8ec2bf1a47ffcff54f8e4b91dd35327022121acd048a7b1773aff9f817300af8992b94deaaedd82974b5314e8b04a34253e6b24b248e1a376591fdabff08a8cd4f0611a421d0c0e9e1114fb22e9a7747baae154fd9bf12b1f1afcab777912be2dd67a529c82e10fd2c4538faf0347afcbfea624181ea2e5dd197936d44458b63600defac061aa9556efd4ae57143cd7bb34831e5f6b60934ce221e32b31f75c2b2a8646b3820a379961d66ba6e9072fb433581620543184a78d79052290cf2c80b252f332d19eeb352e2ad5044cbad1d5d95e549f66834a7b104daf4b391f246737fa84072db85a93b7f3f34f51a1d0967f581552f212a7d2103d7048fd285cb08130ee67d5e83cebe0d40f5e3bdd2e3b0111718767e1e81c89810bc32eb4d63d01aa2648e166cad1410798979c13e6998c78aa9d44e998dd88bfd6e28710eec58a8447b442feb7b561408f6a82c99b55a1c674eb81d079a8378b8f1e85898dd69eb2a133b5492b811899cf906b8b87b2d2141ca6dc6326d67f41bdd687e3d674fe265a281022d07de1a809d9e8e7b6c33bddd6a7f93af619bba160b97f0fe824a5d357e550133fbf75d7078405c4edde1fbbd8e476887c1908d92621c541b0756145246f221b31bf3fa80148b06ecc8da2ba840a8c5b96d03a2100ca98ea99e420f9f00fec53ea9774620c8430cba244c4dfb728684e4f402f0df63f58d42f91a71525c2dc1a746261818906050f798b6e90c655a9f65d1396870f491b2049fb3e007c99bffa732e7c9b92187e937f9428e51663e7810f4fe1648c0ec34231157688d77f1e5d65d39091813bfc4c2d374d52988c6110e4e9d6709f2707861761b7b2121f5e7bcda2594b4324e8d4a820a1f2f4f544d4cc0e27e2ce8b036fbe5740c3199aeb4c8a44d01455e438dd152fb277dd670009f5e89d72ad56069566d4a6ed30d2f38fb4c67837a1a93bb094f4cd274843251ae09f8df24655f09ed5b789036c8b95b009d3c7a9dcb3e7f7b8a0ca7891dd3c8f21d34af22305072d2cffd5658720567b0611206a7897b002c01a3fb829a56e853e97bdb2bbbed37ca6ff25851e404ccccdfe9615bf12dfaaf8471cc15cc8ccc8bcfe94934820f490289a56eac80d303fa790261cb99b8f47647052306cc0387af584e0905c4003fe1e1f219756185c11d154159037228438f3c313121ca4b13410c04dbc3c3c9f8a1c766342094bdf6fcba75b01496c134375a8d7067260238b6a5fbcaeb39545ee438908d19be105f13d1c41d1a155f3dae919d442f574c0f649d84a3d9fb53a3ea846963b3df8d8eb43041ad31aa6c4dd27c632ef52fb071f8516935a9f649ff82760ebf4563652d50ea63faac613fd27854fbc3a1aba91d0ba4ceffd5638ee45f0e68842c55b4bc12455d5fd4415a5c86c0f3c527c02adeffca52be33288c4c23b3c24823ee72ccba1b167a3a12d95d7b9d0595362be97f1fd90d7b7ed029447eb1ba8e4094e6bfeafc842351ddf56a48fa5af0a0a5cad7afefc7b99dc23b3e924d9e80b2b35baae03fc5cac244b85626fb4805f35c9f9220d02f982a9d7e5fe9f8e435936b10eecd14a72a6cd79d0a0123fc35a7508f1d9ef1d8dfcc50ed332270e0c066406ea96d0d181b6f0bb839e8003ce04af322b0c67a6addb7622718427d1d16d240e3964acb01ab875d2a050ce45bd31254e581c4ea4de7d669e9f0d3b04b9dd5d515d9fb9f7f7779993eabccc334c39968c6f1c84ec99edb105fdc34694bd40c25dc54f45fb2dedcd597dc9ff318fd7fc0bacefb58089e812471e7e7f6936dcbd8f2d252611fc11cec0968c0695c3be7cf54e9ec5a0b615d576dacaf853118a6a59facd8af23e920299fdc1a2058607fe10a3d2a7d1583a5ff79cbd9676dd2678e1826216b7ae76eaf38fa0fbae7ee084c5885de6f67be007cc646f7a0787429462667b5cd7988e897ba60a30c47b833785741b07113616f0af8a77375f67a8bf10a51d6a4d03d79a899d6b1085f2b95e65b0d5bf912f65b8f86df141933e8e1d2f82037bb9b1de580d059bfebda4776aa93dd1ac6ed837f7b6d44c2b47d06421096e56a79b53cd12a6cafbadff333cc38147e02eaea5f5c05c40a21bcf17ceb5b8af2683fd78648802035ecb6736a8efa82254dca1f43ce3f729346fca010cef15b6191fc0d2f4c1da1ba98395775f104e62b119960570a603e45648496b7cddf6c315ed9c47c5fb0439931575b50f44dd5b307b2e9fbfb4353b188f247f4e27683373c3b74f252927d6d40db0942f4ff0c44c1a4c72e97a949dbe17f071e6ec9ce6e1c7043c056a7f81e2320fb2edd15e014630749a89928c5d6183771f056149a76257ecbde281548ee2317ce239007299dcc28651a1d69572a08c7b75de8293dde0617f7aedc7e1faf56ecc6f9b903f590c36b28e6c678b9af15050d05371e290fa6c735653622d50eb490b43f1a63139d1a1665eafe21591bd27be7ff658c71c1e0e5511eb49e674511181ef90e976f7af0db39dec922e3a97efe84e9be843e7728cb69b3f0f2546f322563fba5d29ad51f299f06ca13cc29766e2d5795cc8787445a97d69a91c85e4c0096b6e354c566631defdfa680050e44e321a9d160bec989f77a3a14e718029297b6a90326353868320c64870a15c20461594f5cb71ff7c4cf8e83ff6c18c4520d4f2c91ce9f32d04e8966334cfee32afe7cbf53682526437d69ce097cab4a40ca78e84669bbd7dac8c726090c538d6f185ace99a3a9512dd2a1ba22fa2617a658b1ab83c314fa19c3e1f6df0031c75db7ad7054cc4244c3b624945ed6966439a7faf83dbcec21895b53e60246dc07651fc65d68cadc0c7f478944c4460eda3183f3b72dff1dbdb45ecd1e5100102f1a4e43ec7723859a8e43feb59f4427b6f70e13ffbac2dca241520aad570a6169a3320109445b6689c38b6f54aae49aaf70e4d7ef367057aacea687b81a9fb9abf9096e361eb81a1d0a9729efc8cbb64df19f5dcc4add8f10100c366c98d73850742004c07e285d4ec04fa5fd865034c23ad0fb7bb3726fe4f3dd04d4abf87fc2517e91c410d4393004bbb5bac75eb1e88a3e4731ab8bab6e8208a0307f85a14a871f0419b509e95e2e938a392877364cb2f8d1214e835fe39446c50a63a480bbac1e63cbaf766f46486102e3eb03fdbb0aa9cd5a7b4c6b45855d3dd2054395ed2e511504a1c6d2ad523cfdf03e8b889a7524d1e2cfa5bcc53bcec82c7f722ae657710eb7e7241d1beefd40c76d474f8af1c469a6e24e89a7b129cd2b4dd372c5e750a6e8f722fbb5d9b4d564e1f295a948e193ca0b3b98d2ccd4d5acc58819b8d040ecf842dd3dd4b0641453f983bf6dd1a393bd715e217150e31129a2566590806ddbb55c6d8bd1d15336d34a115e9d92d52681d28d8059e7e86ffca4579bb050789832e3682f5f4436ca0ffe09d6e4e6b8f6bc9e4bcb37a751cb258f2d80843c96c885a94d0167d0418133644295d0ce9fea212c02ee0f2d90286f7ae83c1cee6f79f14e2de57cd7245d18c96c2c126c774febd918fe378461c41ae48f9c58d7963a9754a5b35816ae29917a3b988d49f12a5bdf9ed32cc799bb132a89824cfd7272dee77e2760c3e4e3e41a52a93d4f9893c54c0b75374fc329485a091d365d875ca6bced8564d9803511ee9579b92beec3985bcfb5f9cda74754936effc2b546f73b474bd1350aad4b98d4ee6ea872f5ba49b5c6b924f42b50b4794ca3495bac7aedc82431dcfe3d44930cd77acd7f933282511ec699cff74fc360462484ac08bc65d95b34194645848bc05defbe2033a599e7556e2ff5fb569541b117845281c345d3a75fbb7fc4832beb5c39bd16b5650aae60c96d638f944af099a62de1c1e4f5ef42d1e50f4d0f0b10e0eb021efb795e420e789fb4b7b124867997223128f9810269ab449d2b72d4dfe5d22ff825e85f5144f3e1ef1a2375437992436461bc433a8bb2b1728b1e76ac4d6a90839ef8039820fc58c89c5a52b8f3d08638f43484a473d988b29fee67f5902d5b5097dcf88436042ee333730503815cdc415bcf7b9bc5239720fa9c68651169f8089656948adb53f69941ef04dd9b74bdfa68e0d010f13a8a2f42cb7bfee701f7263922d3133797811a0052c07f4125650fa53752f750f060c16bcbe745138188353011a8a3ebc3c3261ebbc9b820a2752792f2dcf87f942256717e9591039d3b52d86a2384118d420f78d146c5abd76ed792317327d54f8d32e19f5ec0cef72ffa3fed8dabc0208b85d056e226c9ac88cbe1c42671c75898820755fc74b8cd28b1ff2b19e1a337d01c7d7e99394693ac2f9bf6eefd2880001c7ad9b11f05abf32177baceb7516ee24cc4774539ead0bc074295e8db714232645c669a463562db309409d42b4b9092232b87cb4bf0a5736e74f4774d51e915b877cb03c79790b338b0c6f02134bd4f50fb3968eccddcb29c7218b1758222753f11a6165267d325f95054ad31a2fe6fe2a7e84336b3407b756a6f437c288264da07f0fd3cd5c7755d90819cb6361e63591eceddedb0271ebfcababc5d86de67439aa9f1c4859cd95a78a2e2c9ca332c4485d9eebfea3f836f463bee4e6de9d6fecdd4732ea95bb9f2706c1e99ee8f5aa48f003d1ce11a86b05f567aca26b81544425e05b9fccce11b6dfe253b2b195d1930f5324b3c9bcb812c435c0e4d86de8e9a07c9d7f4019fe3c9c0c18afd0bb9e4226ccf3f29e657664b3dde692fb96dc6856718b697c6db7d34f80e9343f6241ff156662eac1f531df786b8c62f4f9beb52683121716ee2432e1030881dfe59b5b055c5ca53cd8f5702378ee0f627cbdf7b4cea58039ab6bf1950d60030b6ae723404be693e5e0753aa8fc8862a2f7e851b50803f3b3443bf7dd965b5f5b6577e068e8437fa2af5ae4e3478a7246b0e40cc0a59fe7aba5e71cf2295a5f6d93e85767109db39aedbaf2aa3e0af28e71836512b3e05c2bce19b4c18a447f3de3454659e2f4e1e423728f7789e13c5579f5381f42edb253fe731623bb46ad2ffe7f61a9552eab34335a6ba8f1fb66bf5bf0e38d99c6164c6490324664b15b986f1993e8fa921bd8f01396ca8de740e7186fe95b52fed7e2fc48659b9cf27470a64abbff8f2215585cc08edcfc6ef216f0d4df511900f01f18ee5cdf34857c011767927635ed0a252aa2fa697cb1e91f41bef371e4ff09e67e0b3257da7fbd98d27b7897de617d00dcaa53253ae16a8aeeb06d159828e7359dc6959014a400f2e75f6a9e6406e3880c5493ec91d2b9235146cb6593a558c8d93be926d604d5cd97f479545c80fc132cf285f1d9bca6036f285b62f8193e0c1b3961488057bb53f8d7026e8b52562adc34e2d97b52b7d0b05eb643cb7b7753b2a25d318bc071761de283cb79d7f26ef30c92a1902c819590cc6245771fa8879ca2fe0ef93b50cf9a0629d59646a6e49f862c8e571508176c204f270f0e2f4a4204e1081c55c681f0cd514ca8650cdf7e23a83f005628dd5ad9d1833362b6e382206b9857da5ec902e2310ae115704c3e30cb65632f889f4f0dd8057b592b3bcc61f997cf906fa1743fbe29785c492cea9ec968859ff55641fecaca2d09b5a4fbf4b917c3b937996d84cf7210bf65d31da259cc90dcefd370e815c8a214da332b8b5d4003e860566b087efb32c34fb31d3f56b919970556ff67de6f6999edd0e11d36fac8cc0efcc4c286dea3564afa5858c1b85a247924479c9f8e2f77f75394900af24ac8cbfeaad89a94ed15cfc68023b0ee9aa0d3e40a128a8d7dd8009a3f1c1a809c6763b660ed8130227c1d8829a5deef2d034479354836b78d4ed126c65a69a7bf9d27956790a5ff848a58839d3d5db958385e8fefb29ed15835b36e96b72fe8c1ca1b2bd7536ce1691f388ea457600931946d26e6eabf1f4432182f647b6e8bf858e43f103be7f387fc3f8b3a10f0133d3818cc16e22dcace5b526e5d02d8f72289f61800fc35c4f8737eb860df31aff2f79981c392c7e3498ddab25a0a2569cff060494bc37443c9d299fb65a26437ade0626baf20b74305e14a33dfd57a407546f733fa14adb5cd332ae0e3dfe387e10f4303eccf1a80a493e7ce826a940e72b460675de2e1ab28d96019245a6c58b802af87154b4eed8264ca60af115472a866d0201cfb854c5f599caee7c4f55d186233db5ee088cc6f6b788d37da1cf053d142f894f2f8ecfc09db8aec45b1fb40e5629a52046ee8c816ae9ab3bb5e0f02f96f82ffcc8ccec4bdd0de8f5e5463ea1c2390da13a4586475c32d714abeac3d1e2a51d0f2dccd3d5a9a3a04ed34738c27b541b09639e31989f140bcbb099a5cea689a3f511ffca63ab8d38a18188e8dc40874535a46d6f0e4b188b8f73ffadc6dd95b811f6f6672005879dfef7561060c8c6d37ec7bb6cb9ce5628f727901a46513893ccff31c74ce0e102cc678d9c967ac4fffdef99b3f2fbfc34432f725a64f557461e952b341b59f758e9abebe0b0e5e44d2f99b0fc98c20845c29ea0d9b48291be71e708dc431190abdcf3ef0f0ce6d3e25cd0988031c1ccdcee433cbecbfe2628596d80bae365274bc1a8003c50df9f843adf3d8cecf68e6f22bc2906071c091b0315635565183f91f1cc5bd0e32f181869068ce615a65ab9b34b601affd61d95815349ecb1dced7d3eca074a4f3217a74e36fd338eccd1aa31e2d6df013ab08ff3baa7bc4d6b8529f87d490aeb7271294ba24203b413c9a3c8ea7dcc74a311e8fb25f46b7ec50ab0d487726a6969b9e60363e10b4ab3d51893e26ef7b2d5dc92fc4ac5d9ec4934b87b35557df34e48c20cb499e737959c98d4db4e6a697310c3551f7b1247435e773171aeddd77cbeabc043622e8585239c41eb66d59eb95614a64efcc15a27772fe437acbdbfb07717452b907eec001a8afa991a8c72766e999be90516b054af0a49177546f090bf3fc46bf425cb1a691708e263f81d869e25c3e58101e97a955b9ddbb814fe2379cb7f847c925418f9aadf378631120ce6c24fffe50b31a6294faf967c7e7ac6428ce4708258c5da5d56feeca4d9dfd6b755bbee9640df38fa981449582861be767abb5a5c6e7395bf283699e44f3e498818dceceabe81b7b6001680eb8f357353893f86fa27d23ee4d20eb530384a58e6170653fd40307a6c98808ce6274d4b8c4a87fbeb8ae8043224bc25bf2f5299726651de79e5bc7b0105deb4ac8f72c289f09954201104c94f78a148302b953de29439b1c9fceb91dabab4bcf78e97c0a19644426906309a2cf555171377b73eaac46e29dc6e67c14ed551802ac1af00a8eba3dd34ee2e0ae590e0f9ba6d2fbf02f33f95cab188b313167978bb57f1b7c924b6584e7e99b789776650e39cd6583a43e9623ce18b9d4fef9da6a2abfd4d0e2cf32edc7598d78315669013f46ca4adaf6e854719a3ea6c81ad317c300bd0bd13f5e1bf9675f4b4ba71b3665d33fc18e83348f425406a428ec5d9010b57ed689b634a6a10252c33f4e00392dc8051ab2a5947d37866455fa16fed3b0c036e5365a51540cb10513d76e0dd73d763dcce2badb168c2070b621105f5351a2a2807071f39da3608ca1f361659241b7e7b6c62710db9fe50ea3bbd3ec8dacfeb70eac3b1ccf71ec1cb80886573e781f77a6373b288dc7ebb7715e4d86a5b2b08d61277afe4092d02401c09eff71eeafdf56ff3fea1653c1c1292dbcc51d3fc5f2213980cf5f8cbe2b92bcde0c2f5d9dad7a60de23c78b91301eaed922874e68f71b44f2b6925a3c64833f6bf2f416d0953ce92e833ed5c4a943351c811a1bf8360aa043f6c42132a7cbef7fb8e26080a357ed78b2d84cfbafd8ecada03dbdb5c9e956517bb2125b91f9c197a5939de3b5c95b9a73847ddfb43d2f2f81cd7445848df39df0c91c5509679330bfa1434082ef031565b7e9604ea529e6e08cc65635a9cb25a5569a0d182e73801e3f24c48dd55e93fd96e43f595b765c299cacefce1aa190f07002285216cb9515c5945dc4cea7f02b2fef2d589de717447fe5af64f981649907e7df9d1a395e2a4516e02666f25fc19cde2a800ffacf1560878a5ef4727c77b49402b3ab35a2fe3298a06cff5f80309cbe366ae3483f44a0817282b99348d70f9b5123dee8ea93dce3ba80405ff9151a04a960510556204161c7ef1dddf659ec66c36ae777e6dd65d911226175d8b763e92e1cebdd61444de3165b67283d1d99c29a5a76512d28f9459446c37f3ec04a949b4add548ddb342376c150f8d8989b7b125b464e113b82ed96706368e809283bd7a0fcea1e7a021e71d7e5daf2c2c9156103ff53c5e2943b8a0053db9bf60d5e68f3af5765a95477a6b627a1b092f1c270b532f64dfab3698f2db67972da2778e55b140029651312eea5246bacee86fbaedfb60a4de1985e984f0d0820029c3f0c002fbaccde385a97a088e9bc9f4c91d5f12902545957eba6373e1d6237ba3ce811e5f0cd85735f3cf1e0d9eba0f16b6585f5a6de485a993b5112820d617164f6166d054e83a5c2e91668a334c427c2d8b3d3a23eb531c1bb07edd242899adbf241c72777caeb58f683d272793d6fdc53768dea6ba68345c609fe47275c8d6c1b9bae1a31d0b2b4341fd694847a1c9f87e8e0fd4f0a11b725732750591e70fcc65925f17a043e4aa7915596ca88629d2bb965bd694ab6ac1433b74a7f6b29fc2c5047fbe9a754bb19a2b29cb66583c99301085863acade99006bf9f8de9d32b340fd0caf8883be5765d1e02e60d307fd4b5dd8e0c44d339aa808cda1f8e609fcacd23f514d95bcb0eb22fc53469381fda5ae35b609a2476540b6e2729bcf692ecc0a26cd25c4170e1f1dc83c5744edfcdbab4cc315d09655508bc741babb38c44d4def20c66952bc3eec9a9f8ae4c29d30c828217ac1852a870e3cf58fc49d2824b06eb2b58c6713c520e699b6201bafaa2b2a55a0814c2bde2e867c05c6f4f551ac269ef58df10a68c0d2010bb33c9bfc9b802fe0aca8686cc17c394030948ba4c79be91cbc65d2d5749e8a91235ec804829695966a462e08709ff1f23059277b376a7ee8dfb508ee114f1a973427f3346d3b98c577e57bc136c1080162b6d2f4e7c50c9f50d9119195bbf86c7527058f22f5e747cd0ca7ef3a6c483238f062fb0ad219c05348dca168745bb825f88320d20f62505aa64c3742372ed59b0df4509b40c4c25d227532faac2fadf0557dac6763645d60e573421f7547ea11c5573196803b16127c451721eff0c91177862181d9ee784499dbbe14de1daa179edfc6af3274b3a8fc0e45eac81078f089619d452005873dc244e78f6c2f6204f076d9a5600e5131609524e68136adb57b5fdf059e0dbb3cd2108a7c99cfa90b6fea8d1697cfd75fe57af7dce1449e32dc9e7b06f8165763646d6d006c6b082d85c00fe1831884621245652acac10eab12801e1fa573804de2c6c3d03e5950abc6f65c552e8a532cdb6e3fccb7d708ddb136fc6f398aa9bc8ca156f7ca2329241a34aae0a36bdd1a137ca8853ec1c9d4b679d911086eb4a4c85112a0dd6952a950d094ccf81e0638048eb54839740b3f43ec047c828157141fff346a4d9cbca88d9e722ae5627a58f70c77dd94e6deb19b7cb2b93d14d49fca54bc84ae0a19a8019268300a2408ee7d1c8f6fbf9e4ea5ea80d1eef15d6836614fff8f58da8577d49fff7cae67ac85347e5a10de60a3971d479ca1f037fe7c181a05eb1bc815cb18c6d103b19580b60113e8aef958fbadbe01dc11b7c50da72e567129d5e0dd20d33ced88597410eb4140017a5f64202daf44d3ab4d3b6ed89ecbf7839193dfb7032975ae6c42c3c6a0d347918fc1694aefe9bf2f1b3d9ef2d0f99b03db026253c4006087c009028bd830498d65f23516ddfb360c5e3b27f3994582493397c40041c1efcc876ddaff614894b9ba59a5b2639e3d67526b61f8a909320894a27b7ee4d92a08d7e3c8709a2ef6847b2430ed70037cf9929d48deba6ff162b2265dd0f33dd8ca918e319266cea5aec9d9fdb72bbff9c78628b9fe033dce79e135f49439e37e72d07724f13a950b5783618bbaee7482a4c31a6397de687df64afd6cdc396312b33aa05065615f96904415954cda9d68a78de0b17aef9d9cadfefa732d9368aef9969b964b28213687467660a0fcdaa351048b281496134b1fd3e108070e0ac77e42413c3bcbe562dc6de3ca072c6dc77c76d501f94b6791fa2e4076fe98451639fc64621d1c8c59353f6b0aa7833b6f502577ece222b0ce2a4b2827901f54231f29b5be1cae238b17690c3c28ee0351ef57fe4a658849c9223125865267a821a8366a19c9d7ff1b3162aaeb766022cd488183180474fab6a4c0f76ce8c9f758e7c7d5216297348f5a4da7bb32e638894d348b10d3123349c1bea7f0cd40ea32f9117bda0fb268fe1f95cd7ff56492a4c7d2bf17940f6bcf2bb03dbd50ffa871ae2e4a02112c9d6078875bbb2ff8ba3f3225b3910dab73d2f4b4ef431c8c3c79c0ceb68ca39c559aba600e8d0fcac9e3d42ee3ffab3ee73debf1076c9f2412a9711b9fb1f5868e85b8709b3a14fb6aeed779974832d2869c6a9be53b88b7d546a5095d494509b8e98ee4c6c7f0ae7e502a189c88e9ade969718899bb504c260a9d7b00dbf51d04db2bf71597adcda5577c9761e2606429de4156bd5c5b9131a38b3f46c068ef07c43ec4ed312b0a4e0e1c9d48e337823bac4e74fc666d030b2499d993d4cdafadb07c1ba5b44172c323067a8b0916db32272bbe250edd690d45601c501ad5886830d73fb747d07e247ff210ec7d113a43426c0dec20bad706afd214f50054a01bda7129b8d3b461916d3d9f62d0082d1d767e3303276eef4fa719388a4fd23649ba38fcfa3c5b6f4778c2ca5ba19d7ce0c05a8051e42633c44d51badbcfd333d7048a31da2ba64efbcf718997d41ee52d0d8d39e791b4e3b56d92d82fd21e8acfb39cf4b08a1d8a4256385d1f2b765aabc3d5420f8ce3ee56fc214a82b69caeb46d6e584981a93b4d37963856b9ec9910ac3eec145cb450c378b7d2c61d09c60eab156cd5fee99da656e35f5edaf8ccfa6998110d468bc5062239a54127e7c74b65608fec88342ef88fc50cc5849064fdd36d42c06a7d4713cd482143ba50367d0f4c9b5d6f4e60f7191f131208aef594ec3b3abdfcc6d6f6d92bf537e48986e73bde89953a27f7e738cde9534f650bb918df47e3112126fcb13067e8eb1980cabd235af0c2004048b6a77f6cb1f82419819421fcc1f95b852aec0d3543f57374c3775c10842119421b93a20ae78aca48a295b48b9bd110439a5f4b0a9d9897ab2d9711f48ec1ca4af931c8365e3a3f438dec83e8bf2c47b8480ae48231ea21ad8ebbf6f7a6debd29d2ca7629792d1f7e53eed54adb87f5a159a91b12b9b66890adf2082c7b77b01aaaa2d1ec548174b992fd4c34be057c0861e5fa73b43a0545f1283f06d633d3de5917fae1d020878432cb8ab78b513de970f58106bafb0e23d4ec7bee430aad24bc5d672008a388e537689d0262818d4e350f3fc367600002a9ef297ba5d77a1c4a85c268ff698ca5667a4f641deb5a7b7d059f4437ab8a781ec6abe9fef29bc4997cdb7f9c8da3df194a6860fd481196528228e6a784c41ac98470aa5427fb45e886a503dfab7cb16ed74ad597cb2dfbf35b035ba8f4ecd6d847fce4f28bdadedca28a0d99d8f1f7e268f2e199f2fdb22321fa75400210aad5bf4865368de579a58c0758062e4f64c5b57a0eb7cf62d96b960112b2beb8415b94464d078b07700376c58d3471e4b167b059194f34c2c42875e99d584649f718abd668e118fd577220c513154ad78721439d3bd78ddb8641da9f7ff09d0fd7d366f0dfd2be5ea3bc2122fc77e3e81ac8a6b723fce75c26cc173bf3911577b2b0b585c8b9c51df9eed7fd05b9148d1640791009033efe7735dd98e5cfc6a43bfa450675c305e1c40245aad506bc2fd3171a80dd8d9c07d5d556455de9298c1814d7e39a08494d9dbad7e04a33e7096f684985aeb298ae84b28de7f1c20b040f83039cf26e50a3e2bd4aaa1b1d3610831c3cc57aa52de26392ac671150c08424026f8f052fea2f702e8e9f92d4bc9d52b8cbfab20ddb0beaae2d79770173e44131aa430fc6e50ab5ad9ec87e50c93332abc0191f8482f1ac25a6d21667a57158d66e5d7801acb611640e16a28aa7bb29f1b6b2eddabdc0d485238eb1df58181105e6a9232a9714c73d83bff9823c1c6a51ed87caff7af49aa29c8393506dbe63cfde52ff0c3b58f5305884ab58112c0e72c7a1fa03352226ba2c5c34cec71ff618b0dc6e8414e4a924ee2ed4ea82adfbc7b12567c6d66e3abf2e0a32e1945d5f87591a615f79495389e3c26253fe5fef8ea0220656cc3b05070c67036e6a2bee0f364c8c179ce25e6173ebce7e8b38862020dc5c01e8a6ddbf4ed22a1b957bcb06ba89d14ac6e5f2b1da50521ff3db3c17c1061219145d9a54bfaa63e34ddc8f9ce11ee064d3351aa4b0e82eff386117f6bdf5c32548c2b5bb661352639f14ebcbd03f3e96c411903efafa0c664f7a30dc583b601f1d4e6eede6d795069c575b314fb5c10894d288afc2575156fea07aa80c09e2936f7253c6448a07f3b07ce446e4c2ca372fa0d115b2f918899c624907668aebfeeda71274d9fef1bc1781909aabb0e15cb0f11af10068616d246c4afd364bd6f58f629a6226ce45cf1b3e4df5cf33ed82fb2e6dbde74312164ffd2cfa72582869cc2a3724865866e7da41ed1bbce5ffdacc16a491bc7363ed440ab84d965d25949cc952393794353cb8f4cc340ec5398c527dd3dfd46f7b3ac29ccf65266e12c124650e4b688616bb9a58e1fff4b5e110f0251265c708fd54158afc477d94ee442e7ed920ff52e5b0c62e94dd3632d3834518052a8c9c7002bb2a5cdfcd78d8edf1ab124aced0fa0484a5a6016107a464c7248fe8dfa89a09d030dc79a3a6027b59375388fbfbbf9d40863249ae51e79720ebac18b217ac8895123c5ec1fd017c1d85e28cdc21973a1f08c38f268414b799864b368673a17b97660631ce65d557383d9ea5f7450cd941157a81d9957e3c836b6a929ca36e95c0958d5dadb58d0e3dc79a2306f928ab970795982dc1705d00df358095d30abc27e795750431307f79e72d5a43dd86feb4477a85322bf2b0e428c0a142467338bccb5f743f29266fc7d87ddde12a1d08aafd0ed027672e9cb553a3baf4de782836159b6e804a475078929c77e1d8d607b0bd31cb691abe064e99bf6ef1c654d92292b29e7fd8246bb3ecb6fc06f166a6dbd25ce72a7982d90072fadc913298b5616c8bd5ad323f432db15c5d9e3a53e6127b22b876bf0892cec0e56b801f577b9864629c67de0eda7a60aefa2b4ef901c29b3e0c3fa075c46e2c4661270ae85fe2b43ae686756fc15f07d9d4d6f1c362cfa376d43c557daa6079c15e10197cc31df3423de59a83ae4e7640b3d36317870a90901d5eec9abd0e6d3c589e6d816499cf74882d9c474ba424d4b680da24f3b6e0c36b0bad7e188341fd3ad47d29222398f0a74eb13ddd2bdec9238e74d3ac9683362ac6d0ab5039d93fb657d9d74129e79f0d314bef6b286f0c55af0db3cd4faf5cce32b8471d28c5274f5a5df6c8087a252fb0527af44a7d8af76a7c4efb28127fe78c29c49833ee27de63fe648fa7f2ffe8f6ac421bdff9e4c2698c2e09bf5ff2287603a04ea39f24253398708e5fa341e87c4684372bf29aa310a0bdcdd2117e56a5647e1e027f2d5fef0fc547a0e9e20dbe3a1bee9a97d088d2ad4c3571ddadbb4cc3aa192f5bca7b766b8a336688e5797380787e4d80f832d6467e996cd07d81097c7224af37a2a105114bc3dae14075f65dfc0da802bbb4179ce5571f8b50d61ad200fe00ee3edccb2afb2bc5d419ee53a7170cd334c70eee7892875436fbe75c8cc6699b75933d5b42fdfa365b0566f5df62627095ec95d3a9f7cc8ac692e4c76e61de0612ed20d59e7f21646202e3c4fb780439d73588bea5a56d6823505b0c74445d83bd507bc3a12ea6cc55751eab0a8a8a3b39b1deea850dc726ad8d396fac1c45a0d51f27bf4cea60bc63d20a9375f1d4b15f405e5118bf731cade0f20eb030a4ac9498bfcd842609a8e5b8e49dfe2828bd4e66117fa043a032255f0b908742e2043910cc77897f1a445fdd26b6962042fd58b679475e3a6b91af2bf32559e4b05ec96243190342ebef89ab0283fd5cd4d9b621b7d5ed59f60a2619164cbf8b6c39a5414d8ad647d78aab021392114f73d9d7bd3c43c3f851387ee9965d800dc85fa3ad0a6c65cfa36d9cc4dcbb0028747782f3b9194238aacd4769fbd9ab36cfe161337d2465cee8626aa6bdcfc636de96585cb5a95c1a9916b6259b4cf8c30fe5e2a1dd383081ee12c5c7a9fb190e7ad75851c976a8aad2e9ae98b1ad2753d0612b5ac78fbd15afd0cb1b1ea1e385700af9ba4149d9b918a49e5cb5dac650d35be0b7fb6c2a70d8f780387e0d2f93a23f252e2f7a675561e8c374163910e8bb1897d0d9893255423ddee743d853cdc3144d6e07ee327aa1b996b835ac529c0d5e411b3df68d5f35b31edfedda557914963e48afb385481364621c7a9a1fec5acde63bc56918848c2508fa91743160684aa6f46c3448f0e3edc1eb50be8e44f704cad6ccde5a9521fc09315b6435646f6aacfc0234d2559db984b7a4a642a0324cd236b31d3b9f8173cee6f109e42a0a59891a4dd7adb88a5cbbacf88ded2215dc8d27a62fa250082ba37c67de083867c884abad483a1aa1f35474770c7a432ece4f0154de0ce9b4d0f189ebc0cab5d4f61dd90a6eeaad63f17f359005248b5bebd4a5783009e5dba9a89a892b884e67f43fbd1408870d61abcfdfc3f92c0fbd89bd95c0f92bc5005a46e3571dcf5d6ca17742e696bad37bfabfbd86d53d91dad32653b539d13251dc3ea55ea6464dac14f502e86e1c1c1132011088d0003728004b0e70a15d8f6e2b8a7aa881d0ec9360c21621e5b995ff3e1a049ccde946d6a9f296576b328849e327a3eae78cd5e3f9e470602bcf00e461abe358b4520914b5b9400362e2adeaf7e23fed4ed12732f0dea9c2cbbe6f3a9801730567a9c9b09e85f20d0eebd1ac84563448229e6e95a9e8bc7bff4c2dddc788ae1bea31b3df30d0bbc3266fef0be92103200f6c4cb5bcf179bb14bb36891b052b77ec36de8566cbcf0dfa3e7e0e78bb72e416fc5dfb150ebb58ba6fd6e4800f2c9b5304375af7012929fa30e9c42e74b78f6feb03681d0ee4e26960a12838088c1c594618d39eb272df8472ed7fe7f25b783be995efaa0b773f825d3b648dc06b1e4e99f7fb7d0c8659f824d3e6865f0d29b70727790fa4abee7486c9376a98ba0da3ea35c4c8d69b2ad3ecb13af498bb434be760b9fb408fc620e76a1a24d7e89f4507bf75e69284da2bfcc1cbd821e12d8f2562d16cf4717ab496d636a486077efe4da4c0811a5d4333a6945feffd96c1626f5b948789d75bf2dea9b7ff13a190381aacb0e8cdeeab62a972f7b54d12f069ea9df724e35f59b32f4e09559dadd2aa03fb4e033ce2b6600f07bababe526f8600f5f202d027e556eceb150094570e5b35f9a0539f8222ac22c77a52bf8402609a03b5e6395ffa8733f48c54ae5b295d9c5cc8cbca2bc5369078e7385b80ea725f93d404ac0507f2c0776f4e88ae7433e6da29b8bc0fce7bed230373ce9f1f80e9d5e0e584c7f10e92a1f8aee65bde03cf4ca3f64a9e2b74ea8d06be7974878b4923acb9082a56f436a8623e5cf996d37891444623bcd1d921436f7a0fc1a98dabff82ef7ca7650fc685b3e1cf1fbfb19555d55adc3fbada78ec4ddfa6bbd60e91e7f928e8ba9287fa1efd9d758c998e2ccf7a252b545eb1fb73d19fd7193bf9a2712d1489c6837ab0d7760cd1e914eb428d1873fee26c7c5bb268cd0903fb7728b8b5306d56b19375df7556a17ddbdacd184207294b649f16a6b5272d6a6ff5fa0c5926e7383ea3ea75982b65e8651b88e11a11e6392f3a0005a4146eb5b8b6012a572ba07ecb6183bc8c35eb6e85accfd237b6c77ec9468ca56582c70ac6c85534779fba9c52244c3fe2f2900b2ee56359487e28dad886a3be524a345f3c0053abb3c0320df7b0ca8a2e39403df605ad5c3dcefb13c689e89a4aef5ec673be4c829ed8018098a1a26d700d6fe691ccf898300e834735ecb57f3a2706de527d48ca1eafae5911864a8b74935c7dc3ef55df76261b9068a45e9c3bcd72f93577759fdac45abb102d99a287c1651e4b03845b3069d4a107afd6efb2af3d9cff199e53d8f047225e365050fa4d40951d7a9458edec5579786ee1290d42fc25ac2ebd2fe35be89727618b6bb9d4f09937739639128ab31ad84fede9e6a8d213670b8fb8d84cc902a643550da96220ab7f01efcd1f842281ed717f646aa404f7ccd59634dc53e8663a2135cfa4d38220081668197364fc82f4b49bbf0058c48ccf967877f756d6dc96c378c212c6eb4bff16ef40d5d5d00a3801b5aa853aa072694d8a04a97e07d4828d3358901731fcc72eba07931355c03094837ec200280436aabf7d1ba8bf29237029259ff5d9489adf85027b8d8fbbdc6de57847a1f5c22a20040f362e0e992a4d0ec83a8c1998aea0ac2ecb09b4686bd66106cb91441e1047550d87c0e9b0493da427e6e5424e59a204d6513a332994328802fe64a4b651b100e6466e3a35e5e3882986ff22bd5a9b7c64c1585946749e668f89cdee6d680eec6d41b20b25fc05eef04e097a1b46f8e916b03882dbe006eaa11b5bc33c884c92cb26fd82fce0d1f4bcebd747e245fe55469c7badc78943bf55a9c5fad8a79e3761471275ae148d579d699e4c1392aa3497bd4292d46d246be28bd4818e75a1c36e89a99c1c204d4c9232e3b685b4cbe6baab085826823ed8bce2360136fa5236287ba2f8bd82f5c4abf97ed55462a2fcbba34f7d8ed88898cb2f4914788236023e264f254f954debbec98ef987b3ec675940755d3af7ef9da7fa0d6551d1bde4a738e4cf7eee542760cec321225be9b4b232c505e911f290efd53cd6fcb7a6371bb8db18087c06dadb7d8a873079af13055788be9787a3db468e77b5bf0d1010c8fb105973f03b8d65020b0f6ca0e01f406cf77f61b4919d2fef7e3dc3a17839862717c02888f4fc3a8bd8952c3b4b71dbeccc40377472e6950def34fcc973ebb8c365bed24364a77c65744bfe458ae7d10a42e280e1256def1df8cb96570fe0ff85882a5a361ef2ad7556c660ab8f653f68fd9d59d21824866ca728ed079ae1eaa495e0e627dc75c2f26a0ee982480166a471a9a852ef03e1d614abe7158892d8b6fc7fe9387ab1dbb769c39d6454b7ecf1574fda21f0d85f6e8d234ed830f0cea499e6296e9d240ca503c850b824ac3c15d6dd326f55bf6eee8d8baa6da0e5b92f60cc2ab055393690979bfb87f3489f31e7f2fe311de15e91f86f0cdbecc0a7f41dd7a2beb80fc534d881dfc35f1dd00f41e4d26ce06143a2de3eed01f64b502579d7b0d0707d4885cb8720d2b90bde588c48f53b8d423d7572dbeb48138d4c2f1b1e014efa9bb7eea51fac90e60d8360130c0311f0d2d01bf44c884f475c363f09700f6778af46db1451315e33f878f2325f6fea9718c0bafb9cacbdb3e1b6b4367d72aa70a769dc338ca92deda8d14f4e6fff0f83399763986e88bebbb94b7618c48d92601870bfc2512d45264d7b1bce280b4b65a93374bf607c23088a05445278dee217f596e2de1a048d5969ba040176aef6c6aa60155ed495afce5f17dd7fc23c01e8cf3aede2f5804806e3ea3706a677b46815fbbc76c30f6a349e25574834295c5a928f5df4fc6af5f44d2fe1b71ecab878f69974a89e75aa93e25e80aa5995dd1b91b20cfef05cf11c147a96b9ccec6483eb6542cd1a5a55c61c50208b2d3c4591cad21fb785dfb3968e2495cd5acb96bfc14070f5f438f1987c3c8445ffe90fdcd2aedf4036901efdc9aff22422f055485d59fcf632fdce9af21757104847f6233e8fb88dc7466af1908e5eb9c4804f4ac4c04d3d6a3e3d84920a5a125c50830e6b0f3898572dfa214d722a1dbdf5151c0cd7bc7bc6349658174536d8b37108ba543cae7e671fd833c6c763ffeaeaec5ffbd5cf7297e54afb5320165552d3bcf3c0a10f9699bb762bf45b13801d53d5b9b233a83d847cd77754d339f5d00aeeea19d13614d8f0232b079b6ed304a1f57084f8d5af48cc016f5d8294256fa85314d61c5573c553f5bef5cc2444a013d7ca44bb964dba40da5a9d389bdd3d93155a8c9dbb9d8fbfe137fc907157c2d9c70b8fc8b33b259e76c41c4130cfb7e009606cb6e553330b1e7b7ea2a639f8d218a142e3e51a93ea2f1eac5bf1911dacd989cd7aa63017c175c39a5504315afe1bc5906f509fa7447aef1a7450ebf8ab63771c54a9ab4c34950a9538561c3e8f10e97d704a59c2f55215cfd12df1dedb00cb3f0d763f16c76386526bfe6240bbcc2c64c3e7ea86885fe3dd60535dbe95c406fd432642049b6c0388efd9ed9058ba20d2f1cf2db764ab13c6ea389d823e2b74f379e5f09ff2a7f456c59048f131fee2890e24988ab9d5416cfbacd673ed05caf9828625d73c1d5d82f50645ff5e4c39975ec606742e2af34c280025be7104d44dde61e7a03cac435c8786cdece43014cf629c4a3bbaf38abceadfaf9363b6819f86095873f7950007539d4bae62b92390e812710dae53f477226dcf69b854ec2a04a06aa7c09664890744a34bf61e471909ae6a8bbbcb0e0074949c6c007ab543f5ce4eb10b0c8c1c5303ff2675f4e601c1c73d3e2841c7c967c5bcfb1929f767e91f05e48ff8d414240bc6ab95040c4d4c1a68784cdbd58364cc6abaec85e2d0cf6c3e0f585d6ef0322c170a6626d679c08208644b0f5807405ab290b81d0c6311328926512bdec2b6378c14dd283b7844b0946dbdc10c882513d215aad86a967fce12062866b75d6c0287cb17c2a7134c4db12303a40334afdc7a1d18e4d50a717a644f51ec86c156c7373578a764e5de3c3454d5a60b5eb661b8a96a609a3aa6ae956d7129de6d6605faf1cf029994f6916a1864d6206b8272a3225bb33ba7e6766d156cf2f1cff838698541ba4df13735d75c9511e1b18e0c372a74a954993ea0cc50be9188fbccdb99237b2e53ac9089f296662ec3d7ca5f4d777d1a8494f31c0b97338ca84bbfcf586feae9738c2b0acf33e680f3c652a486b27e0a339b303333a8d42187482b2c5e8bb7850b57dfc0d83514e2a089da76e86b736ccc9594a0c207891c56e297fed4163f19c57e335a08dabc8bbc99230fbdccfba1c45d05ee800ccd9dbb9da8899a797a656c411a86919dee38ba9d3bfbbd8aa8b57ee2223a131af2e3188d00573170574c8495dbdd4347e3af2873add9eb01eb35dc1291cde2f98a2d76dadeb47f2b837bb14098339818ac0824f85a8b1e8830c4131b48bb799c68ccb2a5d39c70930d1fb6f3979f7bd0b7c74ad0a80c816271c74856535d6d25ef7b37472df57e51a751487ae03405f02980ca6f8ebd29f9078de1036e7dcc1ef4f3579e2997a9b26f6ca014fdcb8b5667c6f977178cbddc93475dfc8cccaad49be9c3cebe6914610e752b462684d602a9366fed0f2629ba36eb84f33787b1f4db7cd17bd75dab66686ea4a2e38a8b42f9fc38582643b5ca94842df461bb3b280522efa757376bcf16e12ac0329f19a319b34c2383add75c6f4fb0efe2316fb60806cfa3d95f92294006415293d149554171672b4563f54a8bb2f199872e22d5887d0f0df94c2b3a21d5cc792ec253a76139877b1aa7c66e7808fa9ebb75f2a4662474053ef37a62259b4041d3500ae8d34298f972d4d57edf88f7aaf3b8bbbcb2205df4a0d98e94c6ad6e736e10a8931c7a2d80b2b7702280ed5e5a10bf786fe91df441b93cbb60f743be1961e168356c4fa0dfa4ddb944b7af2b8f54e77259cb8d1b91f7fa5ec70ef31a6ab5375d66b88124072b4a5c8002dcf7d263db0aa4e705fdfc54f97a6bd9510af74eb8b3b87f03cbdba86b1280226764fa5373eb12f6c698d8232ba7fcd584417f138f3aed405768f8726d63a3a142d4f471118f4d112493390995c616a5641ab2a01fde4575915a9ae0ddc097d56b4c8efb85dd19f9774e49efdf4d8010f3698d3fcea92ed7d5c07c26b496f41b0eb0e09e275817ea5c22a3028174da780d83e6c8d9a4b6cfea0682d20501a1cb351c76a9f3bcbc10e092e9674e198e81809ed3a2861207852ff98a312fccd1365f8ccf7889ccb5413f340533df43d85b70774f2f9cd1bd35b6d9117ef69f0c3d2e831b22861325d840631d9f5b83daa37b4f43bb568dc3f44a10cd3b3375bd6892da261d1dc2fb46e6a439dd13580a1ef8243cdd4c599992a0938be904aecf7e65af6a14a6cec1384a67c0189faf29245074719bb615e9dcddb865acf99fcf8003a27b80edce74af902d398643fcec36b0a31e93dc862c5e5a8b1872b4d98a05e5afa3b8306699a0834959301accf6dd2b0d30e701aeb597655d463d864faec3fe0f9a9f79da211fe12687711c0247f0342f88d5f4ddfb4f20add1b97246b9499fddda5b33b8e0a75e5fd6a13fd2834d1d67c0f3e1e89a23f67a8b1b26ed65a154be9dbcd029d104e2e92ccf1ecc2c170b43e95d01731a73b003a1d074636a12565df94058a291c0c309d0f73e5d167c37eab137c1321d03bf41c617c9f1da3d8d54fb54aa3a10c86b9ade1fc1a005f209b411afb82b447544f4736343cf0e795698972e82aaaa6f0f81cbd7c3bb630b60b9c98df500e96809fb6d846405c9ad2aec2bf5f994014ba4994801589480ef02a078023d2142a5cd53cec3e364d65f2ed91b18a3a0620faf989ffdfb7b81548c812ad6c96b4d2a1d8458ceacf108dbcb41c4b78058b9f73b78872545cd7141484b0fc5b8b3d3c09a986a585609ec661074da5aa0d85f663e3ac305a8c1865b62f8eb8828c202fff58e0ef49f1c392fa463e54246809100dac6332814e2d7ac899b264b02dc4cd21109936d0dbcb555ba35d43a23746fde9bd9459d0402ee24e323aa1b18e3c5f4959f198ea83cbdfe88a68acff4e70219221b125af767950720b887108ee61a502deccf2d858bef001eec740e9a16a185d4832766c0afb4099dff82b8a6b985ed70bcb1597cc127fe1d42440be4fe24f2f26efd87a94f7ae02a32e7dfd14dd3013d1e42d5fb94e1d64f8dc9e12d634d1707150c9d2c2ed8af17f0229807cb89b5de461d2f2524f42117f32368e57146328d56916195c755a874a422b2d54a8bc6085eed3695924e5f6db81c27bbdaae04d3ee20a6af4c022807db19efd938f5714665ffa6b63b26069709f46ee24571f9277e999d4ac598d12efe0057be606c1a795ac057d05276a7a0374b0e4394c6ad904d804d9e11ada203182098f2c6ca1fcbf9168ab05e3433348c012425eb4012ce032e3cfddca6bf73ec7d16422f675511354e889aca03fccb542cab10a82a16495e60ff4dbff1047ea439fc440e8a89edbf17d04b243a1ed93af0a9d5ac26dcecc9a1fdde86c6a20c59ef255810e707752f6f81dedc6df3576538f8a5d388f3e812537ffb7e328377289b4203f50c0d5ffde396edbebbbdfdc6d0a9057baac0e98be630de99ea5fd9c9c69078d41dab62ee3567766cb0332a9a3e50c7a3c84db8bf24ced65c06273b2817229ac2750f0c39a7af4359029f24161a32352000025341bb511ef1c294188f00c5740527e42fe19dc323b08769425b9ebba4fd9e97615d2873408ed8b2f3dfb16bdc712beafcfa656e831282bdf72c9fc0b7db3f28fea3faaa6f9417f85cfa01fdb6cae9b926df81ca4dcc8ec1f9dcd54eb6702c1e8cfab73799374461ab39b39286fcb189c6d7535fabd36d45d3de71bbcd78a706d5d6e1344d2933914da00090bf345c401929646526fd6dbf0ffd13be6b5d0b17ae5bf52b03d1bf53d8de74c0497cefa0a6a31bfb8e67a17c6c48a0749ba4250b33995ef83b669d0446382bb270ab2731ce5ecd438ed3b3a1ede3b6f423c7a462a35f2ecbb18f0519e6e007fb2e4c566abe63f6433ea4e4972d4f9980e5a6832813d5523d48ec7b545a2d3d51c3b1171ea007e110f8c9df7e16132ea533d7159da04bb7c5501ab9909c0d319b2ca31242365ce2a1e57b5c77e11f14eb164835a8ca8943965472865397dbcd443acf0b51113e6fc0cdb653ea5400ff1492e326225521b6a9bdb4e86c25463b46b8da44e09b0174e05872adc69e1a134a9c0d82c84173a04bf7010dff897ccc2f65a59b7ccd1a742ce47e69604d1046f5417c26f7cdb920e09e773c1d4f63588b160e950d8d8c0b2d5553791a26add94064051c36a3c3452579baa1c44524d575773a5b2d68bc0ebeb67c39fdef03bc1f9fddb92553288ac3d9c2f19a99b57f449f417062ea5ce08d1cad4a886245b9f9a594345a1283b56015077f4f4ee4ecfb571e6b087514a077753902c15fecd779aef37d8292fd49e77a1646ded278b93d871c40a1bfebd51ea47fe132eeb68cd3c474b43fe75dab59aa7904304974c72f118dbe14c1facb9d7ab8f2b1e4aaeb62a484ff81808addd8da83611c1b83f18a776c9be6ba5cca27934d8b51cc49e35ce2de61b9af7cbb055debd2ad1e3e4e280edea0f9533edc9d119afe559475d206174df148ea593e2d47941cd185d644e13ee0b8c4a63c0bb2cc394c99c37833f90bf82f1a92152b14bc50ec95c40f05485eafbe6f78c7f861a3c0be982a1f8f2cd580c0b95b2f32a5f6766b36044ca935e245a24366e3b816940fa1e333617343325fda28b21bba84a8aa2ce88cd192db2bd57310b7247c8329e44a4d3a3fc05535e6eae402ec0ceb9f422dc6c8020e60d27f1233953225c723c997f64a8c863c8dacd5ef35717c4094d81a872d6f047c47e9688cfdc2d72fc1956e98b8d958a0adbbda923223cf1e3d729028e94212fc00e138c8b4a1a6635bedba595ccf152a05bb4f02f372c2108ede3b9c106d8671ac99842a7830542fc1d81767d68289132bff80201a0dbc555a57c27a443ab14f347fcbb062844439bbcfec4d858a9be82868fd4ed25767785b8aebef10f3e65666a4d9604fbdfdf29600fe8303ea73be19a3996fee48ed152f92b39ee3214d9f87cfb56fe72f6da2ebda1ff38c34d88a7e87f66b22bf30687a55548b6e985da8dcc566f16d0b7a44e03053dda59c1f38b2e6f993a73ed7cd291e5838038c5a9e8b0f6ff334c6627076773ab95ab1f4f14a7ae2a9f1427d7f87bef9caf6203253d8ce3c50b08778cd3d46200ad5ec160963abcf28616879b2c277b1550c3ddc9fb83e83f8d3dfe32702e1892a27dd5db27d8b7272cc703181c47a851e14c88704f35526773f6f41be6b6b1d8edcf9006482d7d838334623894e3c6500ab160e4c4c541257c068911a0fbe129ac9f4ea44bd49faa5707eeb3a9a84da96e92ee97a1be4d9e1209b919965373a6a6ea17dfa8a3865765880f6710bb948a236071cbdefd4e0b0203aab342662b3bf99e83c8a52a020b9b1e0e41a1d26b1f9ad59c9c17eb60e7d6657bbf5cb7f3b48f392fa7f95d2df1b9e4f88adc6500c9deb47da24f3d1f9d6af5cd49dbf360a575de5b7281cfb4dad34037075f50508b4880210d640c7d1bcd4e7c77e0313a72266adbc67c0824b3e862aef3408a6fe63a15ed3a115f7d8194afffc8f007054772fc59dedbd46e6adbdb07ea65fa74119ea2d0f5f71a8dddb8fa82459294cc32b9be1bd3272073e7de9779f00c6acc59e7340a5ec3a212e442dd2b43ba6dd006259d5ac0ec2b1f2a2820485dcd21a90eba4bde37bd3388e91bc77d3c8a448f9e79c57ae9798172f416aa61074c0bcd27061019735846943bd98f7d6308a76322a56e84abbe79423fe8197a2f68fe04d8fbccffc273331aaa81a310ac531080c963f691e10fb3e7b2210a17e481338cf1fdf216730113e527b9e03e440ecce1c9d792972b578efb1d88d521786e45b97937e264425d2ffe3921a3128b0714bb973a9735e9fd962d521f4457f9218effcfae8bcd7cd7c2d58b5330cb096e208769cbf288f4f8b0675370a214a878962ba7d5bdcba6e2502346492de87b162f2767f8e110874895407016cb616647cdcd6fa699c470581c9b3ee23c5829e00667e12fa49d0ee7602a71eebc712025b1ad0f23eb4c0db7291b74ea4f32b48608c6cfb76038f12175b94770fea594b11ee1b5dee898fbedec0f8733ce5f7ea6e4fdb528a5a02b66b2d209367ca8f7fdc5a7470261829f17df1b477012165f255b893f767af9f26bfb76391c089def1f5572d13d04c3c05ffc17288bbb5e82014a8f93f7ae0d5a4e8850b0e67bd71e7d2ebdc5f1d3daf0955a3a8d843f98a50620f88608c7c544a09e6530c4e16795003c08d75bf9714472286ebe864da167cf1a8f509b8b21cc269bb2e5b835f46c03be6e2aebe26a9b0c8e8d5c9a346442d7ae317e18ef5e9ead085b367b2afac81fb703990f96bfec8c8af81f259baca7a1940809dbc025f5b1e1080c9cb652cabf01129d6b186b5d2200525b441e5eff52b7ebecd0eba379d4308c45b33829e898e12fb3ad0a2c8d48654ae82ec97f00e1d6c7cda48b4a6ddb04a91744b58ece57a2bf6d3a52566dfb4960e953ab3dc1645f4efefd0d68401f6abc3215fbc6782d34f02b9545db6d722ed2c05178ca64b16bfbcea335e8b6567b50305c6b2c56727e8cbd302153d564573f979467c659c4bf849282a1bb43038c20a32b758b3636a60b424bb460b4c09210f5a164b93a577a6ed50dbca766a36c9101ff684c5b4f83038dbf0bf466dab53ee7a0e2de5e52b5c3f307fdc321d74adccd35ed258029d4691ff8a03ba4682d98287027601c9ca41d1c942a061ff8dc585beae1150afa1e953481d912dde0eba4c39eef0593e0000fb981cee3223f09840e9d7d55f97e5eef6b0633200ec05266bff8f558b280abe60ca39df5dd8c305665788927bec4261cca5258c902a6115be171d0a3824ffc33ec27aef3edf75a4314d8cfcacebbbbfd631f2c203e6d8c8dcaa41e2add57a8b6eab554d1c2e8068b3c8ead36a18a7e457b4f2da1ae47a533efcea57cf812f598e17b38a352610f36d7610fbc182c4a54174d8496615f4c0576d46c2e25938114b80adf2af130ecf00843541afd43205a9ee0aab57a1301c87f61e260925709fc6c402d5758f71ceef13517d19bb601b7bc0198791d8cdabdf616e956a0e2303e8bbf3b7f189f32e4db04fd448b980af2620f1dd445102ed1b0c1836825b247deb549f051a8b5cd06f96d160166ffdbc8d26b47d2ec87e55b3cf6513409de4af7cf63bde9ab3f9ed56c708074c12a4f01114fe275aa2545017660a10e34855a034c79138ccc6b13204417e585d7af6dc95be5e83fd344d1b2eb0cbd00762e4bf8b51b90f7e6597c5a36a250eb1da87af1c0af9fd32b9efe83ab02a5a782069750072299c4571665bf272077f04aecfd1faf89a9c1a7beb7d195549c6d84045928a6a110cd2abdbf2199bbdca41f34804b4a57812fc4e244ecdc5636d0db2efd46eb2cea0a21e068b0d9d478c82f2d952d209f56307702ccaf36a7e2dc392fd072838e5460f529e8f8a09e28ed337e48869c71427fa802264ccc7b8e0e6980d73ea155bbc2ed85e3a520517742d2149e11ef95722bf1f22e398931059c43128b6c7ce8e66ceda38e75fbcd7fe816f6cff3942221bee10f751cfc0a6ca8eb2f71603b1f9c7fbd0478294c92af3a1fb03aba1c6b94ad95040d77f5e55188e66cdf91c3834ca76f18b602ffc159f93db5f26e083f2d0a01b03d051788357fcba6f09fd70bbc5c508091fdfdbb60924c9c30b24706f0f03eb8293ac3f5cb4069881bb8dc11e814f24d5618e7bdd6b439afc9548d6f5bb54227a711181555cf5bec47eef9120cd8354b97b278cff2b83e603e1183f48316c046cd8567aa336defe393d81b4d14c21a2a6621d3484db439b4437020d5688df640c27c43a65cacbd178f12caa787ae4bebc9d4c04a7d46cde543f7f06bc1d3cf0750203a3666789f26399ccd811ba69194959ff04ac1d07df149caec357a4e5ee015f6d7532343c490b3c6d6cdfc903fd6a06ca2d3f87e6ebdf2ad0e80663bf1b12e08067569046f1e9ea619e997632a1151f4aad2810956d3f2485c106946170040906736c778280cc4577cf846014b0a833e30d98952fb2a55696419139f14ed1f2c2285a47aadc17832dc2848734d319152e875d1b5af58bab71eb252806bf87fbb2e0bffd53f39c313d310ff09a0721230e76556e02cd9648cd07b67df0b50d5de29834cfea388475be91d5607135764748d25d72ce06872ecbaface13842900ab559e7984964e887dff880da9c82c933aef3c863c5d80dcf8e7e7b47d300f538eda3abe2408bcbacb02d5a98d89d1d2d1ae373911ec7f8ce86cdeca968f861dc5d9174cc3984fc47b2c75aace691404a8c727a2b8f100f477035f50bb170041f9136a25da1f40d282a56b376e9f6f18b73ddef810856a706b9969edba557be25b362499ee8fde5fbd887d0d2fd87df3ba99ce7a2c73353d7d9dc8438b5631c06b7576311e4fe2344c88cc7fe6ed45dd85aac6c302e73f5976c98dc9c26879c6aaeb71e732c6fe82cbdf118fe47b7413cff34b882a41e2caf67817f0f80115e510f4c5b47a18da251c352a7b250581f045ec5a4b8f97a2a1382b2e0c594128cac8f6d8cd70d81c8f44a3601c8e0eff24b027718dda044779e5f861fac1eb127e366a461ca6cd00ef38b1cf38ff942432efb7f57d78e8378dfbb8b21e4a8957fab8bc2d97905f724ce08118446ffb533fc8ef36a930326fef0a1d6b4aa7bf5718fe69266ea0b8653d683bf5e7d42c52b2609596fb4801036fc7d2b32f5861f183685bcde063636df3c458f527735efb94ab00aad8e17a7152142a0dd977a5b44be30c091f8a1d30a22ad502b219605f55751878b0eb55a53a21bdd67af779167096122825672258a094f978d008ee7774c753f811be3a4865d75a6e04157675abba536ac6d7edadd570a087ff851ad3ae2b8489b278aca1d90443e74173afef0262f46b0e32c22817e478d0845357b5e608878c3dea17fc85247628277a50e349b5aa94686d632d357ed059ef823d9928b394ffc1028701def8cc11263308a8b991308634846bf2903b1ff50f3ead1b8be858e09fdf059ddbb662fb66d7ffef2e4e5d5438ce7ac151353af9cfa9960071cb330f757ba09ed3faae9e1c7e36c5e98d98944a11b8a65aefdf5f262c5547577bc629f2457d12ab03cfa98ffdcad91b176fcddaf4a597be949ed9bb047adecaa49b70e972acfd092486a5bf7d67782f54a817661627aff5e984930130c8ad0b4a5c2232dbde537fa97113adf67de35092ff335e1a064c46b528a4c06bbe8b03f3a9d9d5c72209c7474a5fff5634d581ccf17ae82b46eec6eb9bb2d369f9ec3e5613042461b6337afbfe8c2119e0b75db42f2da62187c1215bce069b7b23557b6f667a826ada0425406fe717d7e59a021740ac50f6c28fc6f8f92875a993c266f73399e70280b8fa567faa16af8e0d98890c5b647798266405896ef5f9f19c210751a7ef76fcfb3f20d0605b12b9524741e262c7fe99d66bf8b23255bb71ed9a7e97d488087334e8c5113618aa9cb807c33f24a8fc3e11ea23a160c1c60d34343a55443bafcd69e313f9984aa1c3b7e5c2e9c0f173a90ac1b812b5b1325dbe35c8480ec43fd10e2f78f50234984ccd463b617c6c59261fc792254a10ecd6e124c5ca94c70119735d5cc4485ccb365f1cac4db33fd504259a2c1353d98fd79a4d7615348eeb9bb26984b8d90f5ccff46faaa199f74acd3219eeac4baf722dde9cb74b35589f6e30721a4069aa7d4017285e6d2a3a3f022b6dd2121d9fd06eb1d0151128f4f7b0077054c1652f0b4f899c822e5ae0f85b1b62020a5d86f4bd00dcfabb0e2a6e28167302e19d44c05c0b306ce7399857a64f7699c7f22adc43ac54a9f61e19010ea1bbc4143c179fcae1b2a7a81fe757c91faefad9f616db0d38d38531703f82a2a004134b22b15aba10a7783ab4db40b2d1ed727a3ee33166459b67ca831de43e1ec66a5fda5d0fbe4450a230b05e1c48bd8e46024e56fddd461e8597cff34a50c6969735ecfda097d8a4b37f31828e0020248fe072c71d57c4319558fc6944530d11989cbb88a620cf4b80ede5d62c4dc82b5e5699013346c0fe0e43fd263ddec3f176c4c70eaa17fe0e560b23dd0b709f69256b84f1c9930000d0b6c1769226c32010be47596c7dc75c8c20c0316175ee6a483fc20ad5df5293ba1baa2642518902385777205be50830c943727d7593d2e7f600055f01bdf73c7c0a60ed916bc8ef764266a807660a86364eb16970105a1afa3528fd3a7a5f076236f80a85a08f444f4cb99eb453b6f788240c3b605941eda6ff630e033b4cf47df762612225f694d18715570d135a9ca322fa3e14dc40fbaeb85b7b062eae78715caf5854e054fe8521a31e016899123912ecb0a2ded9e32e4c92b8698b6c14577933e57f90a76bb8a880a23a3be34b0ca0d6a845222510c63b942cc5b25e5062513bd3b9dc208844cf42ad868211dd310321b5f1542e29dfb676d134be10ffc443fed5b86710e58cb8e0afccdfb41923e3b5e4066dd993363a1dfd9e31e61a33a58ef1e953ba21b4d998be6441ea00615691a96b1b014b449e81f9a7bc7778d6de8c1277dbccc410e064c4b00e0949d57dde9040d6985e4b211d860836501e5167ccf95745b12135a36b11f7b43b3552cc11971bb409d962ea21cc752e9a27342816d464af9b8740322679add6800b93e9ca6b00ecd0624f366cfd671a1c2ffa4dfa27c8cad61e0c7dcd896792d6c856927cecdee32fb215b753f76e93d78dce7d4fa8f77557c2f8a06c9763054630a48fd89e83c30d3643e238e3e1f410f1b80b9f5608510da6248873f824a09a38b300ab92eeecd77426870e819c1a0d3dd0067f28aa26345ce4ea2eda583ccf1e651a46069a3e5eddb27ff69a360a4755893447a389ce95884102830e08ae6baf5b714b2502e0855a237956447e9d05e27bdad9fa17390a07822a46feeee0f513d06acaaec39e86bafe573e9adaa1d6dd41e227b377127e464c670c25fd1dd700388541cded6a752658391ae7e51aa35a301158ac5eac035b8af5f8f0223d2c708bfc7517ae520ace3ca8c67e273855c119f47b0362e2d86a7b7bd31efb68706de439e4d80423723b6ddefadc19903efa2f59c093b1b05131173aa8c436425f8710a3d18b6f8a6a6a935474665ca637bfc14c3431f2e72cadfb75306ad485e7352a6982df2049d63ab0fb6f92ad9da19db94b2e79dd737aa22508c1419e79fbcd4199feb3f9b76bb276a35a94e245a8af199277addc2e7636add25a07706f1114018575f73a84d5366496667db826b68fb3d72a5dc161ca40dd67edce8d305be953ce4473c52e75443a398dc616718fc61f56f1b5b5945f51ce32d86875d15e9f3dc3b939539ed88e0f1e963caac78066c68c82aa204cc3f1a6e306848d86fd237090c840ed7917f88bfb2e38011cd7a3b5aa9b63f3fe1c67c78c9bdb567c0ffd61a939d1b559bc585f16d5c686e180812e5b324084a6f003aaabb12235fdd19772e89a3995e6a335e27b24a4c7c87b7ff7b8ff3f70d150d594ef9486843899987277b2f505243ece510e68be0820da8dc17c46a50df2aeaabfe4348facae5f481056222298af63eef5dc77fe63177a5bcf94d54ee6dee780ed3873d8702de57ac430774781776d267b069947f2c63a37fbfd4e5f41c52b4afa031846a27972900448fe44472bd3f0f62fa14adf64768dfb26fabd837c15346a947222d109b628f62205d2659089a6e4f603ef58ce03a9002ff7336da268d72b58195d6639fbf69270c2a6b45a101e115424e4a0cc0cb5b3d4b2e184fd78d0c319eba0bb9d9f4f4d71023c6c5033d11813b8a9087b076b61365af3999460aacb3c25b5af30bd1386acacb9441b55507565b9958f368f46ce349d728aeb6c9ad1c4fa7d4858183907727c0fafa6c0a834cc96f37181f70bee80e44e9c36fe978e7c93e13c24ebb9fa5c2365e0a439075f3fac636b5bd599d2e0fcb41838b607630c7677923310da60db3826641f319388aaf48c93ade0b4f07c2c00682f83aafa861f3411ea44bde6c1c0dfa4a90fcea49ffbc675a913fbadc9d093254727ec59a44963e3e172be0e29d68515ddfa5e7f7a3bc257e32061282adab0bb9ff228ffc17ced4e8980d360d5a0477974fc54267b02dc34bce5c82014d0aa0b4f4c754a4d479d217ccde9844d0424787aa876896540ce056d8ca5a58e90c00e325a3da1f46ef8e8b74dbe7e55ff4d4b77c836d7df77a6bec65a72b751d4b6af8be2e5d008c548feab589c10ad55155e1b72200850d6246638e2a7fb3c50b882139521dde70765207bddd005899025d443f7bc678cdb55250b6932dad3aa47ae4a6eaaf6b037089f813e6ec09738fd893a47e90288630a0350c5d0c827a04659c5cf32ffb1114adaf6dbb5a52967d8d93003218e9408a59325f591cef24f992248ba538a2c0c9d604e874255d6c6f84c9812226683a9627d72323af71a4dca7b0409da85363a95e43ffcfd2c47e68b642ceac378aa0f979a7f4e7536d4871fd8bbf7cce658b009f3c16341e7c3d22f3875a88e02b038a15b9e0f7373c70f5d1c76da7b919fd0fe12afc3b65548f57eeab5dca9866bba1e9342a7dde9da1593f183e4a18b808f3f2983174291fb53ae0f2e2f257f249fc03170cba170cb4230612599f0fb63479b6f02070dae0de651bb9ba9399aff4ac432267536fb174f516df328ae6dcb6dbf0036757b1abf28d07650bf5922fba3de6234677da5917ddeef7aa85a5696cf83ecca6c4422eaf5052a97c159f3f526dd367d389893b7d1ad8b8bceba631cf91fdbce73b59734b7ba8079b14ca767d44af069bdb82c0d7d83e1dffbd82e1c06d42bc7649ccac29d48a2eb2aaad10c3ef0678c2f68bd27106ba4f5e00e8860eb2e388084b1fcbd69ea0fab2c8aa24b493fcf51d04d555bfebd3a134dff72cb691dd967525cfb0fe597d97c022618ae8acb0a2d87e9ab9e2d9d8af0ad299dff14c0ca99c14d84c9ed0a9cf54951084000a63e7306c74d34bd3ed8d92a1cb6c75072cc8986408750a117a5c8482db7143a05207ed34c740e2365a88efdb8b4b14fd8bca7ed269551cdda5e39fe74b531708edb0d607afc4bedba3729cf7ff17dd70dee2d268c607a36018f8cf788279070cb0ddf2daeabb68836c551fc03d469513f0b9f90c2a70d443fccb7c3067ee8e636efc401e56e8b24c2d511cd69f211e9e3d035a5880de1e8211ab6f7ce48b802a41108b9a023794b80180e9982e82bee067b36a90d650db54b7363079c2ae2ccdf4c29529400cb3cd85be390d379544c621b5dda34876af00a2c1dbded9378e120f47300c681432e9ffa78a73aa74bb59128ffebce6a12f59880497de8f51b81e590902f64c2dbf5f818f4ceae76ea3e634d0f54244d0f8ef1da142032a9a6f9b518441b4d49d858b7def0f462e1b756032140d49342a945ae0be8855f6600b94753c8a1e83ed356f5a1b42512783bd15cd97c765a19a731dc5835e8b330692a02fe68c70a100d6cac3ddc7a302ca72d06d57d135df8bb18cdc2992203c5ac02036befc9e20f01829686af1852c5c9f407c4105e3b406b3c114291b996253ef2ee4b58dac074e6039e655b51e9c87935e0f37b1313e2c3d08856ff7cf781f0d036f5b3cbeeb04d987b105916abafe267c494086d49959187f1549a4697ad018fec0f3ceaeb9e868f8d5b1c4b23f2dff04f0fa60ce42f0ec790732fb26961cfd436a3b5c8c696d66872d341bbf43e905cd2b334728055dfe33d5e63c85fa811d5fb8a02842cc8a05ff2edc7c2448a40198669f66332b6d67c473b5757c4f6597b03ece96b0950317c45b9484f194e1be6e99ac88f0f2b8fb48de8ca6ab15aff2bf7e31bcf93b05c884eb6194c9e0fefc102361e7c2935f73c62aa56c16c7fb32671de705bdffed602ce0fb1d732bbd58174f2bc0cddae4a49d46142f2bd706224849da689a83ca519afcdde65d3f8955313f24867bad6268ebe13f4b77b55e208961b1cd81714f406147f98241a96fbcb7b52d14ca77564fadcb8b6c7b972f641ca2dd2842c1fa7ab65ba902cd0a1a398ac39165f5316ccc7359f7c298ef057fe3b04e2a4146edfa550723279c2f28428db01add8ec008320d02aba9e15d20090d4e941c33a6e0363bbaeca90c76226e054f1933147d73a1bf8215b43b746f274fb85c71fca0c9016d945b0e6ea6d0dd2464a32e3cf2d182d26b842d697d3d51eb8894d16cffe6d934f58817f24071299d259a47ec92ec9c51963e67afafb51bab039204044ca2d5472af7ecad80300459583440851bf59c00ce2557660bd11acddc98b13899d2cb8833b367a8650b629fe42fae36109b64e34e6ac7b98ecca4ebc1a5b1a0df6dff2c84de3081566ff6af607b2498d3136b389ef58ba56eb403a84fb5ae3caebc285fc2d7113b8055294a24c352b99a9dd68b36f1606a88b78a309389ab5eaf9a580fd95a4a97dfb31974697d2c265141ba8d77454a0134b3ae56b6c80210b06e1989adaafeacafa3cd5253b2eb5f3ef2bb8b2f0a429a4caa5afe6633b3a2c0d65f147ee41cff35f9986a1f234065a7b58be177e5a0fcb84052a375c2466d143f176e1cfae473de8674171daaf816aa0ff0dd1be67b2ebd61a48799db555853165e4a877084334571739f2e1bcc866a33158f95a3f436fd9888e33f152ae24e75d51da3dbdaf517b9c334ec0af30a9c49b196705628e715e371bd07c944e08db52c6704eed94a8adc47ffacd059b3e2e3f47e088cd5243a4c9cb1c445bf52f9e5ce713f43d0638e4188771df9a1c2da285283ec8da3f6bbd4b6eadb66ec4490535a4290d31571f322995a9ff08a217671562ba52dba0ea07b85e9c9cf64972a4112d0b65d5a44c60c2659bfd195094d5af10ef9b92b78fb95f383eb5c6f35ccc1e69194ea7aa2d1e7dda74ded952011e2d82faa9d4e1df391ca3147ee071ce667d0f5df165609abe7a7c5410b769151cbfd4dc09df91d6e00e7d527fa700ba4b5b14464afcac13849224f842a6ea8154e57d6b19d1b4b7b15105021d493642c73ac0d6db9fe3a9ed62df66b8ca97e3535443f461fa8f8d4c13d7e0a6e43c85ff46ebcd2756d1e3229290a075a5e8e37a0b7c805f8964d03d5da2173e1543e010725f909444a1d6bc25e59a0f48d9a6d840cfa93dae44e8a2dd85e5624d2a5d37ebc582e24730094bc47fc4a13a03eb5d3e7dec3b3fd701a425b404603c6be62d2ac77062454007a82f380425384ef611d4fc2bf40d65bfae24e7ef41fd9b9c179a722ae0d0c8c42781aafe0651b3827538daf2b77e6d80fc6c00b42b17be5de0ea781ff074fbe55bd45f43bf1eeb336d55655aa23d02e9f7c41881b67a12f46ebeb2c429787d8801ed0426c70e4c383501c858b195c228f6d1e6b259c2fbb2693fef441b09d09eae20be70d28976065c3885197c40e97d0a522e639d8b69b66e50e7b807f8b68a8ad4000061c9664a02ead3bd547b6aecffd116213b3dcf81d9dea728eac56c1a8c1650e92d1a6fc65bf45ae9f597ed3da8f2fd90c0ccf4128adf51449f22a12b5c60e5a1287fd901276ac2c3da724ceee64a5b819938445b282bbb6479defa96731caf31e181bc7f535a231ed3296fd698b3bee4b1d72a3448ff640a0b436c9d20930105065f7ebef09dfa2c5ec49656ea2af60f30f2e9a6099f037a67839fafca4e9815fbc8f6ecc45c00116a51eeb49e7c766edb86dcc5a5b0a89e346ee66dbab6695f458c41e257b5f485ee012de846add77a54a735c21a28e680677583f9626dac42c921e3037b404ce51043adb3d778e6bc6182bc86ab335a83c7eae2d6ff0a1330aa84f4840fa5dfcd9a257302ead5f170eea531e1e89c793775902a7da315c58962a0f30ec89fea79a68fbd9a195d655cf74df26eeff97091f74c57209d48a12ffcb5a9f52e163cfcd0de84132ea9b84be9ee635c76e7d52697c86af41ee56d068a4f1d93c5731d9dfe073668bd66bc9df8c7e2234afb234e94cbc143453ea405bdc484a3640a813d5f169d8e76dbb33ba7a214bfe5f557ea07de42c404fd91d33c871405d25a13b1cba04feb1d66b668e6ecedc688207ba9c9830679e519bee5ddb88e8b4b3307a57f046ef66dec44c7839a17b92101cec0d123a28afca7d9ff762a0136299ee8a547420bcad859c266707b9aec8e3bfefa2f3b1168d7dc3a11cd7f0dfae27c839592a99d552c9c06709db66718bdd700000dd15084351318cd28ec6bd5593b5f9f5aada965a9f3dc8ee9e2dfed0a01c5305a8f31c5a982ab9dd8585bd8e86e0e6a000ac269c898f1d33036dcb52ae4703b60ede0861e564a76d1a3e5ff7280c70768ef56e6f9e214a2c383a2d71e760e74e19513fc2212ccaf969dcd7c2aa74a76b124e7c16d0af19782b757865ed24a170199bc06d7c13798f127f434bd8e3ee2d964da1a13c09d23b367543cb175533747198f4ce642a1e144f7be83df8ce76c70b924035504254620dbfbc3d544af81e1c2079419cbc731f633d57345b63e6639f2040f2fb4ff0488af35d78a403308d100ff9d82d4b6d080acad38b101084eec1d82a992f68e423eec5048a41e962acc9fd62a1987421450e9a7bdbe2edcf9fce78207c9107944919fa55bc7ffaa75d51606162bf690f9e054c3ddf7d93762cdbcf81ad2db29a35f9fd8de0a884674c756d3700b9deae7328cb734daa0274ff2742169ccc8abd06edcb6946f976d16324396d76059d02aa55d8e2a175f9489b3967719f5adb5de08a2926c371ae90266bda639e8ad54b61c1e12c84b205380b23cb662399b9b47bd322bc865986b00efae327fc339746bc89ddb19b9ed2bdb0abb7977bbc9ce4e41e15d3848ea06b1c6cbaa73fceae92cbeb5513c4240d1cedf98853672004a128e71000b2b7e55cb9958142a8ba10acc3a4d2c9176af72ef63fcc2ff40611fc05c36973575434978e4c89ddaec0d9d555f20c1b55fafee259ccd6daa291762763b1cdf98e0c457ea3f967fbe97c78c797054170b823fa52eaf6f4c0506167e464eba1bd24ef4acdfd4a7e951b6b748c6062018dbe181aaa47448abf08ee87c62ef566fdde2e361caaf32f78f156860c79a9958981f5a30dcaba41d6d8b73a27519052a5c420c28a61e06044423eac2d7ecdfa7041637a38700327bfc6dc62ea6ebef1b1261f957eb86997426be5fc1d8798dc3217657e461e988d63561bfc64878d28158ce4652a96841139eefc8b30b0c63872f1ad0128bae97e79ef7e2c5f26cbf378c9ec4b49965be001f79445ab385ce549128f68007aa1094489e51d2c1426f5d91bb8136741e098c3555d89dcbabbc9f6c8a22b1752135d5f5d08c6a6d3291576860892c562bb34b6e3d2146387f78b3f5637f57727667e693cef48bd3def8e0a2b679a3facb9f6b1daccda21a35f0810d9a1baf2986b446d917ed7bda317cedc4f68e924032fdfb7e098e6433391d2c054309e8a47897d4c48cd17ff13f11ca2b73d1f19206bbea28697c43b21282ab47df52e9fd5830679bd7cd9aaf053cb6929e786290fd6824f1412180317d0469a77f776779ab737ddc8e9082999d690f02828991a7bc94e9fd5aa6733023776990aa85db7137d33d2785ebbb05c219b86c8ed36db17a1ef0ca0050b3873792252128d1cc0d1e959fd1bf8ba4f82d5a274486050529d08691bb18567583e4a8db95b0ceea63d1d8e24d989d495ac8d21beed2bf675fdb1162d4539bb155ea91f48eb42b22b2fe2df5a2551cd8dc9b569f066bd37f3fd6e722c3524cb1c54e03ab0b9f05c88847b93480c8bb53a713d3a873142779dd80515b05f732f3e866152e3e73f4cfdca4600e34b4115968595ad03091592880a60389c456506d6a8ec52c906d87f2b716973ab88cb0606de363a484a81678ea0bc5ca3e3a95b5c2ba67d83b2b5f8464d90843cbd3c858d78dfd32ba7d3c987fee540201396eebc1638915bd046acddedbb89deb5c27808d0f705f3225b9df3c3728aa479f1114c478c55533f5ae76e42763f35dad16eee38a1ede27f8f18c41f74b23a8274d35179d3af39ffb1af46ab7ad604722330f0ed38fdf88bcf41a00f67b00617bb3c2daad79a862824a617c15d5cd3e7b0c2fbb049de058d93ddd9ca2e60dc92d60f4db1452034bae828dfd562bafdc150f576996a9ea99328fec96a3d43bf9024a35caadead5d1a4e792db0385c62cdd6e3e87c283ba471a6d9aa5fe68514ec70ad2bf2827bbfdca11a7b209704b342a9bdf30b955bd3b58632893a0fef6f72ea77a6286ddbda08382ee7244b1b8b3b629e9bbc47e38941c6dc52f9a3ed0aafb5fc5750d39c05431c84cbb5350dffabb5dcbc1571ef3840c593fd6e0554f944fd6f9f3ce4dcb83449819d63c1e0f311f5e94b34147f710c7ed75f51e6ff082d072b9486b2edb03912ffb6da43d94534c617fd62c5ec3c1fb1b9b111ee103a871f2972eda980845976db09dfc1d334f67a0fab1359227d52c62bea77639c82d0c038d0f4256d9b1277b6d172dc517dd63c96db4e78f3ce696b1a3200018fe49aae604d2275a5b2c089dbe93478430f9cd9d08585c54fd5b59d59fce236d334cd17436257142f3ab571a840e3a7b63c2136a35ac5d2801e986a3ec087f218c0b83f9d589d548502a7381446c2ebdf0b042d40442db1c532ad6ad8c97fd8983318ef064e7701513b6fc3bf84341e251a382dbfcc8cd068c834519e89378958ac6c26dea9952eec6033d711065429acac94fc653d19798972b7b966f2ddc9bad6e2d9bca3a47e4dc4492a4c0460e9b775138e054d061a7920ad31892b92832c5ec33930d192ebec95d20595bf7aa9cbf9f664142fc664a3eae48fba2061f9400dd32b7cbe4af0b9bf38678ac4caa855b7f86471fc05dd9dff93185f187114f106818f173703e52feab9a2be4fb7d6614bc43d7fdf4dee50c08b9d1a35ee8990f25103d27f298b6d60ea2e0100c2a77e81a3cb88e5d28e62afd47bf190e0e2b057121e5b8d2205230ada434b9069e8b430c75023d1b684e648e497bf063e5da5996452caeb031c8c2612b946159de9b65477a3414e37d1a5205b580e819694991246a45fa78233b35438e46cdd67a2340f8950ff46a9154f92d70b6624a0b40b0f0b821c2cc2d213dd8124986f8c35f4548467c0b46012efdbb0a0ce1d9bdb9474d7551652c569cfdae633ea8bf5ada1150d2cb91c17f01086fa2426a47b9c717540c8e5b21af754eeca5ea461eaf3e29e108a5d6a93155c045dcc250d7886d75d9eec43b4cbeb1161729425e75af0f3899e6ea7ed2554ad8b304b0e50f9cb0821266700fa41b7a943e9e437aa3424efa61ebd4dd6b960701a82f324aa8db56f8aed25ebaa9de60afed9eec4bdbb7ec9e958aeda67c2930485a97aff96ae15691b1987e37586e35f9dcbea4aaf141f9af8e9fa82083ab4fd7bdb97510df10e53ff280dfbfc62b5f188324104b1c833933287f8a697e7f1ac83f0783c0531dcb25480887e00ed1f6194236af3d4c470b625e6e9def265e677ae9b723c2861e464db630bab9c4d0cbbf787d6011678e758d95082a4f84f018524fe472c0a1b7f2b73d34a043870d5d111557cbe1e699e5e07304af8bda859e83dc57b32f750948e20611d3a174f1c8e976f84c5f9227a5cee32439476c484c71555aedcf6c6fb4128ce1dda0d10ad55d26e9968eff35d44882a63c102b5897675204a44a02c49d87d5c52d4597041e21548fa7dd4ed9e0ebeed9296dbd3eb5ee0dab0302dcdbf068576e2dd827ef67d0651b453d7bd6f25b689c60061ea1c2c753d948f9b87993357c846a6fadbac625832ad282a731dc9c2a19ade24490f31414e3bb75d4fb74774cbb304d28a561e8156329b7b5065f8cf487d9de33fc1af12afbd4c3e4380f06a9ed45814eecae1213f92e4acbfc6ff68c1aecd634a92d203d08e18909633f6054dd2c91fc08628387c693354794e8043b1480bfa9fc1b9385a1bef198b77f78ac639bbeab65b922010e3618caf852177071fc1c3a10b0f8ee94d6de1d505ec9daddf458fbafffcc24e85fb8f1b3adfcec4f3f7c044395b7cb43dea211310bbe3b243f60cb904338b3cd015f4c7d2c8e8fccf846f3b38fbad6258f99c36163b8f7e8d0808d18af021fc19d830872ac2ed06199a7f7f97b88a578e1c669f6a5e65c870134bf046c2cd9c2d9a97a3998878570b779e0994ba510ce2ea0556962b93a46fcc62ebe4146971ff6aaed0b29c47a797154b90a25baa8014f7b80aa556c06648b1aef0100d7d3c92a3a116156b28b18d0fea5fe3f71754d7a4448f3dacbdf5fad624e6977ee995015a93cbf17284e951595b3147fee83074f7b4b7d5052cac220bab8d95d1d5e743ad70e38d4b0fd60f70f72d3976da5554f33926f9637a3e14692bb4c90ebfdd879772d91c7774f214827b7c87b87612822c1d05ec89fd17716c46893b3da4bcb22f6482e85dd8777b0e06af5020d814578301dd1383312d510710bb1839f580bd89128ddbaabfc3069bfd3febb4fc8113d27c861385cb056bfe642f33066ff297aa49bddc8e6c38a5e74bb9b34575debf52ccbf49f52955b059eaf3cee554dcd3cdf69a972f55ffc7275ccef51655724279128ff7793c4cb5faaa32d61b84203fc9a03a51772fe8a6ab93159b6e707396aea5632bb41527b3851573919dcdf94e5581528049547e80c27edbe737657e319a98cd6790d96b6445b7464f8ee660eb086cbc96e6988401fc47ed26a771278bc4711c46a2727e5ff5f1313ed180621133f8fee25302cd9ba03a163b90a7fcf646a1367f8e6c78f43cf254cafc23614ca3ac2a9ecde5aa69b9d1aa33fccbe62d4cfd8d3bd27a96d02347c23e6a490c7ab012ec44f60e070be76e3e28bf2e088cebcfe0f6e021ddba5aaac42d5854742cfb60c9dce6f166109db2814cca1eb695dfd98e143b57ff183831f93fc3f99965489a48c28c316c9eb9cb06815aa3a65e804f69c2615cd02421fc984015e07b9ad2924ed13cca1ccac457678d44d1c83490cf3a2f4182f97ac6b9d3b417022fb8cb053ab873138394650851440af812b2ad0e530a664d20ac6e5da1ea16fccbd44018a74e65184b0a156b21b6da82f5794703587140c3d995cdc3b6c397fedb28741787f56a1288bed5f5bfef3e31543e74c23847479b6bb3b4238f47ac8b6a1034c789f38581a3befcf2d3d4c61d0af77d8171dbd392a30b8879817a79deba6a0a9879d319122b218b54ebc28a1ce34eb0060dc125d4f6d85d2810bab41845744e11da5bb162c5d654cf5f878639fbf6a5a3d7049d89850f8dde9b53cbd4ce3dcc1d549095a3be40a7349c7b718abac3e53f1ec5ce35aa1ae561cda34350a07ffb45e2a97db01b0efd649be571013893253e6248d6500ba9d7e4316ba665724c996b096dedaa7334f767dcba4e4f0527bc8a1e1ce9240b681ad28667faf9f259e71cdeebe484ab9383c9fd9cbed48c5b9342c147141cb4a9d2c596824be73f34305068cf06459e80ad86812482bffb3e5e0f777e38f7f4ce03d9558d8dacaf7a7f6584c82cb0af6eac27274d621bd716a61623d8110134848985be9667d0e4c90c168d0bf25801e6745f281605de935deaa0ddd471143763ed56669825a079f1e92b0910b04c47fa591e50c16ec92e8cd1e5eacee441fa136732d4e7e5239a683bb2cc93678d0e773114586bea0b21ee20e2c7964e0031c250a0472a56c1468e4d46629dd43b500af74826548ba170efa2dfa543d41bf1f754d2b742a90d1e41fd9259c08e867b6b99bbf393440901e42d57ee8fed4c26095494e175e7e97ec02d8ece346dea9956130d744484e6dc8221d9d0a1d458ff92301fd65d18c3ed23c84843f6e0fbee4c7e997a9a0241692110c788ab2e9ccfbaa5344971b648cdc43763c2d3df23719efee0081aae51ae052994b237b458664513c0259bd46411d2b0b00acd39cce8f29822172cb08cdb5dd8285a3cc63311a3fd5bbe95ac9e30ab28fc54bd35a7246e26c2620e2cbaca4d06d9b330ad141e0619b18c9557f37778410925338f98c8e89a6f3347244ee4acef5a8f877289aebde0aea846e216a646748567a1ade000089650a4399e4fb7da9e3e88ee58c1b8df381d3ecdfaa86fe1974c1587dc5b9adf2f5b47d8d6b65375fcd6a0ce0e5c934becbe68631c89407fa4a05912ede24fb9837fbdd19e3f4930bdc2ffead95b69ef089e601344310a7de01b7bcfeeb833b346731ecb2a62aef09a8d8ddb92d1580392aadab17953007d771ae96534c7ee4877dc8217f55f00d9210efd6dd8e055f45cd2ab1113f8db8bc2fb5057ed9787da3063559df145c487acf5c7aefbdb2740faf92d337cc9d4804b2c5028a7102388268562cf77449cc7baab682d0df7a3de4c169aad2f3f70f2241fcc2554abfc668e62a187019f2525d207bbd914d644a55364eb7fa4454323a8dd43cb8b210a9bfc0879f4d396cc5eec4a790784ddb7fe6e4b77b84039e08f51cd1e81aa71120e02500567b8b9792eca5395964c1b545d907ab595e8f6225cc57320827c94a847a76134d5beb27e428038ebdedae88c7e0c4208b7ade9ba5401dc42e32f36ed56e340f5ef2198df7548bf9c9e5301c7c294a9d25d3ed055abf03e87d2b1af4f1f17e9ff57d4d3fba968a254039da19ae948303e56c79e7041a4b6279876d44add712ba4f56940710ee21097a39d8321d3b4ab39fe9b8b5b4afcef35500c15999692c2f5272fbab81a71eda2c4cc038bc90bdb7a10263a86cebf78b84a13adfb3b4a4b2a207a04f4595dcc5899fb64fbf446b166597195bc847a0a27a1dca7b87eaf5555cc5a121746aace26cf3cac42cc6bdc96e9ee106b838b5d4ce2bc8914506e323357ff06aef8a8a6c4370f015c2ca38de530b26241029443fb317b032def2860847e126e5ebcbf95454fcf2a32cb2acc3895f7d3f1a8289047e8d52ae495f67e502abeb6c189cea4e4d0f0148ba230448875af3d5b90e81be8fe4ea4d24bc9d4b05690365065e27a0f80264feaa9e3f73c53b10b1936bd648fd1aa559ec2a3d1fa652b0800a46ebf44b5fb8c66683d363850e126eb47bb91e393a7113e2cb2b9d6f8779bfd1ba6c385daaa3cae3c5f18b7474df98601d8565ed50bb58b2648fd14a8d8a90b8d2e94a6e1a742ca3df8307eb9939685a95e1a84632541ae2358a512aa687561dcab3bfb5a20530ceb83f49fb10f599a96b134abc978b5a97029a25f1e0ed46119b81f9f6a44736652daec597019856d6cbf36e7db4c5b8b3318e2ec89d68913b52e340688b04738aea5495a7081691c372e13b9c59f3a9e106df19b6a0ae1e41450e48f5bba08360f833e0f803d485a9a3f28a4c6d591fe1541d633a311258b6221b035d5428fc88a2ca7287446bf30d797589334da022da7f90eba7ee4d6b21a30204af04de856304882d25f460fbfa5ce665d2b3490d6a1c87bc85cad7661853bfc6b8df442eb152d0c8e086f0b326e89a4cbbc25f0c66bb4d0ffaef46343808eca7a5b05be1f49553f4a7f87244a6801b985ee8fc4f7a13481bd0e824ea9145206b29c46596158088632d619ed92f604667df37accf8084e18ba82933a08f2ed368a804f513522720d4f8229d5c914acc96a375834413ee6ecb60dfa14574579acebde50389965949aeef9f462e7bb9b1f8d0869f401db0599ce7a0eb8509dd751767d78bf2ae1e3f0b8c2b50134fb321abb980086c35ad32ecebf3b0b832db454c8402f2dbac1f54c9a819104204a92332438780f3676744322dba818c3c5de8ffc11cc3f341222740891b54a87d94c3dbb65a1ff8f5459b51e1a2de243b747ca50a9824a933594a706edb08247149197f4d3aa49f2a96938ef82dfc21489a07f68788e278c559d3fe31660e79be6f560273a3134e23e24b1dea86ea3ead18d992a333c5aa6638c5573cc71655122bcbce7a740646c5bde0401c2b3cde1aaf88ad353558c8545b9cfb32f408c1634e6ea4ed8c4d3d93fbcc1616dcdd45801e30f6f37943690e2bac1318a46e3d278c213b37ee0255863404662cd80e990250b09e86eced692b0cca67223769a5fb7026c8bad5ffa3b5b5c8b87ea6461d8456ab648efe553a5d04bca67643355b5cf730b8ca9b8a384be7655ad69b0e467ff8dab04f001ba12d2c30406dc42150d637bfd2e2fb02d1517aed2b6ce497f63526888f599c6b72aea9aada942a0b970e4797454ae28aee8c83ad7b01702bfd6c128ed86f3a7b2ae2de145056c0b2a2804b8bdaca27fa59b8d20e996e3d635d42cb14dcf598b1ff88002516ebfc52f18b96c638b29cf69a18118c7934d23507cefc54dee2033feb2333322e8c12d1857e890552590fb35f1a2cd3e00d9f0d4884e70509d6e381b43a62655423038bf994ad0bed741dce6ccf29097d098322a8969c541b7756d87ecb3f980f7bbedf9082912eefd4385e6f7fdacdddb0002e887fd044018b2546b501493b9b60663e4a6a01f1d8245d13c4dedd8bd4e53537b8458362ae436428e87d27cc43edf8bbfbdf902cbe49a2a975d790bb501b95d3fdf8ee0f68a823d69689bcbd0c612a7e8f9ad27c97c06623e1f836ddeb51e2a4640f9a659cb75d594a32f2891797bd1fff81439bbeb7d3664d97c7b5e8427bcf0eaa7d9048e893910a8099499a685ae0460c6f3b6051d5876cdba2bca40774f872f9219e0224f47f17c1f86bdf08f9d2f4be8e7cc60df619f3d7b9dace3007886ded6c30f84d4f284058e0f20f4be49504a94b4c4bf9c7a796bd53ea1d80551c0d405ae79bfe4b1e68ce98627459a3aaecdce416a77f78b1f03571d959d735d9dbf6febb413b616b8e5ef03f31a71a3ab86798d8cc8e69e1632b2021fad124dc50d4ba3b5715c47a531b51dbea104665e226ef7fad099fa5a574721498edc8200e632d1e97d3a95f878d2747a7e881a4ca4aa57eded39544f30002217226f8a79206448ac81fcaeeccb1faf808edf1e1123dc0dad8eb09c5c584ac08b8ee3784157e07e06fba5b957d140f23b37498249d0cc2540c7541b24687e84c74cfbb0acb8ab1aa3d2ceb09818cf24ceee7bcd474fc5a923127cc368ef8c9d1ad167e28c84bc65a01853345704c4a0e32987532bd25c1046b4f3b98b58dc1536838bb3cfa0b508305345e53a90d1c4d0d90194bcafe2f4b63c3c9aad4cd058bb48df6158b622a0a6664f6953d26b6ebaf5a3ea1dff8e67012b6fccf485f4981efe9acd61a2c792747d5da660f2ec8ae452ee69ba449c55641194081f6827c88e5cf6c5e0660a7b2866a9d6ae4e0bb469062dcee60d481a01afda9cedab7d5b36ca8ad2ca2f0f38ab3e707a346eef982d48f498efae066c8566384e67895ecf1649abd248292f44d3ce4caf85b675e1d2745bfe1bf76eb97d66babb3f6c5c1451eb837730c817d30ebf2f8ef95f6e75d3410ccfec2e7ab59e9138825a6c4dca9e4f03665c82df58cc9febef7830a3d471f4e877c7d568d2ee4881802c604b5d27a8537d84f274b4b57cc371ec7432afdc8fb250ba8d2983ca67bedc30dc35216a2ad7b3c5b7711a8b005670d3d4b2017812c1b58d20f72e40cb5e9823e5a4e6f2cc50eefb2bb2e49585412d79f21cb9c520baeb3a4c9fb1235d913e43c298e38560a49c7f60a238ef13ae2792d7980ba455effef3ec811f9a2af503f5661f239af38e3648eab51b780c92d54696d1882c17b81f155dd0877c43a417bc9f532e7a7926467153c2475b1363a864dcaa53f88d0ab3b836a0e82fcc622dbf981f90f1d5c010658c53406babade59cab1e13057d172d347da44893f9453055111df4de8c61d1ea3cfd4602651162d832976586fef21e17dff7c287d08e8dba4c2225e7d8bcbae6a3465682161e028a866df1dc8c81534a1cee1e02f67e997b4fed86781f0a5b9a724353cf9947c5278b5fd0d1ef9929b7d0c9f73848f4ecc1b1ca7b3a27b66a60015610a0cb325cff37e1d9555f262b2dff3acf6f8e8dea66a2b98c5f46abe66cf9a1373c2b1b3fb3388980302acb295ca532df0088ce7413b0b6fc4686aa86e243c6169fb1eb</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      这是一篇未公开文章。
    
    </summary>
    
      <category term="jenkins" scheme="https://www.xxlaila.cn/categories/jenkins/"/>
    
    
      <category term="pipeline" scheme="https://www.xxlaila.cn/tags/pipeline/"/>
    
  </entry>
  
  <entry>
    <title>jenkins运维篇</title>
    <link href="https://www.xxlaila.cn/2019/10/22/jenkins%E8%BF%90%E7%BB%B4%E7%AF%87/"/>
    <id>https://www.xxlaila.cn/2019/10/22/jenkins运维篇/</id>
    <published>2019-10-22T01:22:52.000Z</published>
    <updated>2019-10-28T13:57:20.321Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="jenkins-可视化构建"><a href="#jenkins-可视化构建" class="headerlink" title="jenkins 可视化构建"></a>jenkins 可视化构建</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在之前遇到过开发提交代码后，完全不管提交的代码是否发布成功，及时后来加入了企业微信的告警机制，但是依然有人不会去关注这个。<a id="more"></a> 只有在测试人员在反馈xxx你的代码提交了没有，这时候研发人员才回去看，有时候一个触发构建失败了，摆在那里很久，如有下一个开发人员要对这个工程修改提交的时候发现过不了，这时候再来解决，成本就有点大。这里可以借助看板的形式让研发人员可以随时关注到自己的提交的工程，结合告警来做，效果还是不错的。</p><h4 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;安装Build Monitor View 插件，然后在主页面添加<code>+</code>一个视图<br><img src="https://img.xxlaila.cn/1571707794737.jpg" alt="img"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;可以根据job的类型或者根据自己的条件进行<a href="https://xxlaila.github.io/2019/08/09/jenkins-job%E7%AE%A1%E7%90%86/" target="_blank" rel="noopener">过滤job</a>来生成看板。</p><ul><li>Build Monitor - View Settings: 根据job的一些状态来进行排序<br><img src="https://img.xxlaila.cn/1571708048469.jpg" alt="img"></li></ul><h3 id="jenkins-监控"><a href="#jenkins-监控" class="headerlink" title="jenkins 监控"></a>jenkins 监控</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;有时候我们没有监控，但是有时候需要看看jenkins的一些监控信息，如：内存、cpu、系统负债、http响应时间、系统进程数、线程数等，有懒得安装监控，这时候我们可以借助jenkins自带的一个插件<code>Monitoring</code>。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;插件安装完成后，我们可以在系统管理菜单下面看到<code>Monitoring of Jenkins master</code><br><img src="https://img.xxlaila.cn/1571708499625.jpg" alt="img"></p><p>点击进入以后我们可以看到<br><img src="https://img.xxlaila.cn/1571708561404.jpg" alt="img"><br>页面显示乱码，这个可以自己google解决</p><h3 id="Build-Trigger-Badge"><a href="#Build-Trigger-Badge" class="headerlink" title="Build Trigger Badge"></a>Build Trigger Badge</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;此插件直接在构建历史记录中显示代表构建原因的图标。它可以让您快速知道是哪个原因触发了构建。如果没有此插件，您有时可能会想知道是什么触发了构建历史中显示的&gt;&gt;特定构建。要知道这一点，您必须单独打开每个链接，这可能很麻烦。<br><img src="https://img.xxlaila.cn/1572059619062.jpg" alt="img"></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;jenkins-可视化构建&quot;&gt;&lt;a href=&quot;#jenkins-可视化构建&quot; class=&quot;headerlink&quot; title=&quot;jenkins 可视化构建&quot;&gt;&lt;/a&gt;jenkins 可视化构建&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;在之前遇到过开发提交代码后，完全不管提交的代码是否发布成功，及时后来加入了企业微信的告警机制，但是依然有人不会去关注这个。
    
    </summary>
    
      <category term="jenkins" scheme="https://www.xxlaila.cn/categories/jenkins/"/>
    
    
      <category term="jenkins" scheme="https://www.xxlaila.cn/tags/jenkins/"/>
    
  </entry>
  
  <entry>
    <title>pipeline语法</title>
    <link href="https://www.xxlaila.cn/2019/10/21/pipeline%E8%AF%AD%E6%B3%95/"/>
    <id>https://www.xxlaila.cn/2019/10/21/pipeline语法/</id>
    <published>2019-10-21T07:26:19.000Z</published>
    <updated>2019-10-28T03:35:08.785Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="pipeline"><a href="#pipeline" class="headerlink" title="pipeline"></a>pipeline</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最近在测试k8s上的ci/cd，之前的ci/cd其实也能满足目前先业务的需求，但是想尝试改进一下，优化以前的job，希望在登录ci的时候更加的简洁，<a id="more"></a> 而且查找job的时候，点击一个job就能查看完整的信息，不需要job之间的来回切换，等等各种理由，😁😁。这里使用jenkins pipeline，起初测试的时候使用pipeline，没问题以后，使用jenkinsfile。</p><h3 id="pipeline-常用介绍"><a href="#pipeline-常用介绍" class="headerlink" title="pipeline 常用介绍"></a>pipeline 常用介绍</h3><h4 id="清理历史build"><a href="#清理历史build" class="headerlink" title="清理历史build"></a>清理历史build</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;普通job的时候清理和保留历史job的build 很简单，勾勾就可以啦，但是pipeline就的使用一下方式，而且还的写在最前面，不然识别不了，会报错的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">options &#123;</span><br><span class="line">        buildDiscarder(logRotar(numToKeepStr: <span class="string">'8'</span>))</span><br><span class="line">        disableConcurrentBuilds()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>buildDiscarder: 保持构建的最大个数</li><li>disableConcurrentBuilds: 禁止并发构建</li></ul><p>详细参数:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buildDiscarder(logRotator(numToKeepStr: <span class="string">'8'</span>, artifactNumToKeepStr: <span class="string">'8'</span>, daysToKeepStr: <span class="string">'8'</span>, artifactDaysToKeepStr: <span class="string">'7'</span>))</span><br></pre></td></tr></table></figure><ul><li>artifactDaysToKeepStr: 发布包保留天数</li><li>artifactNumToKeepStr: 发布包最大保留#个构建</li><li>daysToKeepStr: 保持构建的天数</li><li>numToKeepStr: 保持构建的最大个数</li></ul><h4 id="gitlab事件触发"><a href="#gitlab事件触发" class="headerlink" title="gitlab事件触发"></a>gitlab事件触发</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;之前的我们的ci/cd都是开发提交到某一个分支，然后jenkins会自动触发编译、发布，而且配置这个步骤也需要好几步才能实现，但在pipeline中也可以通过代码形式最这种触发器(勾子)进行配置。这样让每个项目都和jenkins进行耦合；运维人员只需要专注的维护Jenkinsfile，创建对应的项目即可。gitlab触发jenkins的构建需要依赖Gitlab插件。这里需要自行安装</p><ul><li><p>接受固定的分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">triggers &#123;</span><br><span class="line">        gitlab(triggersOnPush: <span class="literal">true</span>,</span><br><span class="line">              triggersOnMergeRequest: <span class="literal">true</span>,</span><br><span class="line">              branchFilterType: <span class="string">"NameBasedFilter"</span>,</span><br><span class="line">              includeBranchesSpec: <span class="string">"dev,test,master"</span>,</span><br><span class="line">              secretToken: <span class="string">"<span class="variable">$&#123;env.git_token&#125;</span>"</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>triggerOnPush: 当Gitlab触发push事件时，是否执行构建</p></li><li><p>triggerOnMergeRequest: 当Gitlab触发mergeRequest事件时，是否执行构建</p></li><li><p>branchFilterType: 只有符合条件的分支才会触发构建，必选，否则无法实现触发。</p><ul><li>All: 所有分支</li><li>NameBasedFilter: 基于分支名进行过滤，多个分支名使用逗号分隔<ul><li>includeBranchesSpec: 基于branchFilterType值，输入期望包括的分支的规则</li><li>excludeBranchesSpec: 基于branchFilterType值，输入期望排除的分支的规则</li></ul></li><li>RegexBasedFilter: 基于正则表达式对分支名进行过滤<ul><li>sourceBranchRegex: 定义期望的通过正则表达式限制的分支规则</li></ul></li></ul></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所以分支不阐述，其他的两个选项是最实用的，我们在正式使用的时候一定会用到这个，上面的例子是一个接受固定的几个分支</p><ul><li>匹配的方式<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">triggers &#123;</span><br><span class="line">        gitlab(triggersOnPush: <span class="literal">true</span>,</span><br><span class="line">              triggersOnMergeRequest: <span class="literal">true</span>,</span><br><span class="line">              branchFilterType: <span class="string">"RegexBasedFilter"</span>,</span><br><span class="line">              sourceBranchRegex: <span class="string">"dev.*"</span>,</span><br><span class="line">              secretToken: <span class="string">"<span class="variable">$&#123;env.git_token&#125;</span>"</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里的git_token需要在jenkins的全局变量里面添加一个<code>Environment variables</code>对应的一个键值即可。</p><p><strong>注</strong>: 所有的触发器都需要先手动执行一次，让jenkins家在其中的配置，对应的指令才会生效。</p><ul><li><p>jenkins 验证<br><img src="https://img.xxlaila.cn/1571644117201.jpg" alt="img"></p></li><li><p>gitlab验证<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;需要将项目回调地址写入到Gitlab钩子当中才可以。经过测试一个pipeline的job可以管理多个分支的触发，避免之前的每一个分支的job进行触发。</p></li></ul><h4 id="parameters-模块"><a href="#parameters-模块" class="headerlink" title="parameters 模块"></a>parameters 模块</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;该模块需要安装，parameters指令提供用户在触发Pipeline时应提供的参数列表。这些用户指定的参数的值通过该params对象可用于Pipeline步骤。研发经常会有打出一个特性分支，这个分支用于hotfix，这个时候就要给研发提交一个可以选择的分支，然他们去部署到对应的环境。</p><ul><li><p>字符串参数<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定义一个字符串参数，用户可以在Jenkins UI上输入字符串，常见使用这个参数的场景有，用户名，收件人邮箱，文件网络路径，主机名称的或者url等</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parameters &#123;</span><br><span class="line">    string(name: <span class="string">'DEPLOY_ENV'</span>, defaultValue: <span class="string">'staging'</span>, description: <span class="string">''</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>布尔值参数<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定义一个布尔类型参数，用户可以在Jenkins UI上选择是还是否，选择是表示代码会执行这部分，如果选择否，会跳过这部分。一般需要使用布尔值的场景有，执行一些特定集成的脚本或则工作，或者事后清除环境，例如清楚Jenkins的workspace这样的动作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parameters &#123;</span><br><span class="line">    booleanParam(name: <span class="string">'DEBUG_BUILD'</span>, defaultValue: <span class="literal">true</span>, description: <span class="string">''</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>选择参数<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;选择（choice）的参数就是支持用户从多个选择项中，选择一个值用来表示这个变量的值。工作中常用的场景，有选择服务器类型，选择版本号等。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parameters &#123;</span><br><span class="line">    choice(name: <span class="string">'ENV_TYPE'</span>, choices: [<span class="string">'dev'</span>, <span class="string">'test'</span>, <span class="string">'product'</span>], description: <span class="string">'dev env test'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当然parameters模块我们用的最多的是在手动的时候我们可以手动点击进行构建部署，至于其他的目前我暂时未用到</p><ul><li>选择分支部署<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent &#123;label <span class="string">'agent-node'</span>&#125;</span><br><span class="line">    parameters &#123;</span><br><span class="line">        gitParameter branchFilter: <span class="string">'origin/(.*)'</span>, defaultValue: <span class="string">'dev'</span>, name: <span class="string">'BRANCH'</span>, <span class="built_in">type</span>: <span class="string">'PT_BRANCH'</span></span><br><span class="line">    &#125;</span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(<span class="string">'gitlib code'</span>) &#123;</span><br><span class="line">            steps&#123;</span><br><span class="line">                git branch:<span class="string">"<span class="variable">$&#123;params.BRANCH&#125;</span>"</span>, credentialsId:<span class="string">'gitlabUser'</span>, url: <span class="string">"http://gitlab.xxlaila.cn/xxx/kxl-eureka.git"</span></span><br><span class="line">                script &#123;</span><br><span class="line">                    build_tag = sh(returnStdout: <span class="literal">true</span>, script: <span class="string">'git rev-parse --short HEAD'</span>).trim()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>parameters<a href="https://wiki.jenkins.io/display/JENKINS/Git+Parameter+Plugin" target="_blank" rel="noopener">官方参考</a>，介绍得挺详细的，<a href="https://mohamicorp.atlassian.net/wiki/spaces/DOC/pages/136740885/Triggering+Jenkins+Based+on+New+Tags" target="_blank" rel="noopener">辅助参考</a><br><img src="https://img.xxlaila.cn/1571651950634.jpg" alt="img"></p><ul><li>还可以写成<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">parameters &#123;</span><br><span class="line">    gitParameter(</span><br><span class="line">        branch: <span class="string">''</span>,</span><br><span class="line">        branchFilter: <span class="string">'origin/(.*)'</span>,</span><br><span class="line">        defaultValue: <span class="string">'dev'</span>,</span><br><span class="line">        description: <span class="string">'test code'</span>,</span><br><span class="line">        name: <span class="string">'BRANCH'</span>,</span><br><span class="line">        quickFilterEnabled: <span class="literal">false</span>,</span><br><span class="line">        selectedValue: <span class="string">'NONE'</span>,</span><br><span class="line">        sortMode: <span class="string">'NONE'</span>,</span><br><span class="line">        tagFilter: <span class="string">'*'</span>,</span><br><span class="line">        <span class="built_in">type</span>: <span class="string">'PT_BRANCH'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里有一个问题：当这里设置了可以选择分支的时候，然后在之前的自动触发就会有问题，就是在去分支拉去代码的时候就一只是dev分支，而不是其他的分支，这里仍然在探索的测试中。<br>编辑job可以看到<br><img src="https://img.xxlaila.cn/1571903055002.jpg" alt="img"></p><h3 id="多分支pipeline"><a href="#多分支pipeline" class="headerlink" title="多分支pipeline"></a>多分支pipeline</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;按照上面的又要支持用户可以选择分支，又要适合自动触发功能。用单分支pipeline来管理项目，又要回到我们最初的模式，而在实际过程中，我们可以用到多分支同时进行开发。这样就满足了我们的实际需求。多分支任务这里不做过多的详细介绍，这里阐述两个功能点；分别是分支的扫描策略和孤儿项策略(Orphaned Item)。</p><h4 id="分支的扫描策略"><a href="#分支的扫描策略" class="headerlink" title="分支的扫描策略"></a>分支的扫描策略</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;分支扫描是jenkins根据一定的策略去代码仓库扫描分支，如果有新分支就创建一个以新分支命名的任务，如果发现分支被删除，就删除对应的jenkins任务。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在”扫描多分支流水线触发器(Scan Multibranch Pipeline Triggers)”下有一个: Periodically if not otherwise run（没有手动触发，就定期扫描分支）。选择此项，设置一个扫描间隔时长。可以根据项目分支的频繁程度设置周期的长短，也可以在任务页面手动触发jenkins进行扫描。<br><img src="https://img.xxlaila.cn/1571973819297.jpg" alt="img"></p><h4 id="孤儿项策略-Orphaned-Item"><a href="#孤儿项策略-Orphaned-Item" class="headerlink" title="孤儿项策略(Orphaned Item)"></a>孤儿项策略(Orphaned Item)</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;该功能是在代码仓库中删除了release分支，那么在多任务页面上，该分支在jenkins上的任务也应该对应删除。什么时候删除，取决于下次分支扫描时间。如果代码仓库中的分支被删除，而jenkins上响应的任务没有被删除，那么这个任务就是所说的孤儿任务。对于分支任务的历史记录，保存多长时间设置</p><ul><li><p>界面配置<br><img src="https://img.xxlaila.cn/1571974190710.jpg" alt="img"></p></li><li><p>pipeline 写法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">orphanedItemStrategy &#123;</span><br><span class="line">    discardolditems &#123;</span><br><span class="line">        daysTokeep(10)</span><br><span class="line">        numToKeep(5)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>注</strong>: 这里孤儿策略pipeline 需要另外一种方式来支持，<a href="https://gitee.com/jenkins-zh/gitlab-branch-source-plugin" target="_blank" rel="noopener">Setting up GitLab Server Configuration on Jenkins</a>，这里没有用到这个，不做过多的阐述。<a href="https://github.com/jenkinsci/job-dsl-plugin/wiki/Migration" target="_blank" rel="noopener">github参考</a></p><h3 id="多分支的自动触发"><a href="#多分支的自动触发" class="headerlink" title="多分支的自动触发"></a>多分支的自动触发</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;分支的触好处是多多的，自然在多分支面前自动触发肯定也少不了。多分支的触发有两种模式，分别是前面提到的Gitlab trigger和Generic Webhook Trigger。下面分别对两种模式进行阐述和实际的测试</p><h4 id="Generic-Webhook-Trigger"><a href="#Generic-Webhook-Trigger" class="headerlink" title="Generic Webhook Trigger"></a>Generic Webhook Trigger</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generic Webhook Trigger 插件需要提前安装，GenericTrigger触发条件是由GWT插件提供，GenericTrigger触发的条件分为5个部分。<a href="https://wiki.jenkins.io/display/JENKINS/Generic+Webhook+Trigger+Plugin" target="_blank" rel="noopener">GenericTrigger官方参考</a></p><ul><li>从HTTP POST请求中提取参数</li><li>token，GWT插件用于标识jenkins项目的唯一性</li><li>根据请求参数值判断是否触发Jenkins项目执行</li><li>日志控制打印</li><li>webhook响应控制</li></ul><h4 id="GerenericTrigger-的写法"><a href="#GerenericTrigger-的写法" class="headerlink" title="GerenericTrigger 的写法"></a>GerenericTrigger 的写法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">triggers &#123;</span><br><span class="line">    GenericTrigger(</span><br><span class="line">        genericVariables:[</span><br><span class="line">            [key: <span class="string">'ref'</span>, value: <span class="string">'$.ref'</span>]</span><br><span class="line">        ],</span><br><span class="line"></span><br><span class="line">        token: env.JOB_NAME,</span><br><span class="line">        regexpFilterText: <span class="string">'$ref'</span>,</span><br><span class="line">        regexpFilterExpression: <span class="string">'refs/heads/'</span> + env.BRANCH_NAME</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env.BRANCH_NAME 这里指的是分支名。当然这样修改以后是不行的，是达不到自动触发的，需要自行去gitlab上添加钩子，这里经过测试流程：用户修改dev分支，push到gitlab dev分支可以触发任务的dev分支自动构建；合并到test分支，也可以触发test分支自动构建；在合并到master分支也能自动触发任务的master分支自动构建。<br><img src="https://img.xxlaila.cn/1571984557618.jpg" alt="img"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们要实现这块，要理解知道这个东西，首先要知道gitlab push 数据的格式，知道了gitlab push格式，我们才知道应该怎么操作，<a href="https://docs.gitlab.com/ee/user/project/integrations/webhooks.html#webhooks" target="_blank" rel="noopener">gitlab push数据的格式参考</a>，</p><ul><li>参考<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"object_kind"</span>: <span class="string">"push"</span>,</span><br><span class="line">  <span class="string">"before"</span>: <span class="string">"95790bf891e76fee5e1747ab589903a6a1f80f22"</span>,</span><br><span class="line">  <span class="string">"after"</span>: <span class="string">"da1560886d4f094c3e6c9ef40349f7d38b5d27d7"</span>,</span><br><span class="line">  <span class="string">"ref"</span>: <span class="string">"refs/heads/master"</span>,</span><br><span class="line">  <span class="string">"checkout_sha"</span>: <span class="string">"da1560886d4f094c3e6c9ef40349f7d38b5d27d7"</span>,</span><br><span class="line">  <span class="string">"user_id"</span>: 4,</span><br><span class="line">  <span class="string">"user_name"</span>: <span class="string">"John Smith"</span>,</span><br><span class="line">  <span class="string">"user_username"</span>: <span class="string">"jsmith"</span>,</span><br><span class="line">  <span class="string">"user_email"</span>: <span class="string">"john@example.com"</span>,</span><br><span class="line">  <span class="string">"user_avatar"</span>: <span class="string">"https://s.gravatar.com/avatar/d4c74594d841139328695756648b6bd6?s=8://s.gravatar.com/avatar/d4c74594d841139328695756648b6bd6?s=80"</span>,</span><br><span class="line">  <span class="string">"project_id"</span>: 15,</span><br><span class="line">  <span class="string">"project"</span>:&#123;</span><br><span class="line">    <span class="string">"id"</span>: 15,</span><br><span class="line">    <span class="string">"name"</span>:<span class="string">"Diaspora"</span>,</span><br><span class="line">    <span class="string">"description"</span>:<span class="string">""</span>,</span><br><span class="line">    <span class="string">"web_url"</span>:<span class="string">"http://example.com/mike/diaspora"</span>,</span><br><span class="line">    <span class="string">"avatar_url"</span>:null,</span><br><span class="line">    <span class="string">"git_ssh_url"</span>:<span class="string">"git@example.com:mike/diaspora.git"</span>,</span><br><span class="line">    <span class="string">"git_http_url"</span>:<span class="string">"http://example.com/mike/diaspora.git"</span>,</span><br><span class="line">    <span class="string">"namespace"</span>:<span class="string">"Mike"</span>,</span><br><span class="line">    <span class="string">"visibility_level"</span>:0,</span><br><span class="line">    <span class="string">"path_with_namespace"</span>:<span class="string">"mike/diaspora"</span>,</span><br><span class="line">    <span class="string">"default_branch"</span>:<span class="string">"master"</span>,</span><br><span class="line">    <span class="string">"homepage"</span>:<span class="string">"http://example.com/mike/diaspora"</span>,</span><br><span class="line">    <span class="string">"url"</span>:<span class="string">"git@example.com:mike/diaspora.git"</span>,</span><br><span class="line">    <span class="string">"ssh_url"</span>:<span class="string">"git@example.com:mike/diaspora.git"</span>,</span><br><span class="line">    <span class="string">"http_url"</span>:<span class="string">"http://example.com/mike/diaspora.git"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"repository"</span>:&#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"Diaspora"</span>,</span><br><span class="line">    <span class="string">"url"</span>: <span class="string">"git@example.com:mike/diaspora.git"</span>,</span><br><span class="line">    <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"homepage"</span>: <span class="string">"http://example.com/mike/diaspora"</span>,</span><br><span class="line">    <span class="string">"git_http_url"</span>:<span class="string">"http://example.com/mike/diaspora.git"</span>,</span><br><span class="line">    <span class="string">"git_ssh_url"</span>:<span class="string">"git@example.com:mike/diaspora.git"</span>,</span><br><span class="line">    <span class="string">"visibility_level"</span>:0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"commits"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"id"</span>: <span class="string">"b6568db1bc1dcd7f8b4d5a946b0b91f9dacd7327"</span>,</span><br><span class="line">      <span class="string">"message"</span>: <span class="string">"Update Catalan translation to e38cb41."</span>,</span><br><span class="line">      <span class="string">"timestamp"</span>: <span class="string">"2011-12-12T14:27:31+02:00"</span>,</span><br><span class="line">      <span class="string">"url"</span>: <span class="string">"http://example.com/mike/diaspora/commit/b6568db1bc1dcd7f8b4d5a946b0b91f9dacd7327"</span>,</span><br><span class="line">      <span class="string">"author"</span>: &#123;</span><br><span class="line">        <span class="string">"name"</span>: <span class="string">"Jordi Mallach"</span>,</span><br><span class="line">        <span class="string">"email"</span>: <span class="string">"jordi@softcatala.org"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"added"</span>: [<span class="string">"CHANGELOG"</span>],</span><br><span class="line">      <span class="string">"modified"</span>: [<span class="string">"app/controller/application.rb"</span>],</span><br><span class="line">      <span class="string">"removed"</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"id"</span>: <span class="string">"da1560886d4f094c3e6c9ef40349f7d38b5d27d7"</span>,</span><br><span class="line">      <span class="string">"message"</span>: <span class="string">"fixed readme"</span>,</span><br><span class="line">      <span class="string">"timestamp"</span>: <span class="string">"2012-01-03T23:36:29+02:00"</span>,</span><br><span class="line">      <span class="string">"url"</span>: <span class="string">"http://example.com/mike/diaspora/commit/da1560886d4f094c3e6c9ef40349f7d38b5d27d7"</span>,</span><br><span class="line">      <span class="string">"author"</span>: &#123;</span><br><span class="line">        <span class="string">"name"</span>: <span class="string">"GitLab dev user"</span>,</span><br><span class="line">        <span class="string">"email"</span>: <span class="string">"gitlabdev@dv6700.(none)"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"added"</span>: [<span class="string">"CHANGELOG"</span>],</span><br><span class="line">      <span class="string">"modified"</span>: [<span class="string">"app/controller/application.rb"</span>],</span><br><span class="line">      <span class="string">"removed"</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"total_commits_count"</span>: 4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果我们想根据不同的分支提交来触发jenkins的构建，那就应该知道post数据哪一个属性代表了不同的分支，我们可以在第四行看到</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"ref"</span>: <span class="string">"refs/heads/master"</span>,</span><br></pre></td></tr></table></figure><p><strong>注释</strong>: 也可以通过IDEA工具提交的时候看到提交的选项。可以看到我们用ref可以很好的区分不同分支，这里就是为什么要填写ref的原因。我们可以通过pipeline代码的生成器来生成</p><ul><li>pipeline 代码生成器<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">triggers &#123;</span><br><span class="line">  GenericTrigger causeString: <span class="string">'Generic Cause'</span>, genericVariables: [[defaultValue: <span class="string">''</span>, key: <span class="string">'ref'</span>, regexpFilter: <span class="string">''</span>, value: <span class="string">'$.ref'</span>]], printContributedVariables: <span class="literal">true</span>, printPostContent: <span class="literal">true</span>, regexpFilterExpression: <span class="string">'\'</span>refs/heads/\<span class="string">' + evn.BRANCH_NAME'</span>, regexpFilterText: <span class="string">'$ref'</span>, token: <span class="string">'env.JOB_NAME'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://img.xxlaila.cn/1571982583457.jpg" alt="img"><br><img src="https://img.xxlaila.cn/1571982622070.jpg" alt="img"></p><p><strong>注</strong>: token参数的作用是标识一个pipeline在jenkins中的唯一性，这个参数的重要性就得提起GWT插件的原理。当jenkins收到generic-webhook-trgger/invoke接口的请求时，会将请求代理给GWT插件处理，GWT插件内容会从jenkins实例对象中取出所有的参数化jenkins项目，包括pipeline，然后进行遍历。如果我们在参数化项目中Generic Trigger配置token的值与webhook请求时的token一致，就会触发改项目。如果多个参数化项目的token一样，则都会进行触发，所以这里的token最好时JOB_NAME项目名，因为这个是在项目或者是在为服务领域他都是唯一的。</p><ul><li>参数介绍:<ul><li>regexpFilterText: 需要进行匹配的key，例子中，使用从post body中提取的ref变量值。</li><li>regexpFilterExpression: <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html" target="_blank" rel="noopener">正则表达式</a>；如果regexpFilterText参数符合regexpFilterExpression参数的正则表达式，则触发执行。</li><li>printPostContent: 布尔值，将webhook请求信息打印到日志上</li><li>printContributedVariables: 布尔值，将提取后的变量名及变量值打印出来</li><li>causeString: 字符串型，触发原因，可以直接应用提取后的变量，如 causeString: ‘Triggered on $msg’</li><li>Silent response: 布尔型，在正常情况下，当webhook请求成功后，GWT插件会返回HTTP 200状态码和触发结果给对方调用，但是当Silentresponse设置为true时，就只返回HTTP 200状态码，不反悔触发结果</li></ul></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面的看的出来，我们只要是提交了分支都可以进行触发构建，但是呢，在实际生产中，我们定义了dev——&gt;test——master 分支，就是只想要这几个进行触发构建，其他的不进行触发，让开发自己去点击。</p><ul><li><p>指定分支构建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">triggers &#123;</span><br><span class="line">  GenericTrigger causeString: <span class="string">'Triggered on $msg'</span>, genericVariables: [[defaultValue: <span class="string">''</span>, key: <span class="string">'ref'</span>, regexpFilter: <span class="string">''</span>, value: <span class="string">'$.ref'</span>]], printContributedVariables: <span class="literal">true</span>, printPostContent: <span class="literal">true</span>, regexpFilterExpression: <span class="string">'\'</span>refs/heads/(dev|<span class="built_in">test</span>|master)\<span class="string">''</span>, regexpFilterText: <span class="string">'$ref'</span>, token: <span class="string">'env.JOB_NAME'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>多分支Gitlab trigger<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;多分支的Gitlab trigger和我们前面介绍的gitlab事件触发一样的，没有任何区别，这里我测试了一个job，没有任何问题。同时新建了一个分支，jenkins会自动的扫描新建一个以分支为名的任务，进行自动触发。当我删除了某一个分支，就会触发自动扫描，然后查看分支为删除。</p></li><li><p>删除分支<br><img src="https://img.xxlaila.cn/1571996378764.jpg" alt="img"><br><img src="https://img.xxlaila.cn/1571996257688.jpg" alt="img"></p></li><li><p>整体效果图<br><img src="https://img.xxlaila.cn/1571990331005.jpg" alt="img"></p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里介绍一下部署这块，根据branch来进行判断，不同的branch部署到不同的环境，当设定的值不在branch范围内，就需要人为的制定部署环境。当人员三分钟内没有来进行环境部署的选择，系统就会断开，对该分支标记为结束。</p><p><a href="http://xxlaila.github.io/2019/10/25/pipeline%E5%A4%9A%E5%88%86%E6%94%AFgitlab%E8%A7%A6%E5%8F%91/" target="_blank" rel="noopener">完整文件</a><br><a href="https://jenkinsci.github.io/job-dsl-plugin/#path/buildPipelineView" target="_blank" rel="noopener">推荐学习参考地址</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;pipeline&quot;&gt;&lt;a href=&quot;#pipeline&quot; class=&quot;headerlink&quot; title=&quot;pipeline&quot;&gt;&lt;/a&gt;pipeline&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;最近在测试k8s上的ci/cd，之前的ci/cd其实也能满足目前先业务的需求，但是想尝试改进一下，优化以前的job，希望在登录ci的时候更加的简洁，
    
    </summary>
    
      <category term="jenkins" scheme="https://www.xxlaila.cn/categories/jenkins/"/>
    
    
      <category term="pipeline" scheme="https://www.xxlaila.cn/tags/pipeline/"/>
    
  </entry>
  
  <entry>
    <title>elasticserch</title>
    <link href="https://www.xxlaila.cn/2019/10/17/elasticserch%E6%97%A5%E5%B8%B8%E7%BB%B4%E6%8A%A4/"/>
    <id>https://www.xxlaila.cn/2019/10/17/elasticserch日常维护/</id>
    <published>2019-10-17T03:23:17.000Z</published>
    <updated>2019-10-26T01:31:46.569Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="days-1"><a href="#days-1" class="headerlink" title="days 1"></a>days 1</h3><a id="more"></a><h4 id="elasticserch-索引和数据操作"><a href="#elasticserch-索引和数据操作" class="headerlink" title="elasticserch 索引和数据操作"></a>elasticserch 索引和数据操作</h4><ul><li><p>查看索引</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -XGET 'http://127.0.0.1:9200/_cat/indices?v'</span></span><br></pre></td></tr></table></figure></li><li><p>删除索引</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -XGET 'http://127.0.0.1:9200/_cat/indices?v' |grep "red"|awk '&#123;print $3&#125;'|uniq &gt;l</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in `cat a`;do  curl -XDELETE http://127.0.0.1:9200/$&#123;i&#125;;done</span></span><br></pre></td></tr></table></figure></li><li><p>查看shards</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -XGET http://127.0.0.1:9200/_cat/shards</span></span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shards 有几种类型，这里说一下<code>UNASSIGNED</code>，es 集群里面的分片是分配在多台node上的，为的就是高可用，比如你的某台机器crash了，那么集群就会让其他副本顶上来，避免出现某个分片不能提供服务的情况，但是难免还是会出现 UNASSIGNED shards 的错误。</p><ul><li>删除shards UNASSIGNED<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -XGET 'http://127.0.0.1:9200/_cat/shards'|grep "UNASSIGNED"|awk '&#123;print $1&#125;'|uniq &gt;l</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in `cat l`;do curl -XDELETE http://127.0.0.1:9200/$i;done</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="elasticserch验证集群"><a href="#elasticserch验证集群" class="headerlink" title="elasticserch验证集群"></a>elasticserch验证集群</h4><ul><li><p>集群相关API</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://127.0.0.1:9200/_cat</span><br><span class="line">=^.^=</span><br><span class="line">/_cat/allocation</span><br><span class="line">/_cat/shards</span><br><span class="line">/_cat/shards/&#123;index&#125;</span><br><span class="line">/_cat/master</span><br><span class="line">/_cat/nodes</span><br><span class="line">/_cat/tasks</span><br><span class="line">/_cat/indices</span><br><span class="line">/_cat/indices/&#123;index&#125;</span><br><span class="line">/_cat/segments</span><br><span class="line">/_cat/segments/&#123;index&#125;</span><br><span class="line">/_cat/count</span><br><span class="line">/_cat/count/&#123;index&#125;</span><br><span class="line">/_cat/recovery</span><br><span class="line">/_cat/recovery/&#123;index&#125;</span><br><span class="line">/_cat/health</span><br><span class="line">/_cat/pending_tasks</span><br><span class="line">/_cat/aliases</span><br><span class="line">/_cat/aliases/&#123;<span class="built_in">alias</span>&#125;</span><br><span class="line">/_cat/thread_pool</span><br><span class="line">/_cat/thread_pool/&#123;thread_pools&#125;</span><br><span class="line">/_cat/plugins</span><br><span class="line">/_cat/fielddata</span><br><span class="line">/_cat/fielddata/&#123;fields&#125;</span><br><span class="line">/_cat/nodeattrs</span><br><span class="line">/_cat/repositories</span><br><span class="line">/_cat/snapshots/&#123;repository&#125;</span><br><span class="line">/_cat/templates</span><br></pre></td></tr></table></figure></li><li><p>查看集群名称等信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://127.0.0.1:9200</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"elk_elasticsearch_data_2"</span>,</span><br><span class="line">  <span class="string">"cluster_name"</span> : <span class="string">"elk_elasticsearch"</span>,</span><br><span class="line">  <span class="string">"cluster_uuid"</span> : <span class="string">"T47wQwa6TT-6MHJVFM40Tw"</span>,</span><br><span class="line">  <span class="string">"version"</span> : &#123;</span><br><span class="line">    <span class="string">"number"</span> : <span class="string">"6.4.0"</span>,</span><br><span class="line">    <span class="string">"build_flavor"</span> : <span class="string">"default"</span>,</span><br><span class="line">    <span class="string">"build_type"</span> : <span class="string">"rpm"</span>,</span><br><span class="line">    <span class="string">"build_hash"</span> : <span class="string">"595516e"</span>,</span><br><span class="line">    <span class="string">"build_date"</span> : <span class="string">"2018-08-17T23:18:47.308994Z"</span>,</span><br><span class="line">    <span class="string">"build_snapshot"</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"lucene_version"</span> : <span class="string">"7.4.0"</span>,</span><br><span class="line">    <span class="string">"minimum_wire_compatibility_version"</span> : <span class="string">"5.6.0"</span>,</span><br><span class="line">    <span class="string">"minimum_index_compatibility_version"</span> : <span class="string">"5.0.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"tagline"</span> : <span class="string">"You Know, for Search"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>查看集群节点</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://127.0.0.1:9200/_cat/nodes?v</span><br><span class="line">ip            heap.percent ram.percent cpu load_1m load_5m load_15m node.role master name</span><br><span class="line">172.21.16.198           29          85   0    0.10    0.04     0.05 mdi       -      elk_elasticsearch_data_2</span><br><span class="line">172.21.16.187           48          85   0    0.00    0.01     0.05 mdi       *      elk_elasticsearch_master</span><br><span class="line">172.21.16.206           25          86   0    0.08    0.03     0.05 mdi       -      elk_elasticsearch_data_3</span><br></pre></td></tr></table></figure></li><li><p>验证集群磁盘分配情况</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://127.0.0.1:9200/_cat/allocation?v</span><br><span class="line">shards disk.indices disk.used disk.avail disk.total disk.percent host          ip            node</span><br><span class="line">    98          1gb     3.6gb     96.3gb     99.9gb            3 172.21.16.198 172.21.16.198 elk_elasticsearch_data_2</span><br><span class="line">    99      887.1mb     4.5gb     95.4gb     99.9gb            4 172.21.16.187 172.21.16.187 elk_elasticsearch_master</span><br><span class="line">    99        957mb     3.5gb     96.4gb     99.9gb            3 172.21.16.206 172.21.16.206 elk_elasticsearch_data_3</span><br></pre></td></tr></table></figure></li><li><p>验证集群健康状况</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://127.0.0.1:9200/_cat/health?v </span><br><span class="line">epoch      timestamp cluster           status node.total node.data shards pri relo init unassign pending_tasks max_task_wait_time active_shards_percent</span><br><span class="line">1571648406 17:00:06  elk_elasticsearch green           3         3    296 148    0    0        0             0                  -                100.0%</span><br><span class="line"></span><br><span class="line">$</span><br></pre></td></tr></table></figure></li><li><p>查看每个数据节点上被fielddata所使用的堆内存大小。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://127.0.0.1:9200/_cat/fielddata?v</span><br><span class="line">id                     host          ip            node                     field                    size</span><br><span class="line">VNcRqM30T3axzVjiPkDTmA 172.21.16.187 172.21.16.187 elk_elasticsearch_master event.resultCode.keyword 352b</span><br><span class="line">VNcRqM30T3axzVjiPkDTmA 172.21.16.187 172.21.16.187 elk_elasticsearch_master <span class="built_in">type</span>                     720b</span><br><span class="line">HNc5BrMWQcummBeAskQc4A 172.21.16.206 172.21.16.206 elk_elasticsearch_data_3 event.resultCode.keyword 704b</span><br><span class="line">z3zUA8KxTH6B7C8CmVRUIQ 172.21.16.198 172.21.16.198 elk_elasticsearch_data_2 <span class="built_in">type</span>                     720b</span><br><span class="line">z3zUA8KxTH6B7C8CmVRUIQ 172.21.16.198 172.21.16.198 elk_elasticsearch_data_2 event.resultCode.keyword 704b</span><br></pre></td></tr></table></figure></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;days-1&quot;&gt;&lt;a href=&quot;#days-1&quot; class=&quot;headerlink&quot; title=&quot;days 1&quot;&gt;&lt;/a&gt;days 1&lt;/h3&gt;
    
    </summary>
    
      <category term="elasticserch" scheme="https://www.xxlaila.cn/categories/elasticserch/"/>
    
    
      <category term="elasticserch" scheme="https://www.xxlaila.cn/tags/elasticserch/"/>
    
  </entry>
  
  <entry>
    <title>nexus配置ldap</title>
    <link href="https://www.xxlaila.cn/2019/10/15/nexus%E9%85%8D%E7%BD%AEldap/"/>
    <id>https://www.xxlaila.cn/2019/10/15/nexus配置ldap/</id>
    <published>2019-10-15T09:28:34.000Z</published>
    <updated>2019-10-29T01:44:21.623Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="配置nexus"><a href="#配置nexus" class="headerlink" title="配置nexus"></a>配置nexus</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;登录nexus在设置页，点击ldap，</p><a id="more"></a><p><img src="https://img.xxlaila.cn/1571131890608.jpg" alt="img"><br>参数介绍:</p><ul><li>Name: 随便写</li><li>LDAP server address: 支持ldaps和ldap,而端口则取决于配置。 如果没有特殊配置，ldap默认端口是389</li><li>Search base: 只需要填DC即可，比如DC=example,DC=com。 其它内容，比如CN、OU等，不需要填写</li><li>Authentication method有以下选项:<ul><li>Simple Authentication</li><li>Anonymous Authentication</li><li>DIGEST-MD5</li><li>CRAM-MD5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通常选择Simple Authentication即可。Username or DN、Password里填写账户、密码，而 Connection rules无需修改。填写完毕后，点击【Verify connection】按钮，可以验证信息。 如果成功，即可保存。</li></ul></li></ul><h4 id="Choose-Users-and-Groups"><a href="#Choose-Users-and-Groups" class="headerlink" title="Choose Users and Groups"></a>Choose Users and Groups</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这项故名思义就是配置用户和组的，在最开头的Configuration template中，有四种模板可选：</p><ul><li>Active Directory</li><li>Generic Ldap Server</li><li>Posix with Dynamic Groups</li><li>Posix with Static Groups</li></ul><p>这里选择<code>Generic Ldap Server</code></p><ul><li>Base DN 在LDAP中找到用户的基本位置。这是相对于搜索基础的（例如ou = people）。</li><li>User subtree通常需要勾选。 如果把LDAP的Tree比作目录的话，勾选以后相当于递归查找子目录。</li><li>User filter通过过滤规则，减少搜索信息，用于提升性能。 仅仅只是提升性能，所以，如果不懂它特殊的匹配规则，也可以不填。</li><li>之前选择了<code>Generic Ldap Server</code>模版后，User ID attribute默认为uid，Real name attribute默认为cn、Email attribute默认为mail、Password attribute为空。</li><li>Map LDAP groups as roles如果不勾选，就不会同步用户组信息。 如果勾选，则可以选择Group type和Group member of attribute。 若无必要，保持默认即可，默认是勾选的。<br><img src="https://img.xxlaila.cn/1571133103461.jpg" alt="img"></li><li>填写完成后，通过【Verify user mapping】可以验证查询结果<br><img src="https://img.xxlaila.cn/1571133221971.jpg" alt="img"><br>点击创建<br><img src="https://img.xxlaila.cn/1571133286829.jpg" alt="img"></li></ul><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新起一个窗口利用ldap里面的账号进行登录，可以登录，没有问题，但是登录之后用户没有任何权限，这对于研发来说又是一个不可接受的事情。接下来配置权限</p><h5 id="禁止匿名访问"><a href="#禁止匿名访问" class="headerlink" title="禁止匿名访问"></a>禁止匿名访问</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在实际应用中，是不允许匿名用户不可以登录就能访问的，这样我们ldap就没有任何意义了<br><img src="https://img.xxlaila.cn/1571133691247.jpg" alt="img"></p><ul><li>禁止匿名用户<br><img src="https://img.xxlaila.cn/1571133811908.jpg" alt="img"></li></ul><h5 id="创建角色"><a href="#创建角色" class="headerlink" title="创建角色"></a>创建角色</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在Security——&gt;Roles——&gt;Create role，这里创建角色有两种。一种是nexus relos本地角色，一种是External roles mapping外部映射的形式。为了满足我们ldap账户登录进来有浏览库的权限，研发又可以上传第三方依赖库的权限，但是不能删除和私下增加库Repositories。所以这里我们需要单独建立一个本地的relos，然后在映射外部的ldap到这个本地的roles，这样ldap账户登录进来就能实现日常的基本操作。</p><ul><li><p>创建nexus relos本地角色<br><img src="https://img.xxlaila.cn/1571296771150.jpg" alt="img"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;创建完成后，我们需要对他赋予权限，对用户进行权限控制，没有权限控制，就没办法达成我们上面的目标。下面是我赋予的权限，可以结合实际需求来进行赋予。</p></li><li><p>权限介绍:</p><ul><li>ng-component-upload: 有上传的权限，比如java依赖的一些第三方库，研发可以自己进行上传</li><li>ng-repository-admin-<em>-</em>-browse: 浏览所有的repository</li><li>ng-repository-admin-<em>-</em>-read: 可以所有读取repository的配置信息</li><li>ng-repository-view-maven2-maven-central-browse: 具有浏览maven-central内容</li><li>ng-repository-view-maven2-maven-central-read: 读取maven-central内容，在maven编译的时候具有下载的权限，(后面不一一介绍)</li><li>ng-repository-view-maven2-maven-public-browse</li><li>ng-repository-view-maven2-maven-public-read</li><li>ng-repository-view-maven2-maven-releases-browse</li><li>ng-repository-view-maven2-maven-releases-read</li><li>ng-repository-view-maven2-maven-snapshots-browse</li><li>ng-repository-view-maven2-maven-snapshots-read</li><li>ng-repository-view-npm-npm-kxl-all-browse: 以下是自己做的npm代理缓存，可以参考之前的<a href="https://xxlaila.github.io/2019/08/23/nexus3搭建npm私服/" target="_blank" rel="noopener">nexus3搭建npm私服</a></li><li>ng-repository-view-npm-npm-kxl-all-read</li><li>ng-repository-view-npm-npm-external-browse</li><li>ng-repository-view-npm-npm-external-read</li><li>ng-repository-view-npm-npm-internal-browse</li><li>ng-repository-view-npm-npm-internal-read</li><li>ng-search-read: 让用户具有所有权限，没有此权限，研发查找一个包，估计会死</li></ul></li><li><p>创建是External roles mapping外部映射<br><img src="https://img.xxlaila.cn/1571134166780.jpg" alt="img"><br><img src="https://img.xxlaila.cn/1571297568491.jpg" alt="img"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在进行Roles ID 这栏目，需要填写的是Users，这个Users会在ldap上同步Users的一个用户组。根据自己的ldap账户组设置来进行填写。下图是ldap的组设置<br><img src="https://img.xxlaila.cn/1571298567078.jpg" alt="img"></p></li></ul><p><strong>注</strong>: 其实在这里我们也可以进行Privileges的权限赋予，但是我选择的是先创建一个本地的nexus relos。然后我们在Roles栏关联之前创建的<code>Developer</code>，完成以后通过ldap账户登录进行测试</p><h5 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里主要是从四个方面来测试ldap账户。分别是: 登录默认的权限、浏览所有库的权限、Browse的浏览、Browse库的上传</p><ul><li><p>登录默认的权限<br><img src="https://img.xxlaila.cn/1571297962563.jpg" alt="img"></p></li><li><p>浏览所有库的权限<br><img src="https://img.xxlaila.cn/1571298121188.jpg" alt="img"></p></li><li><p>Browse的浏<br><img src="https://img.xxlaila.cn/1571298018356.jpg" alt="img"><br><img src="https://img.xxlaila.cn/1571298167348.jpg" alt="img"></p></li><li><p>Browse库的上传<br><img src="https://img.xxlaila.cn/1571298224331.jpg" alt="img"><br><img src="https://img.xxlaila.cn/1571298260091.jpg" alt="img"></p></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;配置nexus&quot;&gt;&lt;a href=&quot;#配置nexus&quot; class=&quot;headerlink&quot; title=&quot;配置nexus&quot;&gt;&lt;/a&gt;配置nexus&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;登录nexus在设置页，点击ldap，&lt;/p&gt;
    
    </summary>
    
      <category term="nexus" scheme="https://www.xxlaila.cn/categories/nexus/"/>
    
    
      <category term="ldap" scheme="https://www.xxlaila.cn/tags/ldap/"/>
    
  </entry>
  
  <entry>
    <title>jenkins配置备份</title>
    <link href="https://www.xxlaila.cn/2019/10/15/jenkins%E9%85%8D%E7%BD%AE%E5%A4%87%E4%BB%BD/"/>
    <id>https://www.xxlaila.cn/2019/10/15/jenkins配置备份/</id>
    <published>2019-10-15T00:55:19.000Z</published>
    <updated>2019-10-28T03:36:02.239Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="jenkins-备份"><a href="#jenkins-备份" class="headerlink" title="jenkins 备份"></a>jenkins 备份</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当jenkins在用起来的时候，我们难保他不会出故障，但是出了故障我们怎么做到快速的恢复呢，这时备份就显得尤为重要了。但jenkins本身不提供备份的功能，<a id="more"></a> 所以这里就需要借助外力。备份可以多样化，一种是我们直接到jenkins的目录下面手动备份jenkins目录。一种是我们就jenkins自带的插件<code>thinBackup</code>和<code>Periodic Backup</code>进行备份恢复，下面进行分别介绍</p><h3 id="thinBackup备份"><a href="#thinBackup备份" class="headerlink" title="thinBackup备份"></a>thinBackup备份</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;登录jenkins——&gt;系统管理——&gt;插件管理<br><img src="https://img.xxlaila.cn/1571101180571.jpg" alt="img"><br>安装完成之后重启jenkins服务，登录jenkins在系统管理界面可以看到<br><img src="https://img.xxlaila.cn/1571101557754.jpg" alt="img"></p><h4 id="配置ThinBackup"><a href="#配置ThinBackup" class="headerlink" title="配置ThinBackup"></a>配置ThinBackup</h4><ul><li>点击ThinBackup<br><img src="https://img.xxlaila.cn/1571101640273.jpg" alt="img"><br>可以看到有三个选项:</li><li>Backup Now: 手动立即备份</li><li>Restore: 恢复备份</li><li>Settings: 备份参数的设置</li></ul><h5 id="Settings"><a href="#Settings" class="headerlink" title="Settings"></a>Settings</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;下面是我的备份参数，可以根据自己的需要自己设定备份参数，设置好友save即可，<code>Backup schedule for full backups</code>意思是周一到周五每天凌晨两点进行备份<br><img src="https://img.xxlaila.cn/1571102057919.jpg" alt="img"></p><h5 id="Restore"><a href="#Restore" class="headerlink" title="Restore"></a>Restore</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;备份文件是以日期+时间节点组成的文件名，我们恢复什么时间段的，点击进行恢复，<br><img src="https://img.xxlaila.cn/1571102188007.jpg" alt="img"></p><h3 id="Periodic-Backup"><a href="#Periodic-Backup" class="headerlink" title="Periodic Backup"></a>Periodic Backup</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;备份除了上面提到的插件还有一个插件是<code>Periodic Backup</code>，安装<code>Periodic Backup</code>不阐述，安装完成后可以在系统管理菜单下面有一个<code>Periodic Backup Manager</code>菜单<br><img src="https://img.xxlaila.cn/1571709136813.jpg" alt="img"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;打开<code>Periodic Backup Manager</code>，第一次打开是没有任何东西的，需要我们自己去建立一个规则，点击<code>Configure</code><br><img src="https://img.xxlaila.cn/1571709270639.jpg" alt="img"></p><p>配置项很简单:</p><ul><li>Temporary Directory: 临时目录</li><li>Backup schedule (cron): 进行备份cron的表达式，填写完成后点击<code>Validate cron syntax</code>进行验证</li><li>Maximum backups in location: 最大位置备份，保留多少个备份文件</li><li>Store no older than (days): 保留的时间</li><li>File Management Strategy: 备份策略<ul><li>ConfigOnly: 只备份配置文件</li><li>FullBackup: 进行全量备份，可以通过Excludes list中填入Ant风格表达式，排除不希望备份的文件，多个表达式使用分号分隔</li></ul></li><li>Storage Strategy: 存储策略，就是是否需要进行压缩存储</li><li>Backup Location: 备份的位置，都是本地目录<br><img src="https://img.xxlaila.cn/1571709879768.jpg" alt="img"></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;jenkins-备份&quot;&gt;&lt;a href=&quot;#jenkins-备份&quot; class=&quot;headerlink&quot; title=&quot;jenkins 备份&quot;&gt;&lt;/a&gt;jenkins 备份&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;当jenkins在用起来的时候，我们难保他不会出故障，但是出了故障我们怎么做到快速的恢复呢，这时备份就显得尤为重要了。但jenkins本身不提供备份的功能，
    
    </summary>
    
      <category term="jenkins" scheme="https://www.xxlaila.cn/categories/jenkins/"/>
    
    
      <category term="jenkins" scheme="https://www.xxlaila.cn/tags/jenkins/"/>
    
  </entry>
  
  <entry>
    <title>jenkins配置ldap</title>
    <link href="https://www.xxlaila.cn/2019/10/14/jenkins%E9%85%8D%E7%BD%AEldap/"/>
    <id>https://www.xxlaila.cn/2019/10/14/jenkins配置ldap/</id>
    <published>2019-10-14T03:49:32.000Z</published>
    <updated>2019-10-29T02:04:04.913Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;公司研发人员和测试人员，还有运维人员有时候登录jenkins去查看一些job的状态或者是其他的东西，虽然有企业微信的通知，但是感觉还是不能满足，<a id="more"></a> 比如job错误了，企业微信虽然吧错误发给了研发人员，但是研发还是要登录jenkins上去看，就感觉要舒服一点，测试上做的一些自动化测试，有时候失败了他们也会去看或者是去建立一些自动化的job。之前建立了公共的账号，开发和测试人员都去登录，但是有时候他们误操作了，导致一些其他的东西失败或者错误，虽然做了权限控制，但是他们还是死不承认，所以这里介入ldap。谁动的就知道了，这样就不怕了。</p><h3 id="开始配置"><a href="#开始配置" class="headerlink" title="开始配置"></a>开始配置</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;登录jenkins——&gt;系统管理——&gt;全局安全配置<br><img src="https://img.xxlaila.cn/1571025388007.jpg" alt="img"><br>访问控制——&gt;LDAP<br><img src="https://img.xxlaila.cn/1571027524602.jpg" alt="img"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;配置完成以后我们需要测试一下连接是否正常，点击<code>Test LDAP setttings</code>，输入在ldap的其中一个账户来进行验证，没问题的结果如下:<br><img src="https://img.xxlaila.cn/1571027696951.jpg" alt="img"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;配置完成并测试通过后就可以用LDAP直接登录了<br><strong>注</strong>: 启用了LDAP登录后将无法再用之前的登录方式（本地认证将无法在使用）登录，登录进来的任何一个账号都是管理员，都是管理着肯定来说不安全，权限配置请下看</p><p><a href="https://wiki.jenkins.io/display/JENKINS/LDAP+Plugin" target="_blank" rel="noopener">官方参考</a></p><h3 id="配置ldap的账户权限"><a href="#配置ldap的账户权限" class="headerlink" title="配置ldap的账户权限"></a>配置ldap的账户权限</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面我们虽然吧ldap配置完成，但是我们需要对用户进行权限的配置，不可能每个人登录都能对我们jenkins进行无限制的操作，这不符合我们之前的意图。安装<code>Role-based Authorization Strategy</code>插件</p><ul><li>在系统管理——&gt;全局安全配置,可以看到下面选项，每项介<a href="https://xxlaila.github.io/2019/08/09/jenkins%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE/" target="_blank" rel="noopener">参考</a><br><img src="https://img.xxlaila.cn/1571034253089.jpg" alt="img"></li></ul><p>保存以后，返回系统管理界面就可以看到多处一个<code>Manage and Assign Roles</code><br><img src="https://img.xxlaila.cn/1571034433352.jpg" alt="img"><br>点击进去</p><p><img src="https://img.xxlaila.cn/1571034507945.jpg" alt="img"></p><ul><li><strong>Manage Roles</strong>: 角色分为Global和Project，可创建角色分组和添加项目。</li><li><strong>Assign Roles</strong>: 增加具体的用户，分配到角色组，指定项目权限。</li></ul><p><a href="https://xxlaila.github.io/2019/08/09/jenkins%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE/" target="_blank" rel="noopener">权限设置</a></p><ul><li>下面我的配置，和之前的大同小异<br><img src="https://img.xxlaila.cn/1571038684383.jpg" alt="img"></li></ul><p><strong>注</strong>: 这里有一个小问题，这样配置以后，新用户登录进来以后就会提示没有权限，<code>Access Denied,xxxx没有全部/Read权限</code>，这是因为在打开jenkins后，没有创建用户前，先不要勾选系统设置中启用安全选项，如果勾选了，就会出现无法进入jenkins的现象<br><img src="https://img.xxlaila.cn/1571037187865.jpg" alt="img"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在网上看到有这种的解决办法，有几种方案，一个是修改confing.xml的文件，修改config.xml文件的三种方式感觉都不太切合实际的业务；下面是我做的两种办法，推荐使用第二种</p><ul><li><p>Role-Based Strategy<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在<code>Assign Roles</code>吧用户添加进来，然后勾选权限，<br>系统管理——&gt;Manage and Assign Roles——&gt;Assign Roles<br><img src="https://img.xxlaila.cn/1571037604678.jpg" alt="img"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;但是这有一个弊端，就是每次新来一个用户就得去添加一次用户权限，虽然满足了业务需求，但是不科学</p></li><li><p>项目矩阵授权策略<br><img src="https://img.xxlaila.cn/1571041499340.jpg" alt="img"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这是一个全局的配置，特定组只能按照最小的权限授权，额外的权限可以在具体的项目权限矩阵里面在添加。 默认只有<code>Anonymous Users</code>和<code>Authenticated Users</code>，管理员组是需要添加的<code>admin</code></p></li><li><p>Anonymous Users: 匿名用户，显然不能</p></li><li><p>Authenticated Users: 认证用户，就是只要是认证的账号都可以拥有的权限</p></li><li><p>admin: 就是拥有所有的权限了，这个组一般只能运维人员和部门老大加入。</p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;加入admin组以后，他会自动去同步ldap的组用户，如果用户在ldap是admin组，那么在这里就会是管理员权限，如果用户是普通组，那么就是<code>Authenticated Users</code>组赋予的权限，使用这种方式只要用户是ldap里面的，就可以登录查看。这样就满足了业务场景需求</p><h3 id="日志记录"><a href="#日志记录" class="headerlink" title="日志记录"></a>日志记录</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;记录用户日志需要单独的安装<code>Audit Trail</code>插件，该插件在Jenkins主配置页面中添加了一个配置部分，可以在此处配置日志位置和设置（文件大小和循环日志文件的数量），以及用于记录请求的URI模式。默认选项选择效果显着的大多数操作，例如创建/配置/删除作业和视图或永久删除/保存/开始构建。日志将按照配置写入磁盘，最近的条目也可以在“管理/系统日志”部分中查看。<br><img src="https://img.xxlaila.cn/1572057054289.jpg" alt="img"><br><a href="https://plugins.jenkins.io/audit-trail" target="_blank" rel="noopener">Audit Trail官方参考</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里配置以后还不能记录job的日志，需要对job进行记录需要另外的安装<a href="https://wiki.jenkins.io/display/JENKINS/JobConfigHistory+Plugin" target="_blank" rel="noopener">Job Configuration History插件</a>，根据官方的介绍，可用于查看所有作业配置历史记录或仅查看已删除的作业或所有类型的配置历史记录条目。同时，如果配置了安全策略，还可以查看哪个用户进行了哪些更改。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;安装完成后，我们在job里面可以看到一个<code>Job Config History</code>的菜单。最开始没有没有任何记录，只有当构建job或者修改过job以后才会有记录<br><img src="https://img.xxlaila.cn/1572057782047.jpg" alt="img"><br><img src="https://img.xxlaila.cn/1572057958019.jpg" alt="img"></p><ul><li>点击Show Diffs 可以看到我们具体修改了什么东西<br><img src="https://img.xxlaila.cn/1572058118436.jpg" alt="img"></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当我们安装好这个插件以后，也测试可以使用，但是我们不能让所有的job日志记录保存历史过久，如果job过多，记录过多，这会对我们的磁盘空间来说，肯定是一个压力，所以这里我们就需要进行配置，保存多少次的记录，而且还可以设置排除的文件。<br><img src="https://img.xxlaila.cn/1572058857084.jpg" alt="img"></p><p><a href="https://wiki.jenkins.io/display/JENKINS/JobConfigHistory+Plugin" target="_blank" rel="noopener">Job Configuration History官方</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;公司研发人员和测试人员，还有运维人员有时候登录jenkins去查看一些job的状态或者是其他的东西，虽然有企业微信的通知，但是感觉还是不能满足，
    
    </summary>
    
      <category term="jenkins" scheme="https://www.xxlaila.cn/categories/jenkins/"/>
    
    
      <category term="ldap" scheme="https://www.xxlaila.cn/tags/ldap/"/>
    
  </entry>
  
  <entry>
    <title>java应用部署</title>
    <link href="https://www.xxlaila.cn/2019/10/12/java%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2/"/>
    <id>https://www.xxlaila.cn/2019/10/12/java应用部署/</id>
    <published>2019-10-12T03:38:32.000Z</published>
    <updated>2019-10-15T02:18:36.026Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="Welcome to my blog, enter password to read." />    <label for="hbePass">Welcome to my blog, enter password to read.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="d772e1fc96cf38c7d8ba16b62d2a7c4498d30cfa5a271c080cb2e7299161d4a5">d69a90776b8106231e3f5503e1ddcc13f0a06d8dadd8234c5c68029f211ebabb4ed79e0a37894d9b100cc46ecc86e80f15a75fac9c13ce5af6f8509a1c8876945af8a7b28eb4bc7ca611fd2c8556cbeeac24e827f7e6e417ffe761d17c55e449a0dee1f41752b4e1458acef7c366fc31666555d9cc72411f6d8e1ffa390170d76f35befbaaafaac43890d58848f5c5e89044d72bffd2cc27d8bd7049828f6bcd70ecb1feb630f5dbc6b671a660e9575c24276b2cedb600034ff664fbb38ad86effb4945da5e35ed8c7d2163031881b5eb269f1ffd992a34ecbceefaaf8c40d7ab6fb370182799de4fec84fef1e7b42f50e8e7e86c12d60bb7eb5d21b53dc7f319904db29ba3b656004dfa96dc4cdccddae498e32657beb1fce9e9b03611684614f24f5584b97833ae36f32802b633fed6a5695489393c26eddfc1a47afc21497abdf068f3dbf96ad38874b3db465e6954763e627fcfd0ecaf9813da33fde46863634b6d7809420ac7c8df68fdee4279a5a702a9fa363589b498190ca1c56b810c4f609b90b744105b6fe8f3e05a6aa3a28a3020d531c6e7bff16d495a106a0029bda4bb6cb6f73d5b1c5ba4171223809f4f72c89959aed5956106128382ae722be9736509ffd65c03e9f2f15602361cf754d46f3c04bd475827a0da9864c0b8e2ee4a181483864127b5530c607c868fe594c8d98994457c7a4e2a0becf2576d1476ec92eb1de0762d04c30b75c6078e3880a32113a7f73c2d4d4413642c095c2ae8a583fd36693e704c8566b1a7fea0048470b6b02b50674fca69a12ba9d8cf883d5608f220a150152ed434a1724e48353fb3b806cb536f0d37f1e620bd9f31992246322ca97599d61fef949410cd8b85a00853d08b61c0fb45bde3028525a79cbed95bdd99e552b1c53db32726224a83054a6e41cf399a5b47a6b08a110ad129c9ad2106e41f45f7966eb40d7d60a512e0b3940a5dd4d50749d9b0fccf081815c00c28b1b9630fafecd8723c626e1ed1c6aec4d3b19c0ca08af30a13e873ef3bbf9d676629bd366b2a9b0dab00f53e8eec3bb4b69599d90d71ebeae5b9a2cfdf2af32377494a30d4d83afca1e697d1bea02dacab9599e7e8f57a2837e5954b142a0a2fc0b63f1d965c143513d1e4c100af76b87a8c9e871afd40da81a718c288e122675622fe72b07e893829cf7467be35c48a480dee445cd5b5567c705ba21a1bb2f135c898bb8f14b8f82d87d096b507813c43723dfa36371364ab04d98020d638c62195f84da976c46b312dffb83d838f395d697dbeef8f67788ccf63b279b373417d470e826db97a97e67da470951754345abd291e7dae3155c709969577819c873544ea61cbdbfbc8bb52566a2617c298e3f78e6de6f6259e9f1203c2d51387b63f15f09592e0445001132e408551b69f7a8f3f553648c67a34d5e5feab52b779852356a5a9f7e35d0809f6600e0045bb87b3b53685705e3d1ad714230a9f8f7b0dfb8e858264f502b15a02813d72414cc0c9e7ce908cb04a2a3c9e5a5d109e19808f104d2f38a330ab43d56e597f8418bae5b890ee2c91adb72acb8027e6ed69b9951083094030072c8896deba1565965a4a469284f1e1414b7aeeefbf899242098a217a26f0cf8e1cd04845e13c0830405afafcff3f1cd61da51d5f260234fa5c42f46199a6c73e842f495473b3c0ba6baef8422b6e9fb7ef6436d2f5d399fd0104d01c010e881f0b2dd320e7d1da9539026e7d761fd64769d55e502ab7e5e4842b3c22cd5cf8b8a5d1de22606429b3f9d984eac9c667171c610c11eebbcce7c8e1e754eda5b2b730a37e770a84511e172eca433a92ef39f6f4fa0bf36017c7b7acc0d75e1315adf7dd7d9fb734acd6df5df01645f9594459cfd90060978222b4b1658a9ab3ea9cd231cc4dc4ac5c4985f5a5f500a05bc78bbbf3b9832aa263d96bc335cbac5d20d31ef959e714b6269f52f5e5890e7110244807b730c0b433856a03dfa85a39589e0e5f5efc7ce670469637f09bdfe934e18d43eea74f5b5512ea4dc95f070d6134c63106581ff5ef3b89d2bd59dc8ef104e1e53117b19d4121cee9432f8155428587dff00e04edd46ac8545294e171c9b9c3ada41554def257406802ee56a3452dbed3bb7b646b405846ff6815094390e3be50ecf08e672ff2fd1d9bb0273f55eb2182ee626f53ed0d31f89a3773c9b9d7f33888aa37b73e1afbcf28d5bd755d3ba634f878e3af74b7a148b1e5c252d87e33813cb79bfe11c67acc89b733d2420a58e3973b5444f56225a803bf2454f8b8e3cd7beb26ccb88488d6f3e9c6940f79fe2a755ee1f104fbf5e6dd4da070f2fa8fd819b2dee3ffb63fd2e8a794a792a9dddbbae4129fd60588073466e9ceb7a4d363ac5dd205f834edfc4ece1153d2e561dd96a313ba0a9bc6795c380fda7d4a741e5cd1f610838dafc9a7b78866fe70a5aa026d947a1752529907a73577ebe84ca7260b83d8fbe1303ccdc037e5fcb8b8ce53eb6fed4fadba30ef57d8c80a3edcf56710cee8f5a0668405fe402ace18c3ed1e30cd0e7f68490ffe7c9ab695a317ddd101117f6a4bffd3f05d391a0aff1c55223a83e7c1cdfe5ed36768bf0b297235849a35ff036fed4adccec78e0daebeb1d576d8253f89b8da8486a5339b5bad8eec79fe56b4d3d4f5b06766e32637a15adb058be5bd9a52b5d00ff6c561fba403032ef235a0864cfa584c93b7994dd9a538a7f03b73395cec4abbcddaf884151fdfe0c3ea7c93988c22e27ec2e088bcda04793fde8d0e259e2cf3b45cabf8c84fdedd213c0eebfea94f2643af4f57b20c1945a92cc0e4970ed10c0cd858100484342e22410cc8e78a5af4d4794c301d252f22c48dcd77ae54b0e9f1e719c78214678052cf3c2e27e245a9e3f02f5fcc5e11f496d06a720faed9662b0852cfd084e044b8bc3bdf74611ea8dbefc5247940e8127555492ebff3379263438b0bd823df150addb5bd372fcba8100f26a51b940054a66b3267f9aa4ded48cefe006fac97d4f37cdf166b269c57c359b23fdc549c28dcb8f8d5ece3d8133f82da0a6fa3db8f189db3c132909dd4d6803a61e891145bfe2440cc906cc97af3d16751c1557d1b00c4824abef4edeb25dac46c5ca31d5b6d3623228772c507a99e1a574839ae3297ddce9f42d1d2bd79b4b02c170b168a379eac9337416c8550d2389e70cebcf907a1421c4c1018e53f2575b7325504cfa430f7a2d1ad52a6b5f1e9b9b3ef8f708922b1780fa33c9878b9f61ccabbac34d836468f1abae756023ba02d16e5de9727fe55fc4772b248c20bae7c448f0edcec50a4fa810a65a648d273c0ee1f56c27089cdb1b967e0866af7e408fa49cd8b01cfe195357defc56c78df0f632f5542386b2676f7fcbef22110efe09f86553327465d623942b7f3e6c3dd5ef5e25383125967f92a5b94d3a2ad7c0f240c84d3e9b62f267efa0e02976823e85555e5a02e9ef2f61f09cc5ad946779eceeeb8a39f29c2043b68b30b4c2d3a048ada3ae44e0eb43901b70c84e1a626f796860d0fff183d6c9250ecbfa125f6818f335fe317a48d5caf555b51d208c5faa7e229d5bf153f8dd8417e095fd32c7e4f5676ede65dc482a2230d7984752837693d8bc60f9160889c36fec20a98f2eacc53aaf630db086f0be6f5ee6bd54ecff9353907398224c0aea89bf85b83589da5114ffb7a88c00806c7335a1f67e2dca5ee2498cac6d6d1c1259f5a5fe2b31300a58775c55777eea87e55bb871d3a41b317f4775526afa8ddcc6fd22e5f79615803ba028e783e6a6b6a5cc9fa47c1f236faee36e6d5053e01ccd031d83ffa84cf99a6d70fd49105b6ead6ef996c645a69f2eb0a7cd8d4ce0d5e295549b4aed5142820a4855cf11d1e4caf3de37d53f2a259b0e2d6bab96a6092b7a0202b2427f7e64b443ec4c8932e76aa46381596091aa440ff9258dfca8aa3d9dde895a588be97e23f1ffbbc476b7cb22fad32eaaae02593449b8ef439a04c58b117ff47b529c9c137dbb7d198f1c0e914c544e0aad83f5c65267c970e5a135e5d44fa4af44da13a79a9b34a4257940c28783ef4600fe740bb93a3ee0ac08edef90fefc1390320eb87938864304d035bb5ee14d80941eae5b1ee2f34b341fc62cc26787cc0bf81ac6b3940272acc163376010b6ca9260cdc58a7d474632372e6400f8d5f80a98533e2b33d8fa4816d0beb5c20741fd204cf4f25dc26575632d2841339f4e438bcdf30c1c692776a7144be699b97c5da8ff6c5c04919ab10d75e35e70891bef4c4fe6fa4313a42aebd0d567b4d3d48410ed72751ff8e6864bc35124a23c1b09c7fad2af0c66d46924385a3ee2cc7fc9e3d620744f946fbdca203f7578a83c1c4ace8341f30a8cfa73ef1f989a4240dbbeb902fd469293f33cdff0c8110d772f9a3891d9a62f700d98b431832ddbb8c916a02531c18ff8b2f846d8b1df718c7c80f67a441cf1f9c0d5d828f8ad90044cb960e02f64326daad24b646b7d15a907dd49d75825ab04cb69c84c18dd2430ba9d6400e460b03c72593332070d18156763102c787e62c093ff879d95f4ba6671ac56eb27d60b8978f142089dfefa5d0054d09764205c29f1a8e2b4b3434a2ba0dbd10305765cd3c75f5bf9f213c8322b307a3af53ec6d5e05e2c0d0919bccbc472d2ea7aaf51e339de6e8f5a33f3fa432626cce21abce053a14e4206c4befbfde09ddc196363b122348b96d92a75a0db27f2c47866ac39a8004a85ee653d880c24a19a86bfa387c15c0cea7237bc76db6a655d2c1c4adaf03d3f2d01ba5507822fb4a30f9baa056646c5e9af85c212a9c74ed05eea56028f91add48dd8e865da0767424b511f3d0e9f18d8f206bc220d795e8348d69327a39d9244f67847c8a360aa8ab28cc5de34bff277c6fc72ffd92ad00dda35839b38d6f6e31dd2509a9b4a1dd861fd3835e49b2e0941eab8ba6245301482d46e2e648288222c58254a5e5b5ddaf993f2580460fa767d40b053ba946b927a75155c68b5f4d1b005788e419f794e14977a8eba0c7311daa0e15b6530e93c2540ee3114527199307be040dd54b9f9d1c061b5a3c3e6b722ea57c6cf656c52601f030e37b15b697d4a97705e0b973faba3ccab825d3e5b9552737595dab162a7f055d6707f15feb401632d539387333e609fc779e43e70790ac12a1c2b45a72c313f989e489417a7603b391063c49e9291f9b77d4210f3ab77c3c8cf7b268ba53491975499b8d1a29fdff0a9bc2a8e372a7094f9dff63189c599be43e4b06a9aea241d09584d51d045c32ce13aa586631a0c418010091c664efd8fccfa8c0a8f8e0f5f05c4e25b9083c9bbd150c1c650d9d11a99c072a6cd46aab4b5b14f1d878fe8d188164a3833731e4a35dac6d74c087126bea8c73c1bb68b62154c88e2b0ab3547a8314f36e6b688ba23313bd4355d0eac0f98f1fbfb6e684f0a38dc32b7f730b495b5f1de19b28131d0784e1cfb5ea36d5107e9b9a4b87d4235d1882c3c22c62041a56b1b0a9a4cbee04c7e43fa5ac0d78c245711b2b169fdb5be1351f616dc312b09a6d15b47ee63170c8599ac1b195079a90be90d622d7399cc04b127cc4739ffa8f40d5719f8744fbfc896b032aef4057682fe96175837401483e037512fed1dfcfa738f21a1d84e493be28e0dbdb142f9375dd3724bf4f7c2c43cc0bad99224c6b016d4b9578027d90b8af175653adbf9939cc2734ba72558ce7fee846da364c4d197fdc716c8ded52e93d63c0279b3854ceda020323ee837645907971e97e1ef56e0cc0bb2de8ff838c8172def18e463aa1365ae0c8b8cfd525adf25745133bc5a3a2520696ac9f208a347560b7d46599abb37b52b8180db760b0a334ad9e2308344094a1480e330baeea63337a364b4efbd0be28ed8c743b90640b227f9e73a3f7f679f6449b6f64964e57d4b50b1188f13a3ff6475a975a0a2d80bdef0431592fd593556884c0056112cbfe933ab031d212d663e07c3d45378b378b4bb00fe1d4e4ddc5183445de9fa724419e909ad85af7e497f7ce57c7ac9778c67e77d92b198b6c1f5cab14ced554884d70154dec436fdc52844e0dd8d4cd722a51b77fd9ee432118e5fc50a6f102455e4b37c554fcbff1264016332f9972f5fd341e5bded41cb7cbf24fd84845100e29bb1987c231dec4a0617eea6ca64f793f24354db79b3973e68bd007e6448cb0bf34d5ed8b4e7ad6362f1cc5d2aba51cfa06aa1a058b4e0aada5208113717d140c3b07e05c6a7f7da47842ee3d3c1880229ba54fd10721664f893fe3fed8a5bd4c79923196154bb51b37749a4e6b9955c594670f3078c490753449b60672749da52347e0a684e5215154e53c87b22237916b70e4f7e3235bf32d7541e6e63699e4ba85a97d91c797f8bfa927b115b3da741f8e838e6e2e9c801c12e16a2683f53f061c184bfd0cfade6b6eb2f5f7d12971e14737269b2cb9fc8ae4ef6720f0ffaa92d9bb77469438ae114ad262fc178581a8cb729f4747d20c909d6ed3bcda9379e0b37da202544c8ee701be73fd496f7896bf3ce166146abde2d52326b5b7ccdb9dd5cc5bb787aa8674c8acd60f8cac8c44160fa668fe1aa4494d701bfc42c41fb6a82fd6999b21ade5e95f36e3f7a14f729fd045b1cd66c7df0c86fd9a1b5ebb1e9a29567906da71683be6f4afeacb3f8630799f0c1f21eabfd0e76c720cf0377a39e251e6616d799d2177740fffdae3e1b37a068a626229fa1a6182ea8adca1fc7b2c8f731464554f27f9761331bf972c45b9cc1eb1b4be36494e793159b1641d4e5a2ad9c0b5ddf91bbcc8450151ef29d5f95c5aadc92269024b7c03fcfd2ad332a2aed09add9a197daeb94d35f205e8bb1521254e4ca5a617d6c78a2c6c7bc640f74fd4e03deb13ddafa18e4b2996e0750cefec37f38c4781239f2a760656c1165227035fa7611b55e7c9c5593eaf21e3f36c51430bd549e47cd9dd6eb0fd215b8f0a5dd8cdc51da0614439f02e9e14784ee2b9e47ba10966006ffb61045b5e1e3d903389100240cc5253f5d07b6ef0f5deee5fde6fd740a964df90c1983f6fda38ba8ff2e630d73408c483272b54ec7c47279be21f6b3e6e7dd507c4e0e60351a6a842aafe95cd8e24249daa1a0c29fe92488b45ea89bca9c76df431755742fc8816eaddcdb4a260b86d235275d1abca878a2fdfa4310ad3885f4e621318af5ef33b52b338a82848d8f875464075916124cc55e4eb106b2503c6df9bf22fdbf6187a2d524cdfceeaa6c197f7d34603c9f7820f081e888188d8927e7b9acc0732b565dd4ac47f426cae00ef9e0e325546bd5adce7162059c6707159f9c9426b3fea5fcc085c8833b26c32c303d7e95935c761d7009eb22ac3a0c30c9ff0e15a3434fbdea63adb6845b1d651a28129ecbdab3c684aaa211bbd08ffc8514caf7c80b674d2bfaf3a19749a2b068f7eeb4237e74fcacb307336d50ea004d65bd0708b7b1d5e52ede1903277dcd5fe9d6061b04021d503e6fce2fa2ffc0d0d43f9faf82a7fbf7c4697ccdd6702124e3a5526a923100ccff5cfb496a35cb6300801befabd7fc97eb48607a2b52ab691acbbe01db45d1c3a0873303e72a0adf8a03d0404ba04f59e48865210cfba060b407d4016674748821a39ac04dbb0ccb4344c917914c72372469a9feff7916192da9e61b23b7cebbb00c92b3a75ac7e6e2452e71c7cd1b9db906bcf4ecf046d5a8ddca27599d1e3959fe419dbb61e488c81bd264ca6fbd6cdaa14ae139412841d176dd141d2340c23450c0d09e1e2ef8595940672ec0fb2361d204053e4d38e0703cc3eee5be3dbe1befbfebd5839b6a451de54ffb4344fbe3222fd3f32fe72953c7de07cfa008720d3670f0208ed0983acb22e6a13f9fecc88f5ce06785806a15193acb7686772f36c5a58935d42d6e109a79fdf05db91ab633f333508a8e06cb798ee9dd085d876f62c2004a9b9a0bf6c70d981fd97cc1c598898621cc02be29fc5ddba03cb3189867be82ac15654270e04c7d3cb4d9e944b18c3e5314510670a67515cee835ee04638f8fa23734e409cdf0581840785c4b233fd1f309dd540bc12101cf7974f7775f29348d0b28176bd77adb9df2c969adc9fd8083fa2778a81508f32ae848bd0fae9e4a7f99d0b7562e55119322c292771a3a60541734c3b3ed89a524a72d599986c1b784ce09f67b60a02662009b1f375a34f2bb086a595f08e8f425d7764a3f58824e08d722d31798c7b0aee0539ffc21ae91d6750e9baeb534f2a4be231bf84a9c43887064aa6698b50f5615689550a0ab170c775100147c1de67864579376972e049df1e781f088b08eba47816161da0de86d5623d1b07c50913c91a53bb8a4c2e21282af79eac1274e5350bc7a988643e4403799a8b0b980ae181277f0338ce8aed41303ec86e9f2480ccf87b189c27dae0ed70e75706abdc9d1882efe1e5ae0132eb3fc0876192f79afb399663cd4b3bbc9d1ff5a4760119ac6fc5914c0457b81f0c6639d410dfcce2b5a4db1d6813988bc9a59bd0044876a22c3e5d287d4caaf7797e041b7cb51fa7ccda68612f9375d82ecc1b51254bf28d8ac6e17cf4ff8aba218a36ea7c6cb8972845eec09e802196a59a13d683c0148e8f8f5fe594b8ebd258cc0f5a39e26a9bfe9660e799b8c92a989003e87a7248506571cc5c4413625e60c612f3e6537f6a99f3315f7a0a4fcb262cc00a73bb0716dfa8d7d63bb3867e18d5e2faa646948abdfcebd5fa1dc4bff9b0c2cae911bc44118f088813fb3f92f5ccbcd8553a71ba41fd92048ccacfac7a844f03dd0fcb8fcfd67c1209d772ab4d3e8bf06dfa21028e1d7d9165b437808fdfa41821cf33adb6345f4713934ec2a502168e09b67dc8e9645341e6cb118d1edfbee6b3450db7bae146f01f947dc62dee2a9ee9123c1d6e9f857f9cf3fea3f443563e975d7db8a20e448f6e7a1769ee489b3a910d8eb422292ec0a40a299ebe5b00da18bb74b3c6ee77309ebed8ef8df573f0ffb78add12bbfc8d64b271f2607ec397b0e232dd060bea2fd2abfdbffaad1ae0b40b376d0d4ae8b3f2fb3bf17a300a1015341afd0fd26471ec70c122e0786a6b29af9033c0c84da1b878ec56828efc35cffc346b184b736905f85a181e147fcff86db910dc9ebd7b2de4818a2c07a1577bfcbaf07de98c7704521a0e3b4debd0d07ff9d74c4c753f6ae8f3bd99844d723ab14de8c1f31b8913837bf4a130fa5bf3a323eaed5c4dc11d705da373fd23d989ce319cc728e89039863335bb1884d4142fd4ade79060996750b3b03876c53598dcc18655fdb015d6b547d62bf120c2708725ce10a31e2d4d235582e9f98b28be250b476d22b185d55b55da11173bde5189682c311e0fa5b8f1b6f459e08d38c3ef32821bc8c174c6ce91f56cd1c72891264ddf9d3a77753abfe4a53f10ca12e0115973185287432a9777be5070ffb125678bcdac5a12e0615479beb6212bb226a5d9593506ec1ee8728de21c9c30050f06625b49aac4490c977d88edc4e77e2fc78009388a8288d9532239c25685e2c5fdb7df0ee12311c8d349fea0466070c359a6e18ff252d883698b061823638a6b411687101f06a025db5ecb5650c4cac983ebccbe96f64c70ca93310ad26e4db6c5451c7f58a1bf8fa74275ab5e0db4d107923568cd28c82d713bf52587e111f32fa02f6a35cc8647c47062c4293d8359bfc74574ef031f3e1e542c89fd9cf5a04349bd4da6dafb1c303faf58d56053f7128c188521eb891d114db23b5a7a0af21b692e9abd9ed719df55efec78ac6a21bedad6bd8e7cbb4657eb6b54fa937ac415ecc2f04b40127053b20b71132b52c8abc7a13b9867efe71a1a6edcbf7c1cddcee8fb23401668de0f299bb31613925d60a9c53694724d8235d460f6670cb89a3301d608e154c2b7ebb42c3d9a23b7518c35a7a95179201c6f9ac20603f88b8da1a53143fe04fa4b871ec91614fbaf95a22cf4002252c867693331e5a12455366f471f6110d1fdc3e28821cf6808f186cde84e66f3b17ac24300ec0acfd4c5c1c86010e85b2bea9eb66d8f97ab36b9266a101dde2699bac9b9b374fbd135d30fa8ee84ec675ef05839a2f04043aa2da3632984efac0f651102c8d93613ee619a60ba9718046e20686f5314fc3017e668377882c97bc251a28bb3378692eede11f6766af8a48538c445dd314fa583a4d7c9cc06edb7c869d22a8159157f49065d41e616f2ef8b2ed51ce5aba756dbc250765e11d7acd01dc86784b87d72202348ef18523d736318bdf839f60f8b3d08141eaf0cc92a7d8fd7e34df512dec6f4e8feda38a1ca1059042dac3f5a32dd5cb23da69a07cbc4d87257683adfe9cbe85061d0d49d8f819e399bbcccd3e599240abefaa7be2974549f2aeb05aca57908477afdf175cc0818b51e741adf30f5c786dab47d42992b0a4ef6ffbcf024ecbb3fe5190a738bedd9f87af9a51c0e7b3ee70de1ed77464ae0b872b7435258ac0e3bb2036f22cd1917810ab0f4cf376a0ce016b3d037bbcd1f4bb54dd069511ab5a1771ae83b0431b2841376dd47a2594de187f74e0906cc7fa7c8da9d7527eca06f19a46e46e93c4eb40f07b246bbb9b6faf4d18687181fb38c439c48660676645da9b9a7e908ae8e394580ada1e1a3e4743e52b41554bd16fde3d60f16d91dc0523e1e67109984457a28c774fd0d4a776eabf94363f5227f7b33506cd807ed57e77b98e6012cf295f3533e4dcfb821f18d2bb00afaf91992be3d4668dd9f26daf2cfe51312e706497885eb40e772b183f9d68768abecd2c1c1bbd16a738cbcff1b8251703e2234a2da29be050f3ec7e6c5ebc1a3b1704efa1d1053b5c4023cbff69f4eea990b6099a0c540981d7a5b79390c6b0e0f29b00a127b808b3d5c05123cc67b72a3b8ef8efef950ee4994b7a2450bd88a3b3b3d8959c7a119abb3fa20d624a160d4d3d64ddb9fd9746ee647771fd7f4e5f61a99943a653d01afc7de08d02ce1b39660784f40c4ce478965c6c7ca899c8aaa734b5f82b43b86d8fe5ad85ea067a9d2469dde0a1e403b40e2e34268d26334b12bc110c2e603414230d87e1487edb56e89c9a916e2033381c869c74ed8639883d7dcfa1a737671e44935f5c98f3f4f3527a1163221300223208d1b98b43a2ea58abb16a49066aa1db842752cf8dddb3c2c14881bd5d7e769349b63e235f60ed932bf0a6c7030842e715056303c90fd04481b524927842ea869f435ac79d0833a9a254af7c849f834a5a9597b4e1a2106c15f92ff7b77f52032140add76656fcab329e0083c15dff46be01feb335bf49830fadb4bae826af4a24de21fd9c0daffb986cd1e50d0cedb9917bf27476c32f1dd4e00acb72fbc6d684f66ef7d7f86c9f8c6d67ea48a60c2a5d4e6cfea29f1002fcda5c4a03f0bb9255239a347d143924c9d2c9d47d9c2b6e3d67d23364cb521ad57fb12580f1ee5056848f065f5d110de2f5d7d7c891ca7bd0ddebc259602e9fe684b136d6831c3cd239884d9ba00f68c5ac678671935b064e7365765a22196772f6defc4fea788d449746c985cb022c6f0310ce99d62e064a2ad89f5a82567b36064f15f755ddc7f2a2064ace7f3917d86e227cc0dc2f2c7e94e95765372b971af3bc68d5fb0b69fd1e3e7a40edaa1f8bc1237aa426c82caaf7cde21268c8ed0931972b20035e3c1b887a7a6ec15fb8ca5c486e5a2ee9e5b4862867ee2181571cbb328252af55ceab4e0ad47392ed7b784ac4afffe54e4909fbd3bff045f9652183718f7d5810e7bc02def5b284962381109e9c044bdb60f55f3846542dcb15dc6ed66e0c5600aed6559f7a20bdb767a2a5e2815148fc08aadd149a29c1c68d675c33a23974878a5fbdb58461bc269db6ba1a14295ad8a5fd94b27bba3cb4fa7de37398d3f01f32204ac351305b8e5496e954175df312836a992488667c61ff322eb798fd8fef156f3be5ae4d6ec7b3f27e1f0ea7aa5a54da4006c86765b8a620a89cf748014024bb7b99b3e70a7dafb705c0b15e328136766d95eab1c753e8093f87a4303a1834a7f26427f99b83c8e0d199daf692f5ffbf08231bc38f2b5efe949f824b4499957c457100f6bf7454de8afee7a1f5ba6e6f0e1beaba1d79ee7a9dfb3daba545571becf51b2f5f1003f74651680c01ce74111988b8526017898920612559b69c0b291ee9ed2a9b0b3423cd97ffe82e88125a731eea37383d82b95c043c2b2013ad17fae5a0cf324c54e9b3bb91fe584a19c11e44ff006b54788d5ff6ad7654b856e1a2005a922fde9a4d345971b3f4d472453fd5ed7f056ab761ff895cf768eb8b0f080e21e3f4fe3a91211947d2ab6f871c14718687808cec52614d09e82217b6dc893989bf439225f71ea21486efeef3c97cf20bb36bbe0977c0ffe9031535adbd35d8b78de49c470433f38d0b27d1a2b95ebe4c1b9d2799430a4bf8d6b17a72a14eac604e7a6b92cfd17a0e20f49b215a3d09dc55d44f5c355495d271b46d86560712b6919a5663f376f488ccc72adbb8cd5b313c17ce978fc890b8964adbb8fd8957fe249721de99f5caa113baee479e46d43a74dd3d52051a3d3fbaa1ca6b5341a7ecf181622ea0228df01f34a6f9511a7b89659129dd6f2b62867215172d4b76e2b079be0e9ca86f8d206a25372743627c6e59fe0e69eab0cc44ad5b42e058341ba015de4ddbf0eaeaf18adecb4cc8f964d999e0ab06b6c12b92d52be198f1e12b1d16d42d359851223e67eacb85906e9edb46537f5e2fd94a048ca87e4d8c9afb7399f8bdf0817e3fe679e1191e2354c25e95d9b7a09b1ac9c60249968c31e3bf1d0ca42bed11f4dee947254eb87e4a2e267e8e3b84e3fff75fe34ddcbaa6e8d7ae82e237703eee0e7d29a11af89c8833bfb77168654d73d945a69441ef20f525c01664efdb8ef806cbd73328d7350e86c78a16260037ce27230d9485709bee8a7a8db89f3d5f635780f45722ae0df085ca32b60a5c49699ac384c898536ce4b2ee62e0843587473cbf8ba3952534549c1dd6393da04bae3655e2867da56f24674558114af34c1fcd58ae384c32bc59f4616762df79d76f7e30c6cb29a62f2cbcb75e91e3872c1a0ada1241035551331f083dbde0fe1408780ae599528d1fe380c21a4f1af762f61d3f2650dc5984a3ec4da3437b16f7765f8053acd4bd78db9f7104c36b21a8ecbf55151f4f841fe468d73b8a3bc37d5d9e321164127208bda698c50e622df80390da21f8b1e148c4ca073ce5b4979bbf4e3738c678ed53d3d3967afc54d81fe302ce4acc610ce54fb5a8eb510242ba5cf87d9b411175f4333af42939b97a5420ec6cc8364933c68090118d31c6c04790de8819a3b0f85b1ae723f5a803b8f60afe33230e196525750921476dbe28e4baf0226038543123d288e336ff3081c559baecc30fa01d95c15b6cde1fa99dcf06d0b41e36baf8c39e3f0c4bb7f2417503d7f31b68431574837f74716a98ff4253ba8b00c78b8238cf7fe4aad671b0ce47402c29396253f343fd54e01d8b1afcdec6ef0643886f936db3f4c2d288076a4e5a6dbd2faf014b6e824961284bcf9250284cc9322a6c32cac36f31ec01180475b66e974d9c56504d2028493b4a933dc9ebbaa7383d54a733ceb6f658c40b8791086afd31d14cae9a1e84dbb5e949a35eba410b0694060dced64b7f64b786e6f028eb77ac12927b64b525d36ba0e45ed085a63f2dbe9d4096bf9410fa223af0a2d9c954fb08d996ab0913eb15b9845c38f20dbe09413ce66bbf4ca4dd7e63ba10b809a6cb1a0f5a91f1ba9bd8f4107fb3ccb556d5ff7dc8913e68eca8641ce82491286aa3ce410905923b578192e5d6e4696da1f135dc7636c0b7b807a0152fd1ee7c6c7dfacf14a01400c0cc54663942423b1952ce1639e36cb2eb7358c1790b0e6b9e320dc1a67625e26a63f19e14dd527cd5f31a578cc3f55e08dc27ebe132c7eedc3a2241082fd5f02b6a630281c7fafe54dde0fec96292a9c3131071fae6acf5561459ba5923f8bbd999170e76977f97bd61965e85433a334511fed1b159c7511a120fc5b99a4dab5c64b60c694b8f57c2124d99e839de14007a72c506d2a0a2a3f8683dbec7218fc16d55390567b58488a9bb11e918f3d8546744767ceb1b24b4801a8b44f33b7514e177738507879376d7dba2c0f046a4eaf7f621826fcd0a9c5c00f08de81f2e802a5c96747b8cc5f0165af55a29214bb792c2d91446a0afb7a97fae7584c2794753e7010ab55ffda41407edb6bb1360da8883089c069f804e7d2ffb88ebd5c1294005506e02792d7aacb6803b06215d676eefe05268112b00f8b98fd52584d292de7102fd0d26787668895f3c85dd27154932e6b9decf456407c7b2320b075644273de42045f0009641fc4975b869ccd000376e03bf334b3d00bbd27ac8844a33d79088a45b68734a8a41b2570ae86df2d028d43e5a65af42de2518e232679ec8c82a508916db295f91a0be8b53a5a19b84d1bfab2cd6bb83dad593a0f24509b935e1e546f0aed6dc1d7fe74637c34ba103764c88000fd3273823f8e853e53da295bc0db4313689797406a3316dde4cb25aa664b06641a56106dcd0d39da9aecd736fc739ed572399d15b9a77d1f0c53b72dfe6747982560e5d51e7520883fabd7866e9da780cc7a438c8860bf78a1d464b734c0d08ac18a3f3be4af751b29e5cd035e0433564d9cf1a69f1627e7b013bf1ea3f29985435f967d2dbf95f864133ea97c0e6357add178c685dcdff0bf39d3380aaf595524a3d039620bb26adf9d5305c63a622895ae75025182ef96460631505b79ab636f1f0c119338e98557e36b1926a2427f3ca700571daa6c7828e226fd98c682aad8d9298f37ec2260523b1cfce0e9de79a21603ce50382b1beba9048b9e3a9ff2eafd13483d92226a28f69b724d6c995499c12176a321a44fc2ae7dfc6a5387f0d7476829064322c103c4ef9792a68fb53d770858818b84ffae86f77932bd67e83a7048761fe2c753a9735d3507ba99f119ea46e47079b70ba9f072307185270450148d691e8da78436832194ef9e5a0f0110ccfec39e2dcc44c9f6c6c17e832cc712a4ad38410ac0be60d3d652f8878ab43673e48ab14b96db659d17b7d0be3a4b06babe5b3154010f041f1ac1e0d68cccc8d4025e73af3e22f7d8ff916ae259766103b3aba9ab38588b684467d6cc7edd743866cbea438e593a320eb17672a286e706f0a01e810c912db36cd12f7c7f1d99cb2d3dbf2a16468f3eb9bfd841768ec8a8801fbbd5ffa1ddaa4317c3dd6e8d9890d54d28641fbca4f0a4be154363e3f0ae2a90fcfaddf7e74b04eaec8e62ba337fe3aa1ed3e99320c37255095b0b6bf1e9f9a09f5eaeeede27e033e62e754ec5fe2ede5ad6fd40effb1a37fb4688582409bb8257689b72c103e7c2672bbb029c223bcd10fe988aa00fc3247285bbd22e9b3f901da4b31f32eb88911ac17714d956066492dcd06268982f00f4d9608428f84fcb5a7ef2b621799cf28c3e30381447a53d91cbb023cccfbe914b612def6136d92bcd5f12aa5f75268941b6e0cc22cb7eeb90a7d65744cd092127ad22410e1273b9d167d5cd2c798bdccfc848dcc238004a1f5b64252c2190616bd4c54857a7607f952f94df60e0eedd88541f9a037c9f49ae55b41e5d673818cdd6223381c30d4dc2ec738bff5579cad513ac519066530c8faf925558f1c65e002908ad6db5d6994c2edd0bdb5965092c5e5a87deb3766e19ad87cced4f7a5b552fd30e5e745106c90f7785029f8cb8495657cfdaaf433266966f150de3dab51a04415cc5b676c87dc708fd72543db22e1f8839447cf7c172732fdbd342f019f609121567bed9c219b60a6a8cd242a452ac75de7b2f8f30166aa928ca3ab146b564b2bfcdb9e16d0000b66abe0a6e64f419daee461673004b53dd233e4d878e5bde98c271f709bb2aba639a02fa1f7ee07aaef4d17443ef077ef785809f705cadee7bd5766bc6de16bb474849a550f69928e959c123feeefb4e304490bd403b97128cd30736c845931ce394b6bb4ccb262790d3e1e2b192e7c791abf004a81abfe793d54850d8bf3cc76c385e6837275c161ecf8d85ee65797594c7a3ce9929387e3eb9a84202cee6c6ff429bf2ea40bd02b2d65d8278f7aff6e7d468dd5ac4f7824f3c1aba8f48eda890681015c155cf886f6d8cdb731247d2a8d779701a39fde064c2c20b720341aac1d621589dcb4239697140508a2c69118d476ae11c041f49233d8e56e6ee8862e46da6a187289bbc1e3977af2eeb0c4b595314a1a666a0721d16e4b166f67fd60ee829300219fdc7538f20690bdcd8581cb1cdd49238020bc4a50932161a43b214f2fdbaefafc395068fa5392a2d00e37ebafded4b0bc3474b26741a4d88684b127fc4f4c8c23cdacb59ef9a210ffd4b908fb8e5e2639e0c3ad2249f796c9224cf96ce9c3f09372090984143dec6cdfad44883a333eac8d007a081fb8f58e821e97e2e255376b0a1488522c429c8cdf233f0d98c63ad23d88e8a8a2d4ec6ddba27be95953f8b897bd01bc9f475edcfa69218fe346b6bb6ecb8bbee17ca22f843ca9977b2228421aa61a9f1c1e25ba56d176ffdaec27f38346d60a47922b626828fda302d9a55c77ff33a0ab228997fd4016f817adc0281502cc743ae0d0f8b6738cf8165c535051bd2e90ddb2f168618c538ac67c0922ac0095b9d721606d329ae72b6c64ebba803d90170c375b7602479fa5bbb2c7d3d54ab05b550ef5b8f0de02fb83f3ab441a12609bd16d3db4dab74b516709e36c309d41a83ac48b5459cf27f6676c2fbfc3d4835af8cf26e8d49fcab86af312988c177ce08e69f116350080bc1d2598208a0beb812a4d09be28b0ec3d6b870306ac5486dcc1ffd574bf21f54d78c7ed72a56122bd90f7956f0c54b34ef8a5e8b1445349e5dc59b028c7b056f80e85a9cd2bcaa4759ce45dcd62a2620961f739a79e8df69e56523bf0967b1067e5feb32a9eac0e7be87b8f5c49886396ce2f89dd75a7e7607de83535ce67c342057364ea558c51f47dd66a15b1dfa7607ba6ab43488b19c5d9c30cbde6e57044a4cf81c3f26e26647eda9675160abcd10d5e5524ab366768be6c9a7242ff2463976a0a51e40b066d7705ee1e91331c93493044828f6e283e62b5ed6e5c2f74efac4785f85be2e65c8f533923f9b69911f28999bee3ccb09c54a9aee17aced405166bfd065b5595d62af84b16720eb7218459238ed37a93f08889e59fd79b689b5e67b8c917d128b6350b574ccaa7d420ae4eec4b1a5480ddc97733f673fc85977e66428ab9a8c637ac642ed9a30b3bca79da237092fe465e7ed99d8b6defa57ec29f5b2e2f31403ac7c6df77cf25fde2986fa8259e6a3be3cf560d005830f2b281097c7d230e1f5ca8f5f2bd9742dcce5b628bde55232008fc8a2345c301ef1a9efcd185190eade4f8cf791ffc88f9bec1364425bbcea3d621534fc8d78d7cb1678d6c455a5a763fec8910361b0ff5cdddd40ca63c67ed59847b39e90b3cc5d10843e6f13a7755f4e75314982dd12945418b9ee3e64def9adbb43d711936a73b7c2e3780e686f6dc65a716567cd4b5fc518959dc316360d1b2c235c5f87ddd102de2add86218026db217cb1ba6d8cd2ed5716e16d56a95a78b7ed487f1a6a9caabe4f3880d1d7e04b914a4c71da793b586705d6a85ade93f8c45245ccc180c1f733139d60e2044a7dd0509ef52bd28b066c85ac413c0de84cb311ba717b73d042374124e4db255ef545fa4188a5523964bdcf5e96ce4e4f1e4197bc51479fba248f03a1f1e92900d35f1e7545f4157effeee77efe16137d168f361286613a1f5cedb42cbe1e7ea5472dd8d090940df31b9b564ad7b6d57ec90737a8294b4be68e94be975d96b38e494a324769f2a3cf522770c769b8cb9d632947c60dafe8888d8f76507fb805237c3eb841bbc928e653713b15beb3e0747c6e946aab3190dff6245ba76ba992cf41c3dc4fbada41fc74f77ef792869ee773fac5a985bf5036033619e13edf2b18f5a14baf150abcd2d0f243631328307519c9e3563843f786c6a6706558e872dea2374f4e58bd286463341676a9d05046214dea5a0e2f0da886c456163a838298aaa6f6ae5e78ae84fd5457d5200b261b870c34ec9b690c113d2fad0da7f2d205c8b6acde33536fd970dd607e9bb8e9483b502e6ace89ef355b5e93eba3e9b9d51bc3f06272eefc53c7ce223ee56abad7f164dde7772124ae6cb5bba6c09b9490402df1fb6562837bdd4d681d26ef19904b28ee00c85da92a40b8261900a852ef1b304f4f993612c2af83564cf93d62a2fe8d93e2774742f4fd4739b9f87cda8ff8229a01b09fcf6ac4aaea6edea44542287ed886ad1080f116effacfe6298ca75b73e1d17a3d594b2eb79bdbd510cf4e341e9c63a2ff854738d26b005e2755a12c731c192a4fcbe81cbb1d1bd12bac610aa479d0e7c460334d06c428bbd5cc20a0b0be4de2873cfb9e970018bebcc8b075d070085d8227c3c91d4f04bbe4ae3133fd44f0b4ee8750067adf34bea47cb3b3ef345d5b41b7fbc8d2e78dd67a6636cee0c44f21c3e2e66cf9c11edd6ccada3b7e21eff0c15bb4d2542110c094c106113dcc6c08eafb20663b3282c161bc92eb40c900eff45a106d702771819ef67e2ef393d41c41ea553c12ea1b3707dfeb18ddffdccf126761570adc2ed9c4096c85acf049abe6f362613604257de4bc06572010a5b88b61a2486a48867de62d761b281600e8f34f8cc0d6ad7e76ed39aa4839cc4288b46d746bfc20779217c441381b266b74e15410b55eb3f3455b7080251a1ac9402a913a5f19128ee53d17b68eeae416fcb6d9cf3fb8c02cc0befaac223c8e7e0fa13145e66b6b12ede63fd16b2bde234087ed9d8a20ecc6dbe8389f28265e0ddc16c92b7b452964bc4d5cfd7e9e12fc03fa0be7574e3303d9f841223cb215ef62dd9149ee6e928f5e222743ca6d4d1ec735b8e0e2acd9ee2c564e1a4dab85f178e4ca9b8b1ef484250a39e76d4746ea52754a68669d9fba3499a499a66f7e5b998990ffdb3f0157870d19005d37c7bb8b00e8207c1b4fbf6eaa741c3668dc4464ef6699ed1e39cdb0a3a33ba27cb4d03a14c8a24ba22af229089634e6370c0f8093a3c76724bfd9588d635a816b07739975e85676aa57fa0314f9490fa4c058512c7ab75594ed9c2e9384d0fdebcceeb0c3b8e6c994d0721a43c432ef9bb0ce4aa8dc81311852c6d8550e368b2912b72098c7800499b7cfd91892002e7b0f878c70b2958c1803819d94e2696ac5a2a5e1db6ace047f1a50f97f5454d6719368328e19ba95ac69be809a23b1bfd0cca3e2f55d517540ddaba451931634b8227c3566970502f334b6ecafd5fac74c4574191cb8951a452647e5809e2d2ce1c842841c63be4eabe9209186c12bfd240eae3ab1c0c911f14d31ddfc9a517281dbf327653ee313163476d5c85f46f9ffc042c22bad493a0f87a681b8127fa54f739b87d770bd01c997cb748fafbb77eb3b252bea6b1606393b3f7b86341ffe88170312a8c04a5e4648cbe823ee521e31c4c0d18f58c78c77c2df07ca250ff7b983b6108a8eb84c51d2c363081224465337cdb16708e77778875b4eb8a36a6389d9b477a224b1836ab12db4e0344ab579f3dfd0cf12b99b8c8979f18df123de12a900684f2a884da3aef6ad4204b0d6475ad7cd3e1690bdcf1c1caf5de584df49b52d478c9e9df298391342f7ef83919236aee227c5f5f2e2275b2d27d1f85f5ff9428a25b13e252a6a4129fa91a0350469b0cdf2342b6645b230f0ceeff7abf5a7aebd9324f62ff7b62eb22d765c01d244bb15566389c08aeccf93ebfbfad98fd61baf913e6e09ae2578e20fe39209d0af94f75d4899bdeff1079d11f12c23c426feccabcf059615ff54fea8ac1e510730eafab538f8e1ad6aac1212a6ba786caf18458f08fca31b36aee219247e05ea84ffa2411d1f04133db2eb3faf0f54e42ba86299580e36313ca0ee5b90b9d9c55041591912cc925ee047b2a26ed1a01025f853c3bba61143f02701397c1be7d9db050c6d30f762c46e0d7ed5d6dbccd675645a34a942ef8f3eb5516aafeed54d6b6eb575db1050d81c3e937019f5b799c48754e27dcf6a8ff996e69d70928977752727307ee01ce92fe4720a7cac80e58a9424885b0e5813052c5339e5bcc7cd2e0875576dd47f21dfab96cbafe77552d868abd0fdc1b69c8e827aa0a226077b43809457e4993995a2720b9ce115ad5fedc0759efb2a63efb8ebc65fe7f441f590f61360964a665724893497ae49c2af60c4a5ca084972c067ae24b9f2ae2917b9a24827ced077c18a5ece38ce511be782edcaf622088410981a496fe50609944ab61e5a3a7fff99e74a4a2c13e8043c326d0d2d35cf441deaed061ad1800b593e7e67ee5a4d744364edd061b71393e0cb90cf77d3259dc3961db2f683370d9c9383c46a659064eff788d80019a4d5bfc82e60f213cbdbbae2da55818756731fc887375b1426f8c556904996b7eacde6a412049e4bd1f5a7e50142900c3c069d308e1566a9c6a90e898300f19ed7ee4594c3b0919e1d241203df782a689aa2eb4eb7c11e432629557d3ddff624a14f876523cb1a027a246cf1a3adaf0abc66b7824d89e3150d70a5a644b050c41f82342309adf2df188b582f61785cbecd0721f9c8525b729d35556332328e5f60a15f7673c5dfeafb5f6dcdb5334d5665d23237e082c91ff358ae7512b5cc5721e11e2b04350aa8a1d63045f9fa0bf40708a9be0a991c372e3a946b344bfb2abb58f84a3bf747c1c98d6d9c2a29462d0f7bdde8be8deeaa253da7a0f642ba3aadd268655bdeb4f3071c1aaecd511bfca6685d8d0a9f47b365232a14e96fb280d6d4da128554f36046f524ce7f6ca42991c301f70dd7e752d8c6693e463b4b6f4aadaf7b59e2ab648433d8126e41ba4f10aef4abae075b05d6999412ad8b861291cdb77bfac8bc61e438899741767b7b26ae2c9a801817827639a3cd85e2f96f7ac2774b0cf2b9df57568db712eb106714ebde86c37bcad21216653f7dbbc086dfde7c50d8f17fb9ae14f8cbaa16be6479769a5434b04ec33a7b3b4ec2fe8457470e042ce6a5c611f8dc377e476d319c701f8ba180fdeac6b0d8c00178c339c56aced6e5d59451ed488837c98b26fde63464dec99ab88dc251f4437ba0904dbaf050f547c47c3c7f97c8015bfd7c63605a49e41a75292b4b62e51725216cf86cd17cdbd40acd30893a56545bab6931e214790d2a8ce5c178708cb75b38c2104d21142d3e4c0035e4e16dd5707b976d750ebae098e3616842332ab0ca55611888a519aeee3146fa6de5c60806a45450348d68aa9d5945d160f26954f94cdeb08fa88e8a70aac8b345d9aff9da13af1f40be8ca5314d378aa675944657570b2ad65e2efb18b5cf8c1c260c5ade1f5f2e04a54175ba90d7803e5f30d7c52dad60d057d57877ae1041d498578e09c2037ffa47adae904be3c8a9d25fd51cc3952edd2cbe9ebb74db76417a535b12bc1e7e704608ecd2c714495aa04a33c16059994252350556d01b8de10e72ad5c77217199ee05159a904b2e04fe2846aafcea6cc2575d1b054621ede6635c12927e79a2fe5c8ee8e3ccab2fbbf61f151aabedbdd3fc814fabbb41d1d5ee15a0860f30f8f52263b0fafa6ade3c7c54577be2f9ede941c452243d396abd792894a50738b5325e4f267583b18fc312db858d517465b12341556de4894a544c3fbcbce7eabf69cf9cfb43ce533280ee0d1f0dfcbcd39d5dd6256da807a118713b2a723e50dbfef72683c79292b8022e0906f6ffa6c2e398bf52d3073ed0ca17b3ee70b7c41c8aaec8cf5c57c9a3851c60bd9afefd71d0656193f21f9c6cf442d0e84637671af2d7238854c5a5a657932b70547e936a2c2c434c0abacabd68c5ee0b3f478708bebd39ecc4be0427d8b7df77c3ca34110afc9ba96d4fd8b76c8c615cd030e30b1526230ddbc90e8df708344ee6dc9834320d1827787480d1ef09f6b66b8721a53978475558233c88e2e0b9d8c2c53f8beee833a896516c13d832382cb79c53bfb5e909848bda13f38d526ce82e50e5d62dec2f6c14aba5a3dd0fd4e3bc7e40f33987cc3d870522c09248c3cf1c014ba56f38eb295a60826166bb61889b39c9a99ae069a9284b4848ec9247b5725fa029ee465347dcd09511ceff18785e9af6824ae3934d2dc5cda3c53caf28c7cafe411dc25bf98f2689d959f583d10542c39db71fe6a6fc7e67aae1e408d3970e3eee02971422d89ca0df9e71f2e9458ed91d06284b24018c1c065952f69e5924c97c28d280d0018893e6ed8a0cf96f0d91353db357f710421516f90bb177de85d1fc0a1096d25ec7f3de5315c7865b5b9d52e43d162d48386fe6f</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      Welcome to my blog, enter password to read.
    
    </summary>
    
      <category term="kubernetes" scheme="https://www.xxlaila.cn/categories/kubernetes/"/>
    
    
      <category term="java" scheme="https://www.xxlaila.cn/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>harbor 使用</title>
    <link href="https://www.xxlaila.cn/2019/10/10/harbor-%E4%BD%BF%E7%94%A8/"/>
    <id>https://www.xxlaila.cn/2019/10/10/harbor-使用/</id>
    <published>2019-10-10T08:49:41.000Z</published>
    <updated>2019-10-31T09:34:27.208Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h4 id="days-2019-10-10"><a href="#days-2019-10-10" class="headerlink" title="days(2019-10-10)"></a>days(2019-10-10)</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前面文章介绍了harbor的部署，今天第一次学习入门使用。</p><a id="more"></a><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;服务器安装docker以后，我们怎么吧镜像push到我们的私有仓库，和怎么吧镜像pull到本地，首先在服务器上装备docker环境</p><h5 id="连接harbor"><a href="#连接harbor" class="headerlink" title="连接harbor"></a>连接harbor</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker login reg.xxlaila.cn</span></span><br><span class="line">Username: admin</span><br><span class="line">Password: </span><br><span class="line">Error response from daemon: Get https://172.21.16.90/v1/users/: dial tcp reg.xxlaila.cn:443: connect: connection refused</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里第一次连接报错，Docker自从1.3.X之后docker registry交互默认使用的是HTTPS，但是我们搭建私有镜像默认使用的是HTTP服务，所以与私有镜像交时出现以上错误。</p><h5 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h5><ul><li><p>方法一: 修改或添加配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/docker/daemon.json </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"insecure-registries"</span> : [<span class="string">"reg.xxlaila.cn"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>重新启动docker，并重新登录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># systemctl restart docker</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  docker login reg.xxlaila.cn</span></span><br><span class="line">Username: admin</span><br><span class="line">Password: </span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure></li><li><p>方法二：修改启动文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /usr/lib/systemd/system/docker.service  </span></span><br><span class="line">ExecStart=/usr/bin/dockerd --insecure-registry reg.xxlaila.cn <span class="variable">$DOCKER_NETWORK_OPTIONS</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># systemctl daemon-reload</span></span><br><span class="line"><span class="comment"># systemctl restart docker</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="Harbor上创建新项目供上传使用"><a href="#Harbor上创建新项目供上传使用" class="headerlink" title="Harbor上创建新项目供上传使用"></a>Harbor上创建新项目供上传使用</h5><p><img src="https://img.xxlaila.cn/1570697850857.jpg" alt="img"></p><h5 id="Docker服务器给镜像打标签"><a href="#Docker服务器给镜像打标签" class="headerlink" title="Docker服务器给镜像打标签"></a>Docker服务器给镜像打标签</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker images</span></span><br><span class="line">REPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">docker.io/xxlaila/kxl-eureka   v2                  eb8cf7e3f24f        7 months ago        474 MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># docker tag docker.io/xxlaila/kxl-eureka:v2 reg.xxlaila.cn/kxl/kxl-eureka:v2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># docker images</span></span><br><span class="line">REPOSITORY                      TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">docker.io/xxlaila/kxl-eureka    v2                  eb8cf7e3f24f        7 months ago        474 MB</span><br><span class="line">reg.xxlaila.cn/kxl/kxl-eureka   v2                  eb8cf7e3f24f        7 months ago        474 MB</span><br></pre></td></tr></table></figure><h5 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker push reg.xxlaila.cn/kxl/kxl-eureka:v2</span></span><br><span class="line">The push refers to a repository [reg.xxlaila.cn/kxl/kxl-eureka]</span><br><span class="line">f6026bf67b63: Pushed </span><br><span class="line">1489a4b0f1dd: Pushed </span><br><span class="line">2af6e035aa36: Pushed </span><br><span class="line">472cfce4528e: Pushed </span><br><span class="line">071d8bd76517: Pushed </span><br><span class="line">v2: digest: sha256:20d3bc74fdcb2fc4cdfc9066f742c828898c728f7e3f2114498ebe2848b71653 size: 1368</span><br></pre></td></tr></table></figure><p><img src="https://img.xxlaila.cn/1570698233987.jpg" alt="img"></p><h5 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h5><ul><li><p>删除本地镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker rmi reg.xxlaila.cn/kxl/kxl-eureka:v2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># docker rmi docker.io/xxlaila/kxl-eureka:v2</span></span><br></pre></td></tr></table></figure></li><li><p>下载harbor上的镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker pull reg.xxlaila.cn/kxl/kxl-eureka:v2</span></span><br><span class="line">Trying to pull repository reg.xxlaila.cn/kxl/kxl-eureka ... </span><br><span class="line">v2: Pulling from reg.xxlaila.cn/kxl/kxl-eureka</span><br><span class="line">a02a4930cb5d: Pull complete </span><br><span class="line">6ea3dcbee0db: Extracting [==================================================&gt;]  81.4 MB/81.4 MB</span><br><span class="line">6ea3dcbee0db: Pull complete </span><br><span class="line">c423a7a79cc1: Pull complete </span><br><span class="line">7418081934c1: Pull complete </span><br><span class="line">f89b73853622: Pull complete </span><br><span class="line">Digest: sha256:20d3bc74fdcb2fc4cdfc9066f742c828898c728f7e3f2114498ebe2848b71653</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> reg.xxlaila.cn/kxl/kxl-eureka:v2</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://img.xxlaila.cn/1570698681073.jpg" alt="img"></p><h4 id="days-2019-10-12"><a href="#days-2019-10-12" class="headerlink" title="days(2019-10-12)"></a>days(2019-10-12)</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于公司需求，开发人员比较多，又不想研发用一个账号，也不想给研发一个个的开账号，位置harbor支持了ldap。有了这么一个东西，我们就能很好的为研发创建账号支持研发随时查看docker的镜像。</p><h4 id="配置harbor-ldap"><a href="#配置harbor-ldap" class="headerlink" title="配置harbor ldap"></a>配置harbor ldap</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新版本的harbor很多东西都可以直接在界面配置，不需要去修改文件，省去了大量的工作，web界面配置更加方便快捷，登录harbor平台，点击配置管理——&gt;修改认证模式，认证模式支持很多类型，这里选择ldap。<br><img src="https://img.xxlaila.cn/1571019665079.jpg" alt="img"><br><strong>注</strong>: 在密码这栏填写需要填写管理员的密码，普通用户的密码是不行的，即使是在管理员的用户也是不行的。<br>点击测试ldap，提示连接成功后保存<br><img src="https://img.xxlaila.cn/1571019741060.jpg" alt="img"></p><h4 id="配置邮箱"><a href="#配置邮箱" class="headerlink" title="配置邮箱"></a>配置邮箱</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在配置ldap页面旁边有一个邮箱配置，邮件服务器用于向请求重设密码的用户发送响应。<br><img src="https://img.xxlaila.cn/1570873497729.jpg" alt="img"><br>点击测试，测试没问题之后点击保存。</p><h4 id="测试ladp连接"><a href="#测试ladp连接" class="headerlink" title="测试ladp连接"></a>测试ladp连接</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新打开一个一个浏览器窗口，利用ladp账户进行登录。<br><img src="https://img.xxlaila.cn/1571019859287.jpg" alt="img"><br><strong>注释</strong>: 新版本的在登录界面没有什么选择ldap登录，直接使用ldap账号登录就ok</p><h4 id="将项目角色分配给LDAP-AD组"><a href="#将项目角色分配给LDAP-AD组" class="headerlink" title="将项目角色分配给LDAP / AD组"></a>将项目角色分配给LDAP / AD组</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;修改之前的ldap配置，增加组的配置<br><img src="https://img.xxlaila.cn/1571023069387.jpg" alt="img"><br>在项目-&gt;成员-&gt; +组中。<br><img src="https://img.xxlaila.cn/1571023177214.jpg" alt="img"><br><img src="https://img.xxlaila.cn/1571023223796.jpg" alt="img"></p><h4 id="设置ldap账户的权限"><a href="#设置ldap账户的权限" class="headerlink" title="设置ldap账户的权限"></a>设置ldap账户的权限</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当ldap配置以后，ldap账户登录没有管理员权限，我们管理harbor还的使用<code>harbor</code>的admin账户登录，这样无疑对运维人员维护带来了不便利。当ldap用户登录，harbor就会记录该用户，我们设置运维用户为超级管理员，这样就实现了一个账号登录，维护的时候也不用账号切换<br><img src="https://img.xxlaila.cn/1571023451423.jpg" alt="img"></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h4 id=&quot;days-2019-10-10&quot;&gt;&lt;a href=&quot;#days-2019-10-10&quot; class=&quot;headerlink&quot; title=&quot;days(2019-10-10)&quot;&gt;&lt;/a&gt;days(2019-10-10)&lt;/h4&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;前面文章介绍了harbor的部署，今天第一次学习入门使用。&lt;/p&gt;
    
    </summary>
    
      <category term="kubernetes" scheme="https://www.xxlaila.cn/categories/kubernetes/"/>
    
    
      <category term="harbor" scheme="https://www.xxlaila.cn/tags/harbor/"/>
    
  </entry>
  
  <entry>
    <title>HPA认识</title>
    <link href="https://www.xxlaila.cn/2019/10/09/hpa/"/>
    <id>https://www.xxlaila.cn/2019/10/09/hpa/</id>
    <published>2019-10-09T07:12:23.000Z</published>
    <updated>2019-10-28T02:35:39.808Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="Pod-自动扩缩容"><a href="#Pod-自动扩缩容" class="headerlink" title="Pod 自动扩缩容"></a>Pod 自动扩缩容</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kubernetes提供了这样一个资源对象: <code>Horizontal Pod Autoscaling</code> Pod水平自动伸缩），简称HPA。HAP通过监控分析RC或者Deployment控制的所有Pod的负载变化情况来确定是否需要调整Pod的副本数量，这是HPA最基本的原理。</p><a id="more"></a><p><img src="https://img.xxlaila.cn/1570605234009.jpg" alt="img"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HPA在kubernetes集群中被设计成一个Kubernetes API资源和控制器，可以通过kubectl autoscale命令来创建一个HPA资源对象，HPA Controller默认15s轮询一次（可通过kube-controller-manager的标志–horizontal-pod-autoscaler-sync-period进行设置），查询指定的资源（RC或者Deployment）中Pod的资源使用率，并且与创建时设定的值和指标做对比，从而实现自动伸缩的功能。<br><a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/" target="_blank" rel="noopener">详细介绍</a></p><h3 id="Pod水平自动伸缩练习"><a href="#Pod水平自动伸缩练习" class="headerlink" title="Pod水平自动伸缩练习"></a>Pod水平自动伸缩练习</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于Horizontal Pod Autoscaler使用此API收集指标，因此需要在群集中部署metrics-server监视以通过资源指标API提供指标,</p><h4 id="运行php-apache服务器"><a href="#运行php-apache服务器" class="headerlink" title="运行php-apache服务器"></a>运行php-apache服务器</h4><p>首先，我们将开始运行该映像的部署，并将其服务公开</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl run php-apache --image=0layfolk0/hpa-example --requests=cpu=200m --limits=cpu=500m --expose --port=80</span><br><span class="line">kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed <span class="keyword">in</span> a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.</span><br><span class="line">service/php-apache created</span><br><span class="line">deployment.apps/php-apache created</span><br></pre></td></tr></table></figure><h4 id="创建水平Pod自动缩放器"><a href="#创建水平Pod自动缩放器" class="headerlink" title="创建水平Pod自动缩放器"></a>创建水平Pod自动缩放器</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当服务运行以后。我们将使用kubectl autoscale创建自动 缩放器。以下命令将创建一个水平Pod自动缩放器，该缩放器将维护由我们在这些说明的第一步中创建的php-apache部署控制的Pod的1至10个副本。粗略地说，HPA将（通过部署）增加或减少副本数，以将所有Pod的平均CPU利用率维持在50％（因为每个pod通过kubectl运行请求200毫核，这意味着平均CPU利用率为100毫-核心）。<a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/#algorithm-details" target="_blank" rel="noopener">算法更多信息</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl autoscale deployment php-apache --cpu-percent=50 --min=1 --max=10</span><br><span class="line">horizontalpodautoscaler.autoscaling/php-apache autoscaled</span><br></pre></td></tr></table></figure><p>我们可以通过运行以下命令检查自动定标器的当前状态:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get hpa</span><br><span class="line">NAME         REFERENCE               TARGETS   MINPODS   MAXPODS   REPLICAS   AGE</span><br><span class="line">php-apache   Deployment/php-apache   0%/50%    1         10        1          14s</span><br></pre></td></tr></table></figure><p><strong>注释</strong>: 由于我们没有向服务器发送任何请求，因此当前CPU消耗为0％（“ CURRENT”列显示了由相应部署控制的所有Pod的平均值）。</p><h4 id="增加压力测试"><a href="#增加压力测试" class="headerlink" title="增加压力测试"></a>增加压力测试</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;现在我们要对<code>php-apache</code>做压力测试来观看自动缩放如何对增加的负载做出反应，我们将启动一个容器，并将无限循环的查询发送到php-apache服务。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl run -i --tty load-generator --image=busybox /bin/sh</span><br><span class="line">kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed <span class="keyword">in</span> a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.</span><br><span class="line">If you don<span class="string">'t see a command prompt, try pressing enter.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/ # while true; do wget -q -O- http://php-apache.default.svc.cluster.local; done</span></span><br><span class="line"><span class="string">OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!OK!O</span></span><br></pre></td></tr></table></figure><p>在一分钟左右的时间内，我们应该通过执行以下命令来看到更高的CPU负载：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get hpa</span><br><span class="line">NAME         REFERENCE               TARGETS    MINPODS   MAXPODS   REPLICAS   AGE</span><br><span class="line">php-apache   Deployment/php-apache   250%/50%   1         10        1          9m12s</span><br><span class="line"></span><br><span class="line">$ kubectl get deployment php-apache</span><br><span class="line">NAME         READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">php-apache   3/5     5            3           88m</span><br></pre></td></tr></table></figure><p>这里由于网络问题和pull 镜像太慢了，我就直接结束了测试</p><h4 id="停止压力测试"><a href="#停止压力测试" class="headerlink" title="停止压力测试"></a>停止压力测试</h4><p>我们在<code>busybox</code>容器的终端里面执行<code>&lt;Ctrl&gt; + C</code>来结束压力测试，然后我们在观察结果</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$  kubectl get hpa</span><br><span class="line">NAME         REFERENCE               TARGETS   MINPODS   MAXPODS   REPLICAS   AGE</span><br><span class="line">php-apache   Deployment/php-apache   91%/50%   1         10        5          10m</span><br><span class="line"></span><br><span class="line">$ kubectl get deployment php-apache</span><br><span class="line">NAME         READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">php-apache   2/2     2            2           99m</span><br></pre></td></tr></table></figure><p><a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/" target="_blank" rel="noopener">自动缩放多个指标和自定义指标</a></p><h3 id="nginx-测试"><a href="#nginx-测试" class="headerlink" title="nginx 测试"></a>nginx 测试</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;利用之前<a href="https://xxlaila.github.io/2019/10/09/Deployment%E4%BD%BF%E7%94%A8/" target="_blank" rel="noopener">Deployment</a>里面的nginx做测试，我们只需要吧之前的yaml文件稍作修改即可</p><h4 id="修改nginx-deployment-yaml"><a href="#修改nginx-deployment-yaml" class="headerlink" title="修改nginx-deployment.yaml"></a>修改nginx-deployment.yaml</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ cat &gt; nginx-deployment.yaml &lt;&lt;EOF</span><br><span class="line">apiVersion: apps/v1beta1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-deploy</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: nginx-deploy</span><br><span class="line">spec:</span><br><span class="line">  replicas: 1</span><br><span class="line">  minReadySeconds: 5</span><br><span class="line">  revisionHistoryLimit: 10</span><br><span class="line">  strategy:</span><br><span class="line">    <span class="built_in">type</span>: RollingUpdate</span><br><span class="line">    rollingUpdate:</span><br><span class="line">      maxSurge: 1</span><br><span class="line">      maxUnavailable: 1</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: nginx-deploy</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: nginx-deploy</span><br><span class="line">        image: nginx:1.13.3</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 80</span><br><span class="line">        resources:</span><br><span class="line">          requests:</span><br><span class="line">            memory: <span class="string">"200Mi"</span></span><br><span class="line">            cpu: <span class="string">"200m"</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h4 id="新建立nginx-deploy-hpa-yaml"><a href="#新建立nginx-deploy-hpa-yaml" class="headerlink" title="新建立nginx-deploy-hpa.yaml"></a>新建立nginx-deploy-hpa.yaml</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ cat &gt; nginx-deploy-hpa.yaml &lt;&lt;EOF</span><br><span class="line">apiVersion: autoscaling/v1</span><br><span class="line">kind: HorizontalPodAutoscaler</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-deploy</span><br><span class="line">  namespace: default</span><br><span class="line">spec:</span><br><span class="line">  maxReplicas: 5</span><br><span class="line">  minReplicas: 1</span><br><span class="line">  scaleTargetRef:</span><br><span class="line">    apiVersion: extensions/v1beta1</span><br><span class="line">    kind: Deployment</span><br><span class="line">    name: nginx-deploy</span><br><span class="line">  targetCPUUtilizationPercentage: 10</span><br><span class="line">status:</span><br><span class="line">  currentCPUUtilizationPercentage: 8</span><br><span class="line">  currentReplicas: 1</span><br><span class="line">  desiredReplicas: 0</span><br></pre></td></tr></table></figure><ul><li><p>执行创建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl apply -f nginx-deployment.yaml</span><br><span class="line">$ kubectl apply -f kubectl apply -f nginx-deploy-hpa.yaml</span><br></pre></td></tr></table></figure></li><li><p>查看验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get hpa</span><br><span class="line">NAME           REFERENCE                 TARGETS   MINPODS   MAXPODS   REPLICAS   AGE</span><br><span class="line">nginx-deploy   Deployment/nginx-deploy   0%/10%    1         5         2          45s</span><br><span class="line"></span><br><span class="line">$ kubectl get rs</span><br><span class="line">NAME                        DESIRED   CURRENT   READY   AGE</span><br><span class="line">load-generator-7fbcc7489f   1         1         1       8m28s</span><br><span class="line">nginx-deploy-d494b9564      2         2         2       13m</span><br></pre></td></tr></table></figure></li><li><p>执行压力测试</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl run -i --tty load-generator --image=busybox /bin/sh</span><br><span class="line">kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed <span class="keyword">in</span> a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.</span><br><span class="line">If you don<span class="string">'t see a command prompt, try pressing enter.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/ # while true; do wget -q -O- http://172.30.224.5:80; done</span></span><br></pre></td></tr></table></figure></li><li><p>查看效果</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get hpa</span><br><span class="line">NAME           REFERENCE                 TARGETS   MINPODS   MAXPODS   REPLICAS   AGE</span><br><span class="line">nginx-deploy   Deployment/nginx-deploy   28%/10%   1         5         4          4m48s</span><br><span class="line"></span><br><span class="line">$ kubectl get rs</span><br><span class="line">NAME                        DESIRED   CURRENT   READY   AGE</span><br><span class="line">load-generator-7fbcc7489f   1         1         1       12m</span><br><span class="line">nginx-deploy-d494b9564      5         5         5       18m</span><br><span class="line"></span><br><span class="line">$ kubectl get hpa</span><br><span class="line">NAME           REFERENCE                 TARGETS   MINPODS   MAXPODS   REPLICAS   AGE</span><br><span class="line">nginx-deploy   Deployment/nginx-deploy   16%/10%   1         5         5          5m39s</span><br></pre></td></tr></table></figure></li><li><p>结束压测<br>等待一会查看结果</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get hpa</span><br><span class="line">NAME           REFERENCE                 TARGETS   MINPODS   MAXPODS   REPLICAS   AGE</span><br><span class="line">nginx-deploy   Deployment/nginx-deploy   0%/10%    1         5         1          12m</span><br><span class="line"></span><br><span class="line">$ kubectl get rs</span><br><span class="line">NAME                        DESIRED   CURRENT   READY   AGE</span><br><span class="line">load-generator-7fbcc7489f   1         1         1       19m</span><br><span class="line">nginx-deploy-d494b9564      1         1         1       25m</span><br></pre></td></tr></table></figure></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;Pod-自动扩缩容&quot;&gt;&lt;a href=&quot;#Pod-自动扩缩容&quot; class=&quot;headerlink&quot; title=&quot;Pod 自动扩缩容&quot;&gt;&lt;/a&gt;Pod 自动扩缩容&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Kubernetes提供了这样一个资源对象: &lt;code&gt;Horizontal Pod Autoscaling&lt;/code&gt; Pod水平自动伸缩），简称HPA。HAP通过监控分析RC或者Deployment控制的所有Pod的负载变化情况来确定是否需要调整Pod的副本数量，这是HPA最基本的原理。&lt;/p&gt;
    
    </summary>
    
      <category term="kubernetes" scheme="https://www.xxlaila.cn/categories/kubernetes/"/>
    
    
      <category term="hpa" scheme="https://www.xxlaila.cn/tags/hpa/"/>
    
  </entry>
  
  <entry>
    <title>Deployment使用</title>
    <link href="https://www.xxlaila.cn/2019/10/09/Deployment%E4%BD%BF%E7%94%A8/"/>
    <id>https://www.xxlaila.cn/2019/10/09/Deployment使用/</id>
    <published>2019-10-09T01:59:08.000Z</published>
    <updated>2019-11-04T01:25:27.289Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="Deployment和rc的对比"><a href="#Deployment和rc的对比" class="headerlink" title="Deployment和rc的对比"></a>Deployment和rc的对比</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首先RC是Kubernetes的一个核心概念，当我们把应用部署到集群之后，需要保证应用能够持续稳定的运行，RC就是这个保证的关键，主要功能如:</p><ul><li>确保Pod数量: 它会确保Kubernetes中有指定数量的Pod在运行，如果少于指定数量的Pod，RC就会创建新的，反之这会删除多余的，保证Pod的副本数量不变。</li><li>确保Pod健康: 当Pod不健康，比如运行出错了，总之无法提供正常服务时，RC也会杀死不健康的Pod，重新创建新的。</li><li>弹性伸缩: 在业务高峰或者低峰的时候，可以用过RC来动态的调整Pod数量来提供资源的利用率，当然我们也提到过如果使用HPA这种资源对象的话可以做到自动伸缩。</li><li>滚动升级: 滚动升级是一种平滑的升级方式，通过逐步替换的策略，保证整体系统的稳定性</li></ul><a id="more"></a><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deployment同样也是Kubernetes系统的一个核心概念，主要职责和RC一样的都是保证Pod的数量和健康，二者大部分功能都是完全一致的，我们可以看成是一个升级版的RC控制器，Deployment具备的新特性</p><ul><li>RC的全部功能: Deployment具备上面描述的RC的全部功能</li><li>事件和状态查看: 可以查看Deployment的升级详细进度和状态</li><li>回滚: 当升级Pod的时候如果出现问题，可以使用回滚操作回滚到之前的任一版本</li><li>版本记录: 每一次对Deployment的操作，都能够保存下来，这也是保证可以回滚到任一版本的基础</li><li>暂停和启动: 对于每一次升级都能够随时暂停和启动</li></ul><p><strong>对比</strong>: Deployment作为新一代的RC，在功能上更为丰富，同时官方也是推荐使用Deployment来管理Pod，比如一些官方组件kube-dns、kube-proxy也都是使用的Deployment来管理的，所以最好使用Deployment来管理Pod。</p><h3 id="Deployment-介绍"><a href="#Deployment-介绍" class="headerlink" title="Deployment 介绍"></a>Deployment 介绍</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deployment拥有多个Replica Set，而一个Replica Set拥有一个或多个Pod。一个Deployment控制多个rs主要是为了支持回滚机制，每当Deployment操作时，Kubernetes会重新生成一个Replica Set并保留，以后有需要的话就可以回滚至之前的状态。</p><p><strong>实例</strong>: 创建一个Deployment，它创建了一个Replica Set来启动3个nginx pod，yaml文件如下:</p><ul><li><p>nginx-deployment.yaml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ cat &gt; nginx-deployment.yaml &lt;&lt;EOF</span><br><span class="line">apiVersion: apps/v1beta1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-deploy</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: nginx-demo</span><br><span class="line">spec:</span><br><span class="line">  replicas: 3</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: nginx</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: nginx</span><br><span class="line">        image: nginx:1.7.9</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 80</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li><li><p>执行创建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl create -f nginx-deployment.yaml</span><br><span class="line">deployment.apps/nginx-deploy created</span><br></pre></td></tr></table></figure></li><li><p>执行一下命令查看刚刚创建的Deployment</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get deployments</span><br><span class="line">NAME           READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx-deploy   0/3     3            0           12s</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再次执行上面命令</span></span><br><span class="line">$ kubectl get deployments</span><br><span class="line">NAME           READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx-deploy   1/3     3            1           35s</span><br></pre></td></tr></table></figure></li><li><p>可以看到Deployment已经创建了1个Replica Set了，执行下面的命令查看rs和pod</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get rs</span><br><span class="line">NAME                     DESIRED   CURRENT   READY   AGE</span><br><span class="line">nginx-deploy-6dd86d77d   3         3         2       70s</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">$ kubectl get pod --show-labels</span><br><span class="line">NAME                           READY   STATUS              RESTARTS   AGE   LABELS</span><br><span class="line">nginx-deploy-6dd86d77d-9n9vf   1/1     Running             0          99s   app=nginx,pod-template-hash=6dd86d77d</span><br><span class="line">nginx-deploy-6dd86d77d-bhrsk   0/1     ContainerCreating   0          99s   app=nginx,pod-template-hash=6dd86d77d</span><br><span class="line">nginx-deploy-6dd86d77d-jdnrh   1/1     Running             0          99s   app=nginx,pod-template-hash=6dd86d77d</span><br></pre></td></tr></table></figure></li></ul><p>上面的Deployment的yaml文件中的replicas:3将会保证我们始终有3个POD在运行。</p><h3 id="滚动升级"><a href="#滚动升级" class="headerlink" title="滚动升级"></a>滚动升级</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;修改之前使用的nginx-deployment.yaml文件中的nginx镜像修改为nginx:1.13.3，然后在spec下面添加滚动升级策略：</p><ul><li><p>nginx-deploments.yml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: apps/v1beta1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-deploy</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: nginx-demo</span><br><span class="line">spec:</span><br><span class="line">  replicas: 3</span><br><span class="line">  minReadySeconds: 5</span><br><span class="line">  strategy:</span><br><span class="line">    <span class="built_in">type</span>: RollingUpdate</span><br><span class="line">    rollingUpdate:</span><br><span class="line">      maxSurge: 1</span><br><span class="line">      maxUnavailable: 1</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: nginx</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: nginx</span><br><span class="line">        image: nginx:1.13.3</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 80</span><br></pre></td></tr></table></figure></li><li><p>minReadySeconds:</p><ul><li>滚动升级时5s后认为该pod就绪</li><li>如果没有设置该值，Kubernetes会假设该容器启动起来后就提供服务了</li><li>如果没有设置该值，在某些极端情况下可能会造成服务不正常运行</li></ul></li><li><p>rollingUpdate:</p><ul><li>于replicas为3,则整个升级,pod个数在2-4个之间</li></ul></li><li><p>maxSurge:</p><ul><li>升级过程中最多可以比原先设置多出的POD数量</li><li>例如：maxSurage=1，replicas=3,则表示Kubernetes会先启动1一个新的Pod后才删掉一个旧的POD，整个升级过程中最多会有3+1个POD。</li></ul></li><li><p>maxUnavaible:</p><ul><li>升级过程中最多有多少个POD处于无法提供服务的状态</li><li>当maxSurge不为0时，该值也不能为0</li><li>例如：maxUnavaible=1，则表示Kubernetes整个升级过程中最多会有1个POD处于无法服务的状态。</li></ul></li><li><p>执行创建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl apply -f nginx-deployment.yaml</span><br><span class="line">deployment.apps/nginx-deploy configured</span><br></pre></td></tr></table></figure></li><li><p>查看状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用rollout命令</span></span><br><span class="line">$ kubectl rollout status deployment/nginx-deploy</span><br><span class="line">Waiting <span class="keyword">for</span> deployment <span class="string">"nginx-deploy"</span> rollout to finish: 2 out of 3 new replicas have been updated...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 暂停升级</span></span><br><span class="line">$ kubectl rollout pause deployment deployment/nginx-deploy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 继续升级</span></span><br><span class="line">$ kubectl rollout resume deployment deployment/nginx-deploy</span><br></pre></td></tr></table></figure></li></ul><p>升级结束后，继续查看rs的状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get rs</span><br><span class="line">NAME                      DESIRED   CURRENT   READY   AGE</span><br><span class="line">nginx-deploy-6dd86d77d    0         0         0       21m</span><br><span class="line">nginx-deploy-799d666985   3         3         3       10m</span><br></pre></td></tr></table></figure><p>根据AGE我们可以看到离我们最近的当前状态是：3，和我们的yaml文件是一致的，证明升级成功了。用describe命令可以查看升级的全部信息:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl describe deploy nginx-deploy</span><br><span class="line">Name:                   nginx-deploy</span><br><span class="line">Namespace:              default</span><br><span class="line">CreationTimestamp:      Wed, 09 Oct 2019 10:12:56 +0800</span><br><span class="line">Labels:                 k8s-app=nginx-demo</span><br><span class="line">Annotations:            deployment.kubernetes.io/revision: 2</span><br><span class="line">                        kubectl.kubernetes.io/last-applied-configuration:</span><br><span class="line">                          &#123;<span class="string">"apiVersion"</span>:<span class="string">"apps/v1beta1"</span>,<span class="string">"kind"</span>:<span class="string">"Deployment"</span>,<span class="string">"metadata"</span>:&#123;<span class="string">"annotations"</span>:&#123;&#125;,<span class="string">"labels"</span>:&#123;<span class="string">"k8s-app"</span>:<span class="string">"nginx-demo"</span>&#125;,<span class="string">"name"</span>:<span class="string">"nginx-deploy"</span>,<span class="string">"nam...</span></span><br><span class="line"><span class="string">Selector:               app=nginx</span></span><br><span class="line"><span class="string">Replicas:               3 desired | 3 updated | 3 total | 3 available | 0 unavailable</span></span><br><span class="line"><span class="string">StrategyType:           RollingUpdate</span></span><br><span class="line"><span class="string">MinReadySeconds:        5</span></span><br><span class="line"><span class="string">RollingUpdateStrategy:  1 max unavailable, 1 max surge</span></span><br><span class="line"><span class="string">Pod Template:</span></span><br><span class="line"><span class="string">  Labels:  app=nginx</span></span><br><span class="line"><span class="string">  Containers:</span></span><br><span class="line"><span class="string">   nginx:</span></span><br><span class="line"><span class="string">    Image:        nginx:1.13.3</span></span><br><span class="line"><span class="string">    Port:         80/TCP</span></span><br><span class="line"><span class="string">    Host Port:    0/TCP</span></span><br><span class="line"><span class="string">    Environment:  &lt;none&gt;</span></span><br><span class="line"><span class="string">    Mounts:       &lt;none&gt;</span></span><br><span class="line"><span class="string">  Volumes:        &lt;none&gt;</span></span><br><span class="line"><span class="string">Conditions:</span></span><br><span class="line"><span class="string">  Type           Status  Reason</span></span><br><span class="line"><span class="string">  ----           ------  ------</span></span><br><span class="line"><span class="string">  Available      True    MinimumReplicasAvailable</span></span><br><span class="line"><span class="string">  Progressing    True    NewReplicaSetAvailable</span></span><br><span class="line"><span class="string">OldReplicaSets:  &lt;none&gt;</span></span><br><span class="line"><span class="string">NewReplicaSet:   nginx-deploy-799d666985 (3/3 replicas created)</span></span><br><span class="line"><span class="string">Events:</span></span><br><span class="line"><span class="string">  Type    Reason             Age   From                   Message</span></span><br><span class="line"><span class="string">  ----    ------             ----  ----                   -------</span></span><br><span class="line"><span class="string">  Normal  ScalingReplicaSet  23m   deployment-controller  Scaled up replica set nginx-deploy-6dd86d77d to 3</span></span><br><span class="line"><span class="string">  Normal  ScalingReplicaSet  12m   deployment-controller  Scaled up replica set nginx-deploy-799d666985 to 1</span></span><br><span class="line"><span class="string">  Normal  ScalingReplicaSet  12m   deployment-controller  Scaled down replica set nginx-deploy-6dd86d77d to 2</span></span><br><span class="line"><span class="string">  Normal  ScalingReplicaSet  12m   deployment-controller  Scaled up replica set nginx-deploy-799d666985 to 2</span></span><br><span class="line"><span class="string">  Normal  ScalingReplicaSet  11m   deployment-controller  Scaled down replica set nginx-deploy-6dd86d77d to 1</span></span><br><span class="line"><span class="string">  Normal  ScalingReplicaSet  11m   deployment-controller  Scaled up replica set nginx-deploy-799d666985 to 3</span></span><br><span class="line"><span class="string">  Normal  ScalingReplicaSet  10m   deployment-controller  Scaled down replica set nginx-deploy-6dd86d77d to 0</span></span><br></pre></td></tr></table></figure><h3 id="回滚Deployment"><a href="#回滚Deployment" class="headerlink" title="回滚Deployment"></a>回滚Deployment</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前面已经滚动平滑的升级Deployment，但是如果升级后的POD出了问题该怎么办？我们能够想到的最好最快的方式当然是回退到上一次能够提供正常工作的版本，Deployment就为我们提供了回滚机制。</p><ul><li>首先，查看Deployment的升级历史:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl rollout <span class="built_in">history</span> deployment nginx-deploy</span><br><span class="line">deployment.extensions/nginx-deploy </span><br><span class="line">REVISION  CHANGE-CAUSE</span><br><span class="line">1         &lt;none&gt;</span><br><span class="line">2         &lt;none&gt;</span><br></pre></td></tr></table></figure></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从上面的结果可以看出在执行Deployment升级的时候最好带上record参数，便于我们查看历史版本信息。<code>kubectl apply --filename=nginx-deployment.yaml --record=true</code><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认情况下，所有通过kubectl xxxx –record都会被kubernetes记录到etcd进行持久化，这无疑会占用资源，最重要的是，时间久了，当你kubectl get rs时，会有成百上千的垃圾RS返回，这对于运维来说维护很不便利，<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当我们在上生产时，我们最好通过设置Deployment的.spec.revisionHistoryLimit来限制最大保留的revision number，比如15个版本，回滚的时候一般只会回滚到最近的几个版本就足够了。其实rollout history中记录的revision都和ReplicaSets一一对应。如果手动delete某个ReplicaSet，对应的rollout history就会被删除，也就是还说你无法回滚到这个revison。rollout history和ReplicaSet的对应关系，可以在kubectl describe rs $RSNAME返回的revision字段中得到，这里的revision就对应着rollout history返回的revison。</p><ul><li><p>yaml例子</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ cat nginx-deployment.yaml </span><br><span class="line">apiVersion: apps/v1beta1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-deploy</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: nginx-demo</span><br><span class="line">spec:</span><br><span class="line">  replicas: 3</span><br><span class="line">  minReadySeconds: 5</span><br><span class="line">  revisionHistoryLimit: 10</span><br><span class="line">  strategy:</span><br><span class="line">    <span class="built_in">type</span>: RollingUpdate</span><br><span class="line">    rollingUpdate:</span><br><span class="line">      maxSurge: 1</span><br><span class="line">      maxUnavailable: 1</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: nginx</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: nginx</span><br><span class="line">        image: nginx:1.13.3</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 80</span><br></pre></td></tr></table></figure></li><li><p>可以使用下面的命令查看单个revison的信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl rollout <span class="built_in">history</span> deployment nginx-deploy --revision=2</span><br><span class="line">deployment.extensions/nginx-deploy with revision <span class="comment">#2</span></span><br><span class="line">Pod Template:</span><br><span class="line">  Labels:app=nginx</span><br><span class="line">pod-template-hash=799d666985</span><br><span class="line">  Annotations:kubernetes.io/change-cause: kubectl apply --filename=nginx-deployment.yaml --record=<span class="literal">true</span></span><br><span class="line">  Containers:</span><br><span class="line">   nginx:</span><br><span class="line">    Image:nginx:1.13.3</span><br><span class="line">    Port:80/TCP</span><br><span class="line">    Host Port:0/TCP</span><br><span class="line">    Environment:&lt;none&gt;</span><br><span class="line">    Mounts:&lt;none&gt;</span><br><span class="line">  Volumes:&lt;none&gt;</span><br></pre></td></tr></table></figure></li><li><p>直接回退到当前版本的前一个版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl rollout undo deployment nginx-deploy</span><br><span class="line">deployment.extensions/nginx-deploy rolled back</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以用revision回退到指定的版本</span></span><br><span class="line">$ kubectl rollout undo deployment nginx-deploy --to-revision=1</span><br><span class="line">deployment.extensions/nginx-deploy rolled back</span><br></pre></td></tr></table></figure></li><li><p>查看Deployment现在的状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get deployments</span><br><span class="line">NAME           READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx-deploy   2/3     3            2           56m</span><br><span class="line"></span><br><span class="line">$ kubectl get rs</span><br><span class="line">NAME                      DESIRED   CURRENT   READY   AGE</span><br><span class="line">nginx-deploy-6dd86d77d    1         1         1       56m</span><br><span class="line">nginx-deploy-799d666985   3         3         1       46m</span><br><span class="line"></span><br><span class="line">$ kubectl rollout status deployment/nginx-deploy</span><br><span class="line">Waiting <span class="keyword">for</span> deployment <span class="string">"nginx-deploy"</span> rollout to finish: 2 of 3 updated replicas are available...</span><br><span class="line">Waiting <span class="keyword">for</span> deployment <span class="string">"nginx-deploy"</span> rollout to finish: 2 of 3 updated replicas are available...</span><br><span class="line">deployment <span class="string">"nginx-deploy"</span> successfully rolled out</span><br><span class="line"></span><br><span class="line"><span class="comment"># 完成后查看</span></span><br><span class="line">$ kubectl get rs</span><br><span class="line">NAME                      DESIRED   CURRENT   READY   AGE</span><br><span class="line">nginx-deploy-6dd86d77d    0         0         0       57m</span><br><span class="line">nginx-deploy-799d666985   3         3         3       47m</span><br></pre></td></tr></table></figure></li></ul><p><a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noopener">官方参考</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;Deployment和rc的对比&quot;&gt;&lt;a href=&quot;#Deployment和rc的对比&quot; class=&quot;headerlink&quot; title=&quot;Deployment和rc的对比&quot;&gt;&lt;/a&gt;Deployment和rc的对比&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;首先RC是Kubernetes的一个核心概念，当我们把应用部署到集群之后，需要保证应用能够持续稳定的运行，RC就是这个保证的关键，主要功能如:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;确保Pod数量: 它会确保Kubernetes中有指定数量的Pod在运行，如果少于指定数量的Pod，RC就会创建新的，反之这会删除多余的，保证Pod的副本数量不变。&lt;/li&gt;&lt;li&gt;确保Pod健康: 当Pod不健康，比如运行出错了，总之无法提供正常服务时，RC也会杀死不健康的Pod，重新创建新的。&lt;/li&gt;&lt;li&gt;弹性伸缩: 在业务高峰或者低峰的时候，可以用过RC来动态的调整Pod数量来提供资源的利用率，当然我们也提到过如果使用HPA这种资源对象的话可以做到自动伸缩。&lt;/li&gt;&lt;li&gt;滚动升级: 滚动升级是一种平滑的升级方式，通过逐步替换的策略，保证整体系统的稳定性&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="kubernetes" scheme="https://www.xxlaila.cn/categories/kubernetes/"/>
    
    
      <category term="Deployment" scheme="https://www.xxlaila.cn/tags/Deployment/"/>
    
  </entry>
  
  <entry>
    <title>harbor私有仓库部署</title>
    <link href="https://www.xxlaila.cn/2019/09/30/harbor%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E9%83%A8%E7%BD%B2/"/>
    <id>https://www.xxlaila.cn/2019/09/30/harbor私有仓库部署/</id>
    <published>2019-09-30T06:55:28.000Z</published>
    <updated>2019-10-28T02:35:40.427Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性，例如安全、标识和管理等，扩展了开源Docker Distribution。作为一个企业级私有Registry服务器，Harbor提供了更好的性能和安全。提升用户使用Registry构建和运行环境传输镜像的效率。Harbor支持安装在多个Registry节点的镜像资源复制，镜像全部保存在私有Registry中， 确保数据和知识产权在公司内部网络中管控。另外，Harbor也提供了高级的安全特性，诸如用户管理，访问控制和活动审计等。</p><a id="more"></a><h3 id="部署环境准备"><a href="#部署环境准备" class="headerlink" title="部署环境准备"></a>部署环境准备</h3><h4 id="服务器配置"><a href="#服务器配置" class="headerlink" title="服务器配置"></a>服务器配置</h4><table><thead><tr><th>系统</th><th>配置</th><th>ip</th></tr></thead><tbody><tr><td>centos 7.4</td><td>4/8G/200G</td><td>172.21.16.90</td></tr></tbody></table><h4 id="下载所需文件"><a href="#下载所需文件" class="headerlink" title="下载所需文件"></a>下载所需文件</h4><h5 id="docker-compose-下载"><a href="#docker-compose-下载" class="headerlink" title="docker-compose 下载"></a>docker-compose 下载</h5><p>docker compose <a href="https://github.com/docker/compose/releases" target="_blank" rel="noopener">发布页面</a>下载最新的 docker-compose 二进制文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://github.com/docker/compose/releases/download/1.24.1/docker-compose-Linux-x86_64</span></span><br><span class="line"><span class="comment"># mv ~/docker-compose-Linux-x86_64 /usr/bin/docker-compose </span></span><br><span class="line"><span class="comment"># chmod a+x  /ur/bin/docker-compose</span></span><br></pre></td></tr></table></figure><ul><li>官方的安装<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span></span><br><span class="line"><span class="comment"># chmod +x /usr/local/bin/docker-compose</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="harbor-下载"><a href="#harbor-下载" class="headerlink" title="harbor 下载"></a>harbor 下载</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;harbor 安装方式有两种，一种是在线安装，一种是离线安装，这里由于网络不好，使用的是离线安装，harbor<a href="https://github.com/goharbor/harbor/releases" target="_blank" rel="noopener">发布页面</a>下载最新的 harbor 离线安装包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://storage.googleapis.com/harbor-releases/release-1.9.0/harbor-offline-installer-v1.9.0.tgz</span></span><br><span class="line"><span class="comment"># tar -zxvf harbor-offline-installer-v1.9.0.tgz</span></span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h3><h4 id="docker-安装"><a href="#docker-安装" class="headerlink" title="docker 安装"></a>docker 安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum-config-manager   --add-repo   https://download.docker.com/linux/centos/docker-ce.repo</span></span><br><span class="line"><span class="comment"># sudo yum -y install docker-ce-18.09.6-3.el7.x86_64</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cat /etc/sysctl.d/k8s.conf &lt;&lt;EOF</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables: 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables: 1</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># sysctl -p /etc/sysctl.d/k8s.conf</span></span><br><span class="line"><span class="comment"># systemctl  start docker</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>: 不添加<code>/etc/sysctl.d/k8s.conf</code> 启动docker会提示<code>WARNING: bridge-nf-call-iptables is disabled WARNING: bridge-nf-call-ip6tables is disabled</code></p><h4 id="导入-docker-images"><a href="#导入-docker-images" class="headerlink" title="导入 docker images"></a>导入 docker images</h4><p>导入离线安装包中harbor相关的 docker images：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd harbor</span></span><br><span class="line"><span class="comment"># docker load -i harbor.v1.9.0.tar.gz </span></span><br><span class="line"><span class="comment"># docker images</span></span><br><span class="line">REPOSITORY                      TAG                        IMAGE ID            CREATED             SIZE</span><br><span class="line">goharbor/chartmuseum-photon     v0.9.0-v1.9.0              00c12627cbd7        2 weeks ago         131MB</span><br><span class="line">goharbor/harbor-migrator        v1.9.0                     75d4de5e0f16        2 weeks ago         362MB</span><br><span class="line">goharbor/redis-photon           v1.9.0                     3249afaa9965        2 weeks ago         109MB</span><br><span class="line">goharbor/clair-photon           v2.0.9-v1.9.0              e54ad567c58f        2 weeks ago         165MB</span><br><span class="line">goharbor/notary-server-photon   v0.6.1-v1.9.0              2cdecba59f38        2 weeks ago         138MB</span><br><span class="line">goharbor/notary-signer-photon   v0.6.1-v1.9.0              973378593def        2 weeks ago         135MB</span><br><span class="line">goharbor/harbor-registryctl     v1.9.0                     30a01bf0f4df        2 weeks ago         99.6MB</span><br><span class="line">goharbor/registry-photon        v2.7.1-patch-2819-v1.9.0   32571099a9fe        2 weeks ago         82.3MB</span><br><span class="line">goharbor/nginx-photon           v1.9.0                     f933d62f9952        2 weeks ago         43.9MB</span><br><span class="line">goharbor/harbor-log             v1.9.0                     28e27d511335        2 weeks ago         82.6MB</span><br><span class="line">goharbor/harbor-jobservice      v1.9.0                     f3cd0b181a89        2 weeks ago         141MB</span><br><span class="line">goharbor/harbor-core            v1.9.0                     f2814ed8aadd        2 weeks ago         155MB</span><br><span class="line">goharbor/harbor-portal          v1.9.0                     0778d4c5d27e        2 weeks ago         51.3MB</span><br><span class="line">goharbor/harbor-db              v1.9.0                     a809e14d2d49        2 weeks ago         147MB</span><br><span class="line">goharbor/prepare                v1.9.0                     aa594772c1e8        2 weeks ago         147MB</span><br></pre></td></tr></table></figure><h4 id="修改-harbor-yml-文件"><a href="#修改-harbor-yml-文件" class="headerlink" title="修改 harbor.yml 文件"></a>修改 harbor.yml 文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim harbor.yml</span></span><br><span class="line">hostname: reg.xxlaila.cn</span><br><span class="line"></span><br><span class="line"><span class="comment"># email configure</span></span><br><span class="line">email_server: smtp.exmail.qq.com</span><br><span class="line">email_server_port: 465</span><br><span class="line">email_username: admin@xxlaila.cn</span><br><span class="line">email_password: 123</span><br><span class="line">email_from: admin&lt;admin@xxlaila.cn&gt;</span><br><span class="line">email_ssl: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User registration is prohibited</span></span><br><span class="line">self_registration: off</span><br><span class="line"></span><br><span class="line"><span class="comment"># LDAP authentication configuration item</span></span><br><span class="line"><span class="comment">#ldap_url: ldaps://ldap.xxlaila.cn</span></span><br><span class="line"><span class="comment">#ldap_searchdn: uid=username,ou=people,dc=xxlaila,dc=com</span></span><br><span class="line"><span class="comment">#ldap_search_pwd: password</span></span><br><span class="line"><span class="comment">#ldap_basedn: ou=people,dc=xxlaila,dc=com</span></span><br><span class="line"><span class="comment">#ldap_filter: (objectClass=person)</span></span><br><span class="line"><span class="comment">#ldap_uid: uid </span></span><br><span class="line"><span class="comment">#ldap_scope: 3 </span></span><br><span class="line"><span class="comment">#ldap_timeout: 5</span></span><br></pre></td></tr></table></figure><p><strong>注</strong>: 新版本的邮箱、ldap现在都不需要在配置文件里面来添加配置了，直接通过web界面来进行配置即可，这里我只是添加进来，保留，😁😁😁</p><h4 id="加载和启动-harbor-镜像"><a href="#加载和启动-harbor-镜像" class="headerlink" title="加载和启动 harbor 镜像"></a>加载和启动 harbor 镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir /data</span></span><br><span class="line"><span class="comment"># chmod 777 /var/run/docker.sock /data</span></span><br><span class="line"><span class="comment"># ./install.sh </span></span><br><span class="line"></span><br><span class="line">[Step 0]: checking installation environment ...</span><br><span class="line"></span><br><span class="line">Note: docker version: 19.03.2</span><br><span class="line"></span><br><span class="line">Note: docker-compose version: 1.24.1</span><br><span class="line"></span><br><span class="line">[Step 1]: loading Harbor images ...</span><br><span class="line">Loaded image: goharbor/harbor-portal:v1.9.0</span><br><span class="line">Loaded image: goharbor/harbor-core:v1.9.0</span><br><span class="line">Loaded image: goharbor/nginx-photon:v1.9.0</span><br><span class="line">Loaded image: goharbor/notary-signer-photon:v0.6.1-v1.9.0</span><br><span class="line">Loaded image: goharbor/registry-photon:v2.7.1-patch-2819-v1.9.0</span><br><span class="line">Loaded image: goharbor/harbor-migrator:v1.9.0</span><br><span class="line">Loaded image: goharbor/chartmuseum-photon:v0.9.0-v1.9.0</span><br><span class="line">Loaded image: goharbor/prepare:v1.9.0</span><br><span class="line">Loaded image: goharbor/harbor-log:v1.9.0</span><br><span class="line">Loaded image: goharbor/harbor-db:v1.9.0</span><br><span class="line">Loaded image: goharbor/clair-photon:v2.0.9-v1.9.0</span><br><span class="line">Loaded image: goharbor/harbor-jobservice:v1.9.0</span><br><span class="line">Loaded image: goharbor/harbor-registryctl:v1.9.0</span><br><span class="line">Loaded image: goharbor/redis-photon:v1.9.0</span><br><span class="line">Loaded image: goharbor/notary-server-photon:v0.6.1-v1.9.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Step 2]: preparing environment ...</span><br><span class="line">prepare base dir is <span class="built_in">set</span> to /opt/harbor</span><br><span class="line">Clearing the configuration file: /config/<span class="built_in">log</span>/logrotate.conf</span><br><span class="line">Clearing the configuration file: /config/<span class="built_in">log</span>/rsyslog_docker.conf</span><br><span class="line">Generated configuration file: /config/<span class="built_in">log</span>/logrotate.conf</span><br><span class="line">Generated configuration file: /config/<span class="built_in">log</span>/rsyslog_docker.conf</span><br><span class="line">Generated configuration file: /config/nginx/nginx.conf</span><br><span class="line">Generated configuration file: /config/core/env</span><br><span class="line">Generated configuration file: /config/core/app.conf</span><br><span class="line">Generated configuration file: /config/registry/config.yml</span><br><span class="line">Generated configuration file: /config/registryctl/env</span><br><span class="line">Generated configuration file: /config/db/env</span><br><span class="line">Generated configuration file: /config/jobservice/env</span><br><span class="line">Generated configuration file: /config/jobservice/config.yml</span><br><span class="line">Generated and saved secret to file: /secret/keys/secretkey</span><br><span class="line">Generated certificate, key file: /secret/core/private_key.pem, cert file: /secret/registry/root.crt</span><br><span class="line">Generated configuration file: /compose_location/docker-compose.yml</span><br><span class="line">Clean up the input dir</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Step 3]: starting Harbor ...</span><br><span class="line">Creating network <span class="string">"harbor_harbor"</span> with the default driver</span><br><span class="line">Creating harbor-log ... <span class="keyword">done</span></span><br><span class="line">Creating registryctl   ... <span class="keyword">done</span></span><br><span class="line">Creating redis         ... <span class="keyword">done</span></span><br><span class="line">Creating harbor-portal ... <span class="keyword">done</span></span><br><span class="line">Creating harbor-db     ... <span class="keyword">done</span></span><br><span class="line">Creating registry      ... <span class="keyword">done</span></span><br><span class="line">Creating harbor-core   ... <span class="keyword">done</span></span><br><span class="line">Creating nginx             ... <span class="keyword">done</span></span><br><span class="line">Creating harbor-jobservice ... <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">✔ ----Harbor has been installed and started successfully.----</span><br><span class="line"></span><br><span class="line">Now you should be able to visit the admin portal at http://reg.xxlaila.cn. </span><br><span class="line">For more details, please visit https://github.com/goharbor/harbor .</span><br></pre></td></tr></table></figure><h4 id="访问管理界面"><a href="#访问管理界面" class="headerlink" title="访问管理界面"></a>访问管理界面</h4><p>确认所有组件都工作正常：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose  ps</span></span><br><span class="line">      Name                     Command                       State                     Ports          </span><br><span class="line">------------------------------------------------------------------------------------------------------</span><br><span class="line">harbor-core         /harbor/harbor_core              Up (healthy)                                     </span><br><span class="line">harbor-db           /docker-entrypoint.sh            Up (healthy)            5432/tcp                 </span><br><span class="line">harbor-jobservice   /harbor/harbor_jobservice  ...   Up (health: starting)                            </span><br><span class="line">harbor-log          /bin/sh -c /usr/<span class="built_in">local</span>/bin/ ...   Up (healthy)            127.0.0.1:1514-&gt;10514/tcp</span><br><span class="line">harbor-portal       nginx -g daemon off;             Up (healthy)            8080/tcp                 </span><br><span class="line">nginx               nginx -g daemon off;             Up (healthy)            0.0.0.0:80-&gt;8080/tcp     </span><br><span class="line">redis               redis-server /etc/redis.conf     Up (healthy)            6379/tcp                 </span><br><span class="line">registry            /entrypoint.sh /etc/regist ...   Up (healthy)            5000/tcp                 </span><br><span class="line">registryctl         /harbor/start.sh                 Up (healthy)</span><br></pre></td></tr></table></figure><h5 id="harbor-组建介绍"><a href="#harbor-组建介绍" class="headerlink" title="harbor 组建介绍"></a>harbor 组建介绍</h5><ul><li>harbor-core: Harbor的核心功能，主要提供以下服务：<ul><li>UI：提供图形化界面，帮助用户管理registry上的镜像（image）, 并对用户进行授权。</li><li>webhook：为了及时获取registry 上image状态变化的情况， 在Registry上配置webhook，把状态变化传递给UI模块。</li><li>token 服务：负责根据用户权限给每个docker push/pull命令签发token. Docker 客户端向Regiøstry服务发起的请求,如果不包含token，会被重定向到这里，获得token后再重新向Registry进行请求。</li></ul></li><li>harbor-db: 为core services提供数据库服务，负责储存用户权限、审计日志、Docker image分组信息等数据。</li><li>harbor-jobservice: harbor-jobservice 是harbor的job管理模块，job在harbor里面主要是为了镜像仓库之前同步使用的;</li><li>harbor-log: 为了帮助监控Harbor运行，负责收集其他组件的log，供日后进行分析。</li><li>nginx: nginx负责流量转发和安全验证，对外提供的流量都是从nginx中转，所以开放https的443端口，它将流量分发到后端的ui和正在docker镜像存储的docker registry。</li><li>redis: 存储缓存信息</li><li>registry: 负责储存Docker镜像，并处理docker push/pull 命令。由于我们要对用户进行访问控制，即不同用户对Docker image有不同的读写权限，Registry会指向一个token服务，强制用户的每次docker pull/push请求都要携带一个合法的token, Registry会通过公钥对token 进行解密验证。</li><li>registryctl: 是harbor的管理员配置harbor的一些常用配置和高级配置</li></ul><p>在浏览器访问<a href="http://reg.xxlaila.cn，" target="_blank" rel="noopener">http://reg.xxlaila.cn，</a> 用账号 admin 和 harbor.yml 配置文件中的默认密码 Harbor12345 登陆系统<br><img src="https://img.xxlaila.cn/8095d05-b9b7-4bdc-b0fc-7810db649e23.png" alt="img"><br><img src="https://img.xxlaila.cn/4bfab8be-e5de-4165-9268-fa591c5f12f8.png" alt="img"></p><h4 id="harbor-运行时产生的文件、目录"><a href="#harbor-运行时产生的文件、目录" class="headerlink" title="harbor 运行时产生的文件、目录"></a>harbor 运行时产生的文件、目录</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;harbor 将日志打印到 /var/log/harbor 的相关目录下，传统的docker logs XXX 或 docker-compose logs XXX 看不到容器的日志。只有使用常用系统命令来进行日志的查看</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># # 日志目录</span></span><br><span class="line"><span class="comment"># ls /var/log/harbor</span></span><br><span class="line">core.log  jobservice.log  portal.log  postgresql.log  proxy.log  redis.log  registryctl.log  registry.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># # 数据目录，包括数据库、镜像仓库</span></span><br><span class="line"><span class="comment"># ls /data/</span></span><br><span class="line">ca_download  database  job_logs  psc  redis  registry  secret</span><br></pre></td></tr></table></figure><h4 id="其它操作"><a href="#其它操作" class="headerlink" title="其它操作"></a>其它操作</h4><p>下列操作的工作目录均为解压离线安装文件后生成的 harbor 目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># # 停止 harbor</span></span><br><span class="line"><span class="comment"># docker-compose down -v</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># # 启动 harbor</span></span><br><span class="line"><span class="comment"># docker-compose up -d</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># # 更修改的配置更新到 docker-compose.yml 文件</span></span><br><span class="line"><span class="comment"># ./prepare</span></span><br><span class="line">prepare base dir is <span class="built_in">set</span> to /opt/harbor</span><br><span class="line">Clearing the configuration file: /config/<span class="built_in">log</span>/logrotate.conf</span><br><span class="line">Clearing the configuration file: /config/<span class="built_in">log</span>/rsyslog_docker.conf</span><br><span class="line">Clearing the configuration file: /config/nginx/nginx.conf</span><br><span class="line">Clearing the configuration file: /config/core/env</span><br><span class="line">Clearing the configuration file: /config/core/app.conf</span><br><span class="line">Clearing the configuration file: /config/registry/config.yml</span><br><span class="line">Clearing the configuration file: /config/registry/root.crt</span><br><span class="line">Clearing the configuration file: /config/registryctl/env</span><br><span class="line">Clearing the configuration file: /config/registryctl/config.yml</span><br><span class="line">Clearing the configuration file: /config/db/env</span><br><span class="line">Clearing the configuration file: /config/jobservice/env</span><br><span class="line">Clearing the configuration file: /config/jobservice/config.yml</span><br><span class="line">Generated configuration file: /config/<span class="built_in">log</span>/logrotate.conf</span><br><span class="line">Generated configuration file: /config/<span class="built_in">log</span>/rsyslog_docker.conf</span><br><span class="line">Generated configuration file: /config/nginx/nginx.conf</span><br><span class="line">Generated configuration file: /config/core/env</span><br><span class="line">Generated configuration file: /config/core/app.conf</span><br><span class="line">Generated configuration file: /config/registry/config.yml</span><br><span class="line">Generated configuration file: /config/registryctl/env</span><br><span class="line">Generated configuration file: /config/db/env</span><br><span class="line">Generated configuration file: /config/jobservice/env</span><br><span class="line">Generated configuration file: /config/jobservice/config.yml</span><br><span class="line">loaded secret from file: /secret/keys/secretkey</span><br><span class="line">Generated configuration file: /compose_location/docker-compose.yml</span><br><span class="line">Clean up the input dir</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Nov 27 2019 09:16:28 GMT+0800 (China Standard Time) --&gt;&lt;h3 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性，例如安全、标识和管理等，扩展了开源Docker Distribution。作为一个企业级私有Registry服务器，Harbor提供了更好的性能和安全。提升用户使用Registry构建和运行环境传输镜像的效率。Harbor支持安装在多个Registry节点的镜像资源复制，镜像全部保存在私有Registry中， 确保数据和知识产权在公司内部网络中管控。另外，Harbor也提供了高级的安全特性，诸如用户管理，访问控制和活动审计等。&lt;/p&gt;
    
    </summary>
    
      <category term="kubernetes" scheme="https://www.xxlaila.cn/categories/kubernetes/"/>
    
    
      <category term="harbor" scheme="https://www.xxlaila.cn/tags/harbor/"/>
    
  </entry>
  
</feed>
